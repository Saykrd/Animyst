!function t(i,e,s){function n(o,p){if(!e[o]){if(!i[o]){var r="function"==typeof require&&require;if(!p&&r)return r(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=e[o]={exports:{}};i[o][0].call(c.exports,function(t){var e=i[o][1][t];return n(e?e:t)},c,c.exports,t,i,e,s)}return e[o].exports}for(var a="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,i,e){(function(t){"use strict";var e="undefined"!=typeof window?window.THREE:"undefined"!=typeof t?t.THREE:null,s=function(t){Animyst.AppState.call(this,t),this.inputData=null,this.gameData=null,this.viewport=null};i.exports=s,s.prototype=Object.create(Animyst.AppState.prototype),s.prototype.setup=function(){console.log("[Game] Setting Up..."),Animyst.AppState.prototype.setup.call(this),this.inputData=this.appScope.getDatabase(Animyst.CoreProcess.INPUT);var t=new e.Scene;this.viewport=new Animyst.View3D(t,Animyst.Window.width,Animyst.Window.height),this.viewport.initDisplay({resize:!0,debugControls:!0,addAxis:!0}),this.viewport.append();var i=new e.Texture(Animyst.DataLoad.getAsset("run_sheet"));i.needsUpdate=!0,console.log(i);var s=new e.SpriteMaterial({map:i}),n=new e.Sprite(s);n.scale.set(i.image.width,i.image.height,1),t.add(n);new Animyst.SpriteSheetData("run",Animyst.DataLoad.getAsset("run_data")),new Animyst.SpriteSheetAnimation("running",this.framerate)},s.prototype.start=function(){console.log("[Game] Start"),Animyst.AppState.prototype.start.call(this)},s.prototype.update=function(t,i){Animyst.AppState.prototype.update.call(this,t,i),this.viewport.render()},s.prototype.pause=function(){Animyst.AppState.prototype.pause.call(this)},s.prototype.resume=function(){Animyst.AppState.prototype.resume.call(this)},s.prototype.kill=function(){Animyst.AppState.prototype.kill.call(this)},s.prototype.restart=function(){Animyst.AppState.prototype.restart.call(this)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,i,e){"use strict";var s=function(){Animyst.Database.call(this),this.entities={},this.entities._total=0,this.entityCreationCount=0,this.addedSignal=new signals.Signal,this.removedSignal=new signals.Signal,this.updateSignal=new signals.Signal};i.exports=s,s.PLAYER=0,s.ENTITY_ADDED=0,s.ENTITY_REMOVED=1,s.ENTITY_UPDATED=2,s.prototype=Object.create(Animyst.Database.prototype),s.prototype.clear=function(){Animyst.Database.prototype.clear.call(this)},s.prototype.destroy=function(){this.entities=null,Animyst.Database.prototype.destroy.call(this)},s.prototype.addEntity=function(t,i,e){this.entities[t]||(this.entities[t]={},this.entities[t].count=0);var n={};if(n.id=i||t+"_"+this.entities[t].count,n.type=t,e)for(var a in e)n[a]=e[a];return this.entities[t][n.id]=n,this.entities[t].count++,this.entities._total++,this.signal.dispatch(s.ENTITY_ADDED,n),this.addedSignal.dispatch(n),n},s.prototype.getEntity=function(t,i){if(!i)for(var e in this.entities){var s=this.entities[e];for(var n in s)if(t==n){i=e;break}if(i)break}if(i&&this.entities[i][t])return this.entities[i][t]},s.prototype.removeEntity=function(t,i){if(!i)for(var e in this.entities){var n=this.entities[e];for(var a in n)if(t==a){i=e;break}if(i)break}if(i&&this.entities[i][t]){this.entities[i][t]=null,this.entities[i].count--,this.entities._total--,delete this.entities[i][t];var o={id:t,type:i};this.signal.dispatch(s.ENTITY_REMOVED,o),this.removedSignal.dispatch(o)}},s.prototype.notifyUpdate=function(t,i){var e=this.getEntity(t,i);e&&(this.signal.dispatch(s.ENTITY_UPDATED,e),this.updateSignal.dispatch(e))}},{}],3:[function(t,i,e){"use strict";var s=function n(t){Animyst.System.call(this),this.gameData=t,this.layer=null,this.graphics={},this.graphicProperties={},this.graphicProperties[n.PLAYER]={},this.graphicProperties[n.ENEMY]={}};i.exports=s,s.PLAYER=0,s.ENEMY01=1,s.prototype=Object.create(Animyst.System.prototype),s.prototype.startup=function(t){this.gameData.signal.add(this.entityHandler,this),this.layer=t.layer||new Layer({position:new Point}),Animyst.System.prototype.startup.call(this,t)},s.prototype.shutdown=function(){Animyst.System.prototype.shutdown.call(this)},s.prototype.update=function(t,i){Animyst.System.prototype.update.call(this)},s.prototype.entityHandler=function(t,i){switch(t){case GameData.ENTITY_ADDED:var e=this.createGraphic(this.graphicProperties[i.graphic]);e.position=i.position.clone(),this.layer.addChild(e),this.graphics[i.id]=e;break;case GameData.ENTITY_UPDATED:var e=this.getGraphicByID(i.id);e.position.x=i.position.x,e.position.y=i.position.y;break;case GameData.ENTITY_REMOVED:var e=this.getGraphicByID(i.id);e.remove(),this.graphics[i.id]=null,delete this.graphics[i.id]}},s.prototype.createGraphic=function(t){return new Shape.Circle({radius:20,fillColor:"#00FFFF"})},s.prototype.getGraphicByID=function(t){return this.graphics[t]}},{}],4:[function(t,i,e){"use strict";var s=function(t,i){Animyst.System.call(this),this.gameData=t,this.inputData=i,this.screenDimensions=new Point,this.commands={up:!1,down:!1,left:!1,right:!1,fire:!1,bomb:!1,focus:!1}};i.exports=s,s.prototype=Object.create(Animyst.System.prototype),s.prototype.startup=function(t){Animyst.System.prototype.startup.call(this),this.screenDimensions.x=Animyst.Window.width,this.screenDimensions.y=Animyst.Window.height;var i=this.gameData.addEntity(GameData.PLAYER,"player",{vector:new Point,position:new Point,neutralSpeed:new Point(10,10),focusSpeed:new Point(5,5),focus:!1,graphic:GameDisplay.PLAYER});i.position.x=this.screenDimensions.x/2,i.position.y=this.screenDimensions.y/2,console.log(this.screenDimensions),this.gameData.notifyUpdate("player",GameData.PLAYER),Animyst.System.prototype.startup.call(this,t)},s.prototype.shutdown=function(){Animyst.System.prototype.shutdown.call(this)},s.prototype.update=function(t,i){this.updateCommands(),this.updatePlayer(),Animyst.System.prototype.update.call(this)},s.prototype.updateCommands=function(){this.commands.up=this.inputData.isKeyDown("up"),this.commands.down=this.inputData.isKeyDown("down"),this.commands.left=this.inputData.isKeyDown("left"),this.commands.right=this.inputData.isKeyDown("right"),this.commands.fire=this.inputData.isKeyDown("z"),this.commands.focus=this.inputData.isKeyDown("shift")},s.prototype.updatePlayer=function(){var t=this.gameData.getEntity("player",GameData.PLAYER);t.focus=this.commands.focus;var i=t.focus?t.focusSpeed:t.neutralSpeed;t.vector.x=this.commands.left||this.commands.right?this.commands.left?-i.x:i.x:0,t.vector.y=this.commands.up||this.commands.down?this.commands.up?-i.y:i.y:0,t.position=t.position.add(t.vector),this.gameData.notifyUpdate("player",GameData.PLAYER)}},{}],5:[function(t,i,e){(function(i){"use strict";i.Main=t("./main.js"),i.Game=t("./game.js"),i.GameLogic=t("./gamelogic.js"),i.GameData=t("./gamedata.js"),i.GameDisplay=t("./gamedisplay.js")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./game.js":1,"./gamedata.js":2,"./gamedisplay.js":3,"./gamelogic.js":4,"./main.js":6}],6:[function(t,i,e){"use strict";var s=function(){this.game=null,this.app=null};i.exports=s,s.prototype={start:function(){console.log("======= MAIN ======"),this.app=new Animyst.Application,this.app.initSignal.addOnce(this.onAppInit,this),this.app.startup({})},onAppInit:function(){var t=new Game("game1");this.app.run(t)}}},{}]},{},[5]);
//# sourceMappingURL=app.js.map
