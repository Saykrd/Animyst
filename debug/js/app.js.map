{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","Game","id","Animyst","AppState","this","inputData","gameData","viewport","prototype","Object","create","setup","console","log","appScope","getDatabase","CoreProcess","INPUT","scene","THREE","Scene","View3D","Window","width","height","initDisplay","resize","debugControls","addAxis","append","start","update","delta","time","render","pause","resume","kill","restart",2,"GameData","Database","entities","_total","entityCreationCount","addedSignal","signals","Signal","removedSignal","updateSignal","PLAYER","ENTITY_ADDED","ENTITY_REMOVED","ENTITY_UPDATED","clear","destroy","addEntity","type","params","count","entity","k","signal","dispatch","getEntity","list","entityID","removeEntity","data","notifyUpdate",3,"GameDisplay","_GameDisplay","_x","apply","arguments","toString","System","layer","graphics","graphicProperties","ENEMY","ENEMY01","startup","add","entityHandler","Layer","position","Point","shutdown","graphic","createGraphic","clone","addChild","getGraphicByID","x","y","remove","prop","Shape","Circle","radius","fillColor",4,"GameLogic","screenDimensions","commands","up","down","left","right","fire","bomb","focus","player","vector","neutralSpeed","focusSpeed","updateCommands","updatePlayer","isKeyDown","speed",5,"Main","./game.js","./gamedata.js","./gamedisplay.js","./gamelogic.js","./main.js",6,"game","app","Application","initSignal","addOnce","onAppInit","run"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nGame = function(id){\n\tAnimyst.AppState.call(this, id);\n\n\tthis.inputData = null;\n\tthis.gameData  = null;\n\tthis.viewport = null;\n}\n\nmodule.exports = Game;\nGame.prototype = Object.create(Animyst.AppState.prototype);\nGame.prototype.setup = function(){\n\tconsole.log(\"[Game] Setting Up...\");\n\tAnimyst.AppState.prototype.setup.call(this);\n\n\tthis.inputData = this.appScope.getDatabase(Animyst.CoreProcess.INPUT);\n\t\n\tvar scene = new THREE.Scene();\n\tthis.viewport = new Animyst.View3D(scene, Animyst.Window.width, Animyst.Window.height);\n\tthis.viewport.initDisplay({resize : true, debugControls : true, addAxis : true});\n\tthis.viewport.append();\n\t//this.gameData = new GameData();\n\n\t//var gameLogic   = new GameLogic(this.gameData, this.inputData);\n\t//var gameDisplay = new GameDisplay(this.gameData);\n\n\n\n\t\n\t//gameDisplay.startup({layer: this.appScope.getDatabase(Animyst.CoreProcess.PAPER_DISPLAY).getLayer(1)});\n\t//gameLogic.startup();\n\n\t//var threeDisplay = this.appScope.getDatabase(Animyst.CoreProcess.THREE_DISPLAY);\n\t//var sideScrollerWorld3d = new Animyst.SideScrollerWorld3D(threeDisplay);\n\n\t//sideScrollerWorld3d.startup({})\n\n\t//this.addSystem(\"world\", sideScrollerWorld3d);\n\n\t//this.addSystem(\"gameLogic\", gameLogic);\n\t//this.addSystem(\"gameDisplay\", gameDisplay)\n\t//this.addSystem(\"sound\", sound);\n\n}\n\nGame.prototype.start = function(){\n\tconsole.log(\"[Game] Start\");\n\tAnimyst.AppState.prototype.start.call(this);\n}\n\nGame.prototype.update = function(delta, time){\n\t//console.log(\"[Game] Updating...\", delta, time)\n\tAnimyst.AppState.prototype.update.call(this, delta, time);\n\n\tthis.viewport.render();\n}\n\nGame.prototype.pause = function(){\n\tAnimyst.AppState.prototype.pause.call(this);\n}\n\nGame.prototype.resume = function(){\n\tAnimyst.AppState.prototype.resume.call(this);\n}\n\nGame.prototype.kill = function(){\n\tAnimyst.AppState.prototype.kill.call(this);\n}\n\nGame.prototype.restart = function(){\n\tAnimyst.AppState.prototype.restart.call(this);\n}\n\n},{}],2:[function(require,module,exports){\nGameData = function () {\r\n\tAnimyst.Database.call(this);\r\n\r\n\tthis.entities            = {};\r\n\tthis.entities._total     = 0;\r\n\tthis.entityCreationCount = 0;\r\n\r\n\tthis.addedSignal   = new signals.Signal();\r\n\tthis.removedSignal = new signals.Signal();\r\n\tthis.updateSignal  = new signals.Signal();\r\n}\r\n\r\nmodule.exports = GameData;\r\n\r\nGameData.PLAYER = 0;\r\n\r\n\r\nGameData.ENTITY_ADDED   = 0; // Passes Entity\r\nGameData.ENTITY_REMOVED = 1; // Passes Removed Entity Data\r\nGameData.ENTITY_UPDATED = 2; // Passes Entity\r\n\r\nGameData.prototype = Object.create(Animyst.Database.prototype);\r\nGameData.prototype.clear = function(){\r\n\r\n\r\n\tAnimyst.Database.prototype.clear.call(this);\r\n}\r\n\r\nGameData.prototype.destroy = function(){\r\n\tthis.entities = null;\r\n\r\n\tAnimyst.Database.prototype.destroy.call(this);\r\n}\r\n\r\nGameData.prototype.addEntity = function(type, id, params){\r\n\tif(!this.entities[type]){\r\n\t\tthis.entities[type]       = {};\r\n\t\tthis.entities[type].count = 0;\r\n\t}\r\n\r\n\tvar entity = {};\r\n\r\n\tentity.id   = id || type + \"_\" + this.entities[type].count;\r\n\tentity.type = type;\r\n\r\n\tif(params){\r\n\t\tfor(var k in params){\r\n\t\t\tentity[k] = params[k];\r\n\t\t}\r\n\t}\r\n\r\n\tthis.entities[type][entity.id] = entity;\r\n\tthis.entities[type].count++;\r\n\r\n\tthis.entities._total++;\r\n\r\n\tthis.signal.dispatch(GameData.ENTITY_ADDED, entity);\r\n\tthis.addedSignal.dispatch(entity);\r\n\r\n\treturn entity\r\n\r\n}\r\n\r\n\r\nGameData.prototype.getEntity = function(id, type){\r\n\tif(!type){\r\n\t\tfor(var k in this.entities){\r\n\t\t\tvar list = this.entities[k];\r\n\t\t\tfor(var entityID in list){\r\n\t\t\t\tif(id == entityID){\r\n\t\t\t\t\ttype = k;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(type) break;\r\n\t\t}\r\n\t}\r\n\r\n\tif(!type || !this.entities[type][id])return;\r\n\r\n\treturn this.entities[type][id];\r\n}\r\n\r\nGameData.prototype.removeEntity = function(id, type){\r\n\tif(!type){\r\n\t\tfor(var k in this.entities){\r\n\t\t\tvar list = this.entities[k];\r\n\t\t\tfor(var entityID in list){\r\n\t\t\t\tif(id == entityID){\r\n\t\t\t\t\ttype = k;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(type) break;\r\n\t\t}\r\n\t}\r\n\r\n\tif(!type || !this.entities[type][id])return;\r\n\r\n\tthis.entities[type][id] = null;\r\n\tthis.entities[type].count--;\r\n\tthis.entities._total--\r\n\r\n\tdelete this.entities[type][id];\r\n\r\n\tvar data = {id:id, type:type}\r\n\tthis.signal.dispatch(GameData.ENTITY_REMOVED, data);\r\n\tthis.removedSignal.dispatch(data);\r\n}\r\n\r\n\r\nGameData.prototype.notifyUpdate = function(id, type){\r\n\tvar entity = this.getEntity(id, type);\r\n\tif(entity){\r\n\t\tthis.signal.dispatch(GameData.ENTITY_UPDATED, entity);\r\n\t\tthis.updateSignal.dispatch(entity)\r\n\t}\r\n}\n},{}],3:[function(require,module,exports){\nGameDisplay = function(gameData){\r\n\tAnimyst.System.call(this);\r\n\r\n\tthis.gameData = gameData;\r\n\tthis.layer    = null;\r\n\tthis.graphics = {};\r\n\r\n\tthis.graphicProperties = {}\r\n\tthis.graphicProperties[GameDisplay.PLAYER] = {}\r\n\tthis.graphicProperties[GameDisplay.ENEMY]  = {}\r\n}\r\n\r\nmodule.exports = GameDisplay;\r\n\r\nGameDisplay.PLAYER  = 0;\r\nGameDisplay.ENEMY01 = 1;\r\n\r\n\r\nGameDisplay.prototype = Object.create(Animyst.System.prototype);\r\nGameDisplay.prototype.startup = function(params){\r\n\r\n\tthis.gameData.signal.add(this.entityHandler, this);\r\n\r\n\tthis.layer = params.layer || new Layer({position: new Point()});\r\n\t\r\n\tAnimyst.System.prototype.startup.call(this, params);\r\n}\r\n\r\nGameDisplay.prototype.shutdown = function(){\r\n\tAnimyst.System.prototype.shutdown.call(this);\r\n}\r\n\r\nGameDisplay.prototype.update = function(delta, time){\r\n\tAnimyst.System.prototype.update.call(this);\r\n}\r\n\r\nGameDisplay.prototype.entityHandler = function(type, data){\r\n\tswitch(type){\r\n\t\tcase GameData.ENTITY_ADDED:\r\n\t\t\tvar graphic = this.createGraphic(this.graphicProperties[data.graphic]);\r\n\r\n\t\t\tgraphic.position = data.position.clone();\r\n\r\n\t\t\tthis.layer.addChild(graphic);\r\n\r\n\t\t\tthis.graphics[data.id] = graphic;\r\n\t\t\tbreak;\r\n\t\tcase GameData.ENTITY_UPDATED:\r\n\r\n\t\t\tvar graphic = this.getGraphicByID(data.id);\r\n\t\t\t\r\n\t\t\tgraphic.position.x = data.position.x;\r\n\t\t\tgraphic.position.y = data.position.y;\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase GameData.ENTITY_REMOVED:\r\n\t\t\tvar graphic = this.getGraphicByID(data.id);\r\n\r\n\t\t\tgraphic.remove();\r\n\t\t\tthis.graphics[data.id] = null;\r\n\t\t\tdelete this.graphics[data.id];\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nGameDisplay.prototype.createGraphic = function(prop){\r\n\treturn new Shape.Circle({radius:20, fillColor:\"#00FFFF\"});\r\n}\r\n\r\nGameDisplay.prototype.getGraphicByID = function(id){\r\n\treturn this.graphics[id];\r\n}\n},{}],4:[function(require,module,exports){\nGameLogic = function (gameData, inputData){\r\n\tAnimyst.System.call(this);\r\n\r\n\tthis.gameData  = gameData;\r\n\tthis.inputData = inputData;\r\n\tthis.screenDimensions = new Point();\r\n\r\n\tthis.commands = {\r\n\t\t\"up\"    : false,\r\n\t\t\"down\"  : false,\r\n\t\t\"left\"  : false,\r\n\t\t\"right\" : false,\r\n\t\t\"fire\"  : false,\r\n\t\t\"bomb\"  : false,\r\n\t\t\"focus\" : false\r\n\t}\r\n}\r\n\r\nmodule.exports = GameLogic;\r\nGameLogic.prototype = Object.create(Animyst.System.prototype);\r\nGameLogic.prototype.startup = function(params){\r\n\r\n\tAnimyst.System.prototype.startup.call(this);\r\n\r\n\tthis.screenDimensions.x = Animyst.Window.width;\r\n\tthis.screenDimensions.y = Animyst.Window.height;\r\n\r\n\tvar player = this.gameData.addEntity(GameData.PLAYER, \"player\", {\r\n\t\tvector:       new Point(), \r\n\t\tposition:     new Point(),\r\n\t\tneutralSpeed: new Point(10, 10),\r\n\t\tfocusSpeed:   new Point( 5,  5),\r\n\t\tfocus:        false,\r\n\r\n\t\tgraphic:      GameDisplay.PLAYER\r\n\t});\r\n\r\n\tplayer.position.x = this.screenDimensions.x / 2;\r\n\tplayer.position.y = this.screenDimensions.y / 2;\r\n\r\n\tconsole.log(this.screenDimensions);\r\n\tthis.gameData.notifyUpdate(\"player\", GameData.PLAYER);\r\n\r\n\tAnimyst.System.prototype.startup.call(this, params);\r\n}\r\n\r\nGameLogic.prototype.shutdown = function(){\r\n\r\n\tAnimyst.System.prototype.shutdown.call(this);\r\n}\r\n\r\nGameLogic.prototype.update = function(delta, time){\r\n\tthis.updateCommands();\r\n\tthis.updatePlayer();\r\n\r\n\tAnimyst.System.prototype.update.call(this);\r\n}\r\n\r\nGameLogic.prototype.updateCommands = function(){\r\n\r\n\tthis.commands.up    = this.inputData.isKeyDown(\"up\");\r\n\tthis.commands.down  = this.inputData.isKeyDown(\"down\");\r\n\tthis.commands.left  = this.inputData.isKeyDown(\"left\");\r\n\tthis.commands.right = this.inputData.isKeyDown(\"right\");\r\n\tthis.commands.fire  = this.inputData.isKeyDown(\"z\");\r\n\tthis.commands.focus = this.inputData.isKeyDown(\"shift\");\r\n}\r\n\r\nGameLogic.prototype.updatePlayer = function(){\r\n\r\n\tvar player = this.gameData.getEntity(\"player\", GameData.PLAYER);\r\n\r\n\tplayer.focus = this.commands.focus;\r\n\r\n\tvar speed = player.focus ? player.focusSpeed : player.neutralSpeed;\r\n\r\n\tplayer.vector.x = (!this.commands.left && !this.commands.right) ? 0 : this.commands.left ? -speed.x : speed.x;\r\n\tplayer.vector.y = (!this.commands.up   && !this.commands.down)  ? 0 : this.commands.up   ? -speed.y : speed.y;\r\n\r\n\tplayer.position = player.position.add(player.vector);\r\n\tthis.gameData.notifyUpdate(\"player\", GameData.PLAYER);\r\n\r\n\t//console.log(player.position.x, player.position.y, player.vector.x, player.vector.y, speed.x, speed.y);\r\n}\n},{}],5:[function(require,module,exports){\n//Animyst = require(\"../../bin/animyst.js\");\r\nMain    = require('./main.js');\r\nGame \t= require('./game.js');\r\nGameLogic = require('./gamelogic.js');\r\nGameData = require('./gamedata.js');\r\nGameDisplay = require('./gamedisplay.js');\n},{\"./game.js\":1,\"./gamedata.js\":2,\"./gamedisplay.js\":3,\"./gamelogic.js\":4,\"./main.js\":6}],6:[function(require,module,exports){\n//require(\"../../bin/animyst.js\");\n\nMain = function(){\n\tthis.game = null;\n\tthis.app  = null;\n}\n\nmodule.exports = Main;\n\nMain.prototype = {\n\n\tstart: function(){\n\t\tconsole.log(\"====== MAIN ======\");\n\n\t\tthis.app = new Animyst.Application();\n\n\t\tthis.app.initSignal.addOnce(this.onAppInit, this);\n\n\t\tthis.app.startup({});\n\n\t},\n\n\tonAppInit: function(){\n\t\tlet game = new Game(\"game1\");\n\t\tthis.app.run(game);\n\t}\n\n}\n\n\n},{}]},{},[5]);\n"],"sourceRoot":"/source/"}