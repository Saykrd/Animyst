{"version":3,"sources":["Main.ts","tests/PIXITests.ts","tests/View3DTests.ts"],"names":[],"mappings":"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","file":"app.min.js","sourcesContent":["module App {\n\texport class Main extends Animyst.Application{\n\t\t\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.initSignal.addOnce(this.onInit, this);\n\t\t\tthis.bootSignal.addOnce(this.onBoot, this);\n\n\t\t}\n\n\t\tpublic onBoot():void{\n\t\t\tAnimyst.Log.output(\"App Booted!\");\n\t\t}\n\n\t\tpublic onInit():void{\n\t\t\tAnimyst.Log.output(\"App Initialized!\");\n\n\t\t\tthis.runTest(PIXITests);\n\t\t}\n\n\t\tpublic runTest(cls:any):void{\n\t\t\tvar state:Animyst.AppState = <Animyst.AppState> new cls();\n\t\t\tthis.run(state);\n\t\t}\n\n\t}\n}","module App {\r\n    export class PIXITests extends Animyst.AppState {\r\n    \t\r\n    \tpublic viewport:Animyst.ViewPIXI;\r\n\r\n    \tconstructor() {\r\n    \t\tsuper('PIXITests');\r\n    \t}\r\n\r\n    \tpublic setup():void{\r\n    \t\tthis.viewport = new Animyst.ViewPIXI();\r\n    \t\tthis.viewport.init({\r\n    \t\t\tbackgroundColor: 0x555555 \r\n    \t\t});\r\n    \t\tthis.viewport.append();\r\n\r\n\r\n    \t\tvar t1:PIXI.Texture = PIXI.Texture.from(Animyst.DataLoad.getPath('redball1'));//PIXI.Texture.fromCanvas(Animyst.DataLoad.getAsset('redball1'));\r\n    \t\tvar t2:PIXI.Texture = PIXI.Texture.from(Animyst.DataLoad.getPath('yellowball1'));//PIXI.Texture.fromCanvas(Animyst.DataLoad.getAsset('yellowball1'));\r\n    \t\tvar t3:PIXI.Texture = PIXI.Texture.from(Animyst.DataLoad.getPath('greenball1'));//PIXI.Texture.fromCanvas(Animyst.DataLoad.getAsset('greenball1'));\r\n\r\n\r\n\r\n    \t\t//var s1:PIXI.Sprite = new PIXI.Sprite(t1);//PIXI.Sprite.fromImage(Animyst.DataLoad.getData('redball1').src);\r\n    \t\t//var s2:PIXI.Sprite = new PIXI.Sprite(t3);\r\n\r\n            \r\n            var atlas:any = new PIXI.spine.core.TextureAtlas(Animyst.DataLoad.getAsset('raptor_atlas'), function(line, callback){\r\n                callback(PIXI.BaseTexture.from(Animyst.DataLoad.getPath('raptor_sheet')));\r\n            });\r\n\r\n            var rawSkelData:any = Animyst.DataLoad.getAsset('raptor_data');\r\n            var spineJSONParser:any = new PIXI.spine.core.SkeletonJson(new PIXI.spine.core.AtlasAttachmentLoader(atlas));\r\n            var skeletonData:any = spineJSONParser.readSkeletonData(rawSkelData);\r\n\r\n            var anim:PIXI.spine.Spine = new PIXI.spine.Spine(skeletonData);\r\n\r\n            this.viewport.stage.addChild(anim);\r\n\r\n            if(anim.state.hasAnimation(\"walk\")){\r\n                anim.state.setAnimation(0, \"walk\", true);\r\n            }\r\n\r\n           \r\n            anim.scale.set(0.75, 0.75);\r\n\r\n            anim.x = this.viewport.halfWidth;\r\n            anim.y = this.viewport.halfHeight + anim.height / 2;\r\n\r\n\r\n            var button:Animyst.PIXIModules.Button = new Animyst.PIXIModules.Button(t1, {downTexture : t3, overTexture:t2});\r\n            this.viewport.stage.addChild(button);\r\n\r\n            button.name = \"myButt\";\r\n    \t\tbutton.down.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n            button.up.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n            button.over.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n            button.out.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n    \t\t//this.viewport.stage.addChild(s1);\r\n    \t\t//this.viewport.stage.addChild(s2);\r\n    \t\t/*s1.x = 100;\r\n    \t\ts1.y = 100;\r\n\r\n    \t\ts2.x = this.viewport.width / 2;\r\n    \t\ts2.y = this.viewport.height / 2;\r\n\r\n    \t\ts1.interactive = true;\r\n            s1.buttonMode = true;\r\n\r\n            s1.on('pointerdown', function(){\r\n                console.log(\"pointer down~~~\");\r\n            })\r\n\r\n            s1.on('pointerup', function(){\r\n                console.log(\"pointer up~~~\");\r\n            })*/\r\n    \t}\r\n\r\n    \tpublic frameUpdate(delta:number, framecount:number):void{\r\n    \t\tthis.viewport.render();\t\r\n    \t}\r\n    }\r\n}","module App {\n\texport class View3DTests extends Animyst.AppState {\n\t\t\n\n\t\tpublic viewport:Animyst.View3D;\n\n\t\tconstructor() {\n\t\t\tsuper(\"game\");\n\t\t\t// code...\n\t\t}\n\n\n\t\tpublic setup():void{\n\t\t\tconsole.log(\"Setting up game\");\n\n\t\t\tthis.viewport = new Animyst.View3D();\n\t\t\tthis.viewport.init({resize : true, debugControls : true});\n\t\t\tthis.viewport.append();\n\n\n\t\t\tthis.viewport.create(Animyst.Scene3D, 'base', {\n\t\t\t\taddAxis : true,\n\t\t\t\tdebugControls: true,\n\t\t\t\tcameras : [\n\t\t\t\t\t{name:\"camera0\", type:\"perspective\", x: 500, y:500, z:500, fov:50, aspect: this.viewport.aspect, near: 0.1, far: 2000, main:true}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tthis.viewport.create(Animyst.Scene3D, 'ui', {\n\t\t\t\taddAxis : true,\n\t\t\t\tdebugControls: false,\n\t\t\t\tcameras : [\n\t\t\t\t\t{\t\n\t\t\t\t\t\tname:\"camera0\", type:\"orthographic\", \n\t\t\t\t\t\tx:this.viewport.width/2, y:-this.viewport.height/2, z:10, \n\t\t\t\t\t\tleft : - this.viewport.width / 2, right: this.viewport.width / 2, \n\t\t\t\t\t\ttop: this.viewport.height / 2, bottom: -this.viewport.height / 2,\n\t\t\t\t\t \tnear: 1, far: 2000, main:true, lookAtScene:false\n\t\t\t\t\t }\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tvar base:Animyst.Scene3D = <Animyst.Scene3D> this.viewport.get('base');\n\t\t\tvar ui:Animyst.Scene3D   = <Animyst.Scene3D> this.viewport.get('ui');\n\n\t\t\tvar texture0:THREE.CanvasTexture = new THREE.CanvasTexture(Animyst.DataLoad.getAsset(\"redball1\"));\n\t\t\tvar texture1:THREE.CanvasTexture = new THREE.CanvasTexture(Animyst.DataLoad.getAsset(\"greenball2\"));\n\n\t\t\tvar smatr0:THREE.SpriteMaterial = new THREE.SpriteMaterial({map: texture0, color: 0xffffff});\n\t\t\tvar smatr1:THREE.SpriteMaterial = new THREE.SpriteMaterial({map: texture1, color: 0xffffff});\n\n\t\t\tvar spriteBase:THREE.Sprite = new THREE.Sprite(smatr1);\n\t\t\tvar spriteUI:THREE.Sprite = new THREE.Sprite(smatr0);\n\n\n\n\t\t\tvar twidth = spriteUI.material.map.image.width;\n\t\t\tvar theight = spriteUI.material.map.image.height;\n\n\t\t\tconsole.log(twidth, theight, this.viewport.width, this.viewport.height);\n\n\t\t\t\n\t\t\tspriteUI.scale.set(twidth, theight, 1);\n\t\t\tspriteUI.position.set(178, -18, 0);\n\n\t\t\tspriteBase.position.set(100, 100, 100);\n\t\t\tspriteBase.scale.set(twidth / 2, theight / 2, 1);\n\n\n\t\t\tbase.scene.add(spriteBase);\n\t\t\tui.scene.add(spriteUI);\n\t\t}\n\n\t\tpublic frameUpdate(delta:number, framecount:number):void{\n\t\t\tsuper.frameUpdate(delta, framecount);\n\t\t\tif(this.viewport) this.viewport.render();\n\t\t}\n\t}\n}"],"sourceRoot":"./src"}