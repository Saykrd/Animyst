{"version":3,"sources":["Main.ts","tests/PIXITests.ts","tests/View3DTests.ts"],"names":[],"mappings":";;;;;AAAA,IAAO,GAAG,CA0BT;AA1BD,WAAO,GAAG;IACT;QAA0B,wBAAmB;QAE5C;YAAA,YACC,iBAAO,SAIP;YAHA,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAI,CAAC,MAAM,EAAE,KAAI,CAAC,CAAC;YAC3C,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAI,CAAC,MAAM,EAAE,KAAI,CAAC,CAAC;;QAE5C,CAAC;QAEM,qBAAM,GAAb;YACC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QACnC,CAAC;QAEM,qBAAM,GAAb;YACC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;YAEvC,IAAI,CAAC,OAAO,CAAC,IAAA,SAAS,CAAC,CAAC;QACzB,CAAC;QAEM,sBAAO,GAAd,UAAe,GAAO;YACrB,IAAI,KAAK,GAAuC,IAAI,GAAG,EAAE,CAAC;YAC1D,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACjB,CAAC;QAEF,WAAC;IAAD,CAxBA,AAwBC,CAxByB,OAAO,CAAC,WAAW,GAwB5C;IAxBY,QAAI,OAwBhB,CAAA;AACF,CAAC,EA1BM,GAAG,KAAH,GAAG,QA0BT;AC1BD,IAAO,GAAG,CA2DT;AA3DD,WAAO,GAAG;IACN;QAA+B,6BAAgB;QAI9C;mBACC,kBAAM,WAAW,CAAC;QACnB,CAAC;QAEM,yBAAK,GAAZ;YACC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC;YACvC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;gBAClB,eAAe,EAAE,QAAQ;aACzB,CAAC,CAAC;YACH,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YAEjB,IAAI,SAAS,GAAyC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC;YAC/G,IAAI,OAAO,GAAyC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;YAI3G,SAAS,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,EAAE;gBACrC,KAAK,EAAE,cAAc;gBACrB,IAAI,EAAE,aAAa;gBACnB,KAAK,EAAE,cAAc;gBACrB,IAAI,EAAG,MAAM;gBACb,CAAC,EAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,EAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,GAAG,GAAG,CAAC;gBACnE,KAAK,EAAG,EAAC,CAAC,EAAG,IAAI,EAAE,CAAC,EAAG,IAAI,EAAC;aAC/B,CAAC,CAAA;YAEF,IAAI,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE;gBACjD,EAAE,EAAG,YAAY;gBACjB,IAAI,EAAG,UAAU;gBACjB,IAAI,EAAE,aAAa;gBACnB,CAAC,EAAE,EAAE,EAAE,CAAC,EAAG,GAAG,EAAE,KAAK,EAAG,GAAG;aAC9B,CAAC,CAAA;YAER,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,UAAS,EAAS,EAAE,MAAiC;gBAC3D,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;YACjC,CAAC,CAAC,CAAA;YAEF,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,UAAS,EAAS,EAAE,MAAiC;gBAC/D,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;YACjC,CAAC,CAAC,CAAA;YAEF,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,UAAS,EAAS,EAAE,MAAiC;gBACjE,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;YACjC,CAAC,CAAC,CAAA;YAEF,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,UAAS,EAAS,EAAE,MAAiC;gBAChE,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;YACjC,CAAC,CAAC,CAAA;QAET,CAAC;QAEM,+BAAW,GAAlB,UAAmB,KAAY,EAAE,UAAiB;YACjD,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC;QACF,gBAAC;IAAD,CAzDA,AAyDC,CAzD8B,OAAO,CAAC,QAAQ,GAyD9C;IAzDY,aAAS,YAyDrB,CAAA;AACL,CAAC,EA3DM,GAAG,KAAH,GAAG,QA2DT;AC3DD,IAAO,GAAG,CA8ET;AA9ED,WAAO,GAAG;IACT;QAAiC,+BAAgB;QAKhD;mBACC,kBAAM,MAAM,CAAC;YACb,UAAU;QACX,CAAC;QAGM,2BAAK,GAAZ;YACC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAE/B,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;YACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAC,MAAM,EAAG,IAAI,EAAE,aAAa,EAAG,IAAI,EAAC,CAAC,CAAC;YAC1D,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YAGvB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,EAAE;gBAC7C,OAAO,EAAG,IAAI;gBACd,aAAa,EAAE,IAAI;gBACnB,OAAO,EAAG;oBACT,EAAC,IAAI,EAAC,SAAS,EAAE,IAAI,EAAC,aAAa,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAC,GAAG,EAAE,CAAC,EAAC,GAAG,EAAE,GAAG,EAAC,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAC,IAAI,EAAC;iBACjI;aACD,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,EAAE;gBAC3C,OAAO,EAAG,IAAI;gBACd,aAAa,EAAE,KAAK;gBACpB,OAAO,EAAG;oBACT;wBACC,IAAI,EAAC,SAAS,EAAE,IAAI,EAAC,cAAc;wBACnC,CAAC,EAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAC,CAAC,EAAE,CAAC,EAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAC,CAAC,EAAE,CAAC,EAAC,EAAE;wBACxD,IAAI,EAAG,CAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;wBAChE,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC;wBAC/D,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAC,IAAI,EAAE,WAAW,EAAC,KAAK;qBAChD;iBACF;aACD,CAAC,CAAC;YAEH,IAAI,IAAI,GAAqC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACvE,IAAI,EAAE,GAAuC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAErE,IAAI,QAAQ,GAAuB,IAAI,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;YAClG,IAAI,QAAQ,GAAuB,IAAI,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;YAEpG,IAAI,MAAM,GAAwB,IAAI,KAAK,CAAC,cAAc,CAAC,EAAC,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAC,CAAC,CAAC;YAC7F,IAAI,MAAM,GAAwB,IAAI,KAAK,CAAC,cAAc,CAAC,EAAC,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAC,CAAC,CAAC;YAE7F,IAAI,UAAU,GAAgB,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACvD,IAAI,QAAQ,GAAgB,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAIrD,IAAI,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC;YAC/C,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC;YAEjD,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAGxE,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;YACvC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YAEnC,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YACvC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;YAGjD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YAC3B,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QACxB,CAAC;QAEM,iCAAW,GAAlB,UAAmB,KAAY,EAAE,UAAiB;YACjD,iBAAM,WAAW,YAAC,KAAK,EAAE,UAAU,CAAC,CAAC;YACrC,EAAE,CAAA,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QAC1C,CAAC;QACF,kBAAC;IAAD,CA5EA,AA4EC,CA5EgC,OAAO,CAAC,QAAQ,GA4EhD;IA5EY,eAAW,cA4EvB,CAAA;AACF,CAAC,EA9EM,GAAG,KAAH,GAAG,QA8ET","file":"app.min.js","sourcesContent":["module App {\n\texport class Main extends Animyst.Application{\n\t\t\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.initSignal.addOnce(this.onInit, this);\n\t\t\tthis.bootSignal.addOnce(this.onBoot, this);\n\n\t\t}\n\n\t\tpublic onBoot():void{\n\t\t\tAnimyst.Log.output(\"App Booted!\");\n\t\t}\n\n\t\tpublic onInit():void{\n\t\t\tAnimyst.Log.output(\"App Initialized!\");\n\n\t\t\tthis.runTest(PIXITests);\n\t\t}\n\n\t\tpublic runTest(cls:any):void{\n\t\t\tvar state:Animyst.AppState = <Animyst.AppState> new cls();\n\t\t\tthis.run(state);\n\t\t}\n\n\t}\n}","module App {\r\n    export class PIXITests extends Animyst.AppState {\r\n    \t\r\n    \tpublic viewport:Animyst.ViewPIXI;\r\n\r\n    \tconstructor() {\r\n    \t\tsuper('PIXITests');\r\n    \t}\r\n\r\n    \tpublic setup():void{\r\n    \t\tthis.viewport = new Animyst.ViewPIXI();\r\n    \t\tthis.viewport.init({\r\n    \t\t\tbackgroundColor: 0x555555 \r\n    \t\t});\r\n    \t\tthis.viewport.append();\r\n\r\n            var gameLayer:Animyst.ScenePIXI = <Animyst.ScenePIXI> this.viewport.create(Animyst.ScenePIXI, \"gameLayer\", {});\r\n            var uiLayer:Animyst.ScenePIXI = <Animyst.ScenePIXI> this.viewport.create(Animyst.ScenePIXI, \"uiLayer\", {});\r\n\r\n\r\n\r\n            gameLayer.makeElement('raptor', 'spine', {\r\n                atlas: 'raptor_atlas',\r\n                data: 'raptor_data',\r\n                sheet: 'raptor_sheet',\r\n                anim : 'walk',\r\n                x : this.viewport.halfWidth, y : this.viewport.halfHeight + 600 / 2,\r\n                scale : {x : 0.75, y : 0.75}\r\n            })\r\n\r\n            var button = uiLayer.makeElement('button', 'button', {\r\n                up : 'greenball2',\r\n                down : 'redball1',\r\n                over: 'yellowball1',\r\n                x: 50, y : 500, scale : 0.5\r\n            })\r\n\r\n    \t\tbutton.down.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n            button.up.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n            button.over.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n            button.out.add(function(id:number, button:Animyst.PIXIModules.Button){\r\n                console.log(id, button.name);\r\n            })\r\n\r\n    \t}\r\n\r\n    \tpublic frameUpdate(delta:number, framecount:number):void{\r\n    \t\tthis.viewport.render();\t\r\n    \t}\r\n    }\r\n}","module App {\n\texport class View3DTests extends Animyst.AppState {\n\t\t\n\n\t\tpublic viewport:Animyst.View3D;\n\n\t\tconstructor() {\n\t\t\tsuper(\"game\");\n\t\t\t// code...\n\t\t}\n\n\n\t\tpublic setup():void{\n\t\t\tconsole.log(\"Setting up game\");\n\n\t\t\tthis.viewport = new Animyst.View3D();\n\t\t\tthis.viewport.init({resize : true, debugControls : true});\n\t\t\tthis.viewport.append();\n\n\n\t\t\tthis.viewport.create(Animyst.Scene3D, 'base', {\n\t\t\t\taddAxis : true,\n\t\t\t\tdebugControls: true,\n\t\t\t\tcameras : [\n\t\t\t\t\t{name:\"camera0\", type:\"perspective\", x: 500, y:500, z:500, fov:50, aspect: this.viewport.aspect, near: 0.1, far: 2000, main:true}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tthis.viewport.create(Animyst.Scene3D, 'ui', {\n\t\t\t\taddAxis : true,\n\t\t\t\tdebugControls: false,\n\t\t\t\tcameras : [\n\t\t\t\t\t{\t\n\t\t\t\t\t\tname:\"camera0\", type:\"orthographic\", \n\t\t\t\t\t\tx:this.viewport.width/2, y:-this.viewport.height/2, z:10, \n\t\t\t\t\t\tleft : - this.viewport.width / 2, right: this.viewport.width / 2, \n\t\t\t\t\t\ttop: this.viewport.height / 2, bottom: -this.viewport.height / 2,\n\t\t\t\t\t \tnear: 1, far: 2000, main:true, lookAtScene:false\n\t\t\t\t\t }\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tvar base:Animyst.Scene3D = <Animyst.Scene3D> this.viewport.get('base');\n\t\t\tvar ui:Animyst.Scene3D   = <Animyst.Scene3D> this.viewport.get('ui');\n\n\t\t\tvar texture0:THREE.CanvasTexture = new THREE.CanvasTexture(Animyst.DataLoad.getAsset(\"redball1\"));\n\t\t\tvar texture1:THREE.CanvasTexture = new THREE.CanvasTexture(Animyst.DataLoad.getAsset(\"greenball2\"));\n\n\t\t\tvar smatr0:THREE.SpriteMaterial = new THREE.SpriteMaterial({map: texture0, color: 0xffffff});\n\t\t\tvar smatr1:THREE.SpriteMaterial = new THREE.SpriteMaterial({map: texture1, color: 0xffffff});\n\n\t\t\tvar spriteBase:THREE.Sprite = new THREE.Sprite(smatr1);\n\t\t\tvar spriteUI:THREE.Sprite = new THREE.Sprite(smatr0);\n\n\n\n\t\t\tvar twidth = spriteUI.material.map.image.width;\n\t\t\tvar theight = spriteUI.material.map.image.height;\n\n\t\t\tconsole.log(twidth, theight, this.viewport.width, this.viewport.height);\n\n\t\t\t\n\t\t\tspriteUI.scale.set(twidth, theight, 1);\n\t\t\tspriteUI.position.set(178, -18, 0);\n\n\t\t\tspriteBase.position.set(100, 100, 100);\n\t\t\tspriteBase.scale.set(twidth / 2, theight / 2, 1);\n\n\n\t\t\tbase.scene.add(spriteBase);\n\t\t\tui.scene.add(spriteUI);\n\t\t}\n\n\t\tpublic frameUpdate(delta:number, framecount:number):void{\n\t\t\tsuper.frameUpdate(delta, framecount);\n\t\t\tif(this.viewport) this.viewport.render();\n\t\t}\n\t}\n}"],"sourceRoot":"./src"}