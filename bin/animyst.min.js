var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Animyst;!function(t){var e=function(){function e(e){this._lastFrame=0,this._framerate=60,this._framecount=0,this._timestep=1e3/this._framerate,this.runtime=0,this._appStateList=[],this._appStateLib={},this.appScope=new t.AppScope,this.initSignal=new t.Signal}return Object.defineProperty(e.prototype,"framerate",{get:function(){return this._framerate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framecount",{get:function(){return this._framecount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestep",{get:function(){return this._timestep},set:function(t){this._timestep=t},enumerable:!0,configurable:!0}),e.prototype.startup=function(e){var i=this;t.Log.output("==================================================="),t.Log.output("   ----- AnimystJS: (v "+t.VERSION+") by ~Saykrd -----   "),t.Log.output("==================================================="),t.Log.output("Browser:",t.Environment.browserName),t.Log.output("Version:",t.Environment.browserVersion),t.Log.output("Platform:",t.Environment.platformName),t.Log.output("==================================================="),this._startParams=e,t.DataLoad.startup({}),t.DataLoad.loadAsset({id:"config",src:"config.json"},function(t,e){return i.onLoading(t,e)})},e.prototype.onLoading=function(e,i){if(e==t.DataLoad.FILE_LOADED)switch(i.item.id){case"config":t.Log.output("[Application] Config json loaded"),this.config=t.DataLoad.getAsset("config"),this.appScope.config=this.config,t.DataLoad.loadFromManifest([{id:"assets",src:this.config.assets},{id:"strings",src:this.config.strings}]);break;case"assets":t.Log.output("[Application] Assets json loaded");var n=t.DataLoad.getAsset("assets");t.DataLoad.listAssets(n.manifest),n.initialLoad&&t.DataLoad.loadFromManifest(n.initialLoad);break;case"strings":t.Log.output("[Application] Strings json loaded")}else e==t.DataLoad.LOAD_COMPLETE&&this.init()},e.prototype.init=function(){var e=this;this._startParams;t.LOGGING=this.config.settings.logging||t.LOGGING,t.DEBUG=this.config.settings.debug||t.DEBUG,t.Log.output("[Application] Application Started"),this.config.settings.debug&&(window.Stats&&!t.Environment.isCocoonJS&&(this._stats=new window.Stats,this._stats.domElement.style.position="absolute",this._stats.domElement.style.left="0px",this._stats.domElement.style.top="0px",document.body.appendChild(this._stats.domElement),t.Log.output("[Application] Stats Enabled")),window.dat&&!t.Environment.isCocoonJS&&(t.GUI=new window.dat.GUI));var i=new t.CoreProcess(t.CoreProcess.ID);this.run(i),this.timestep=this.config.settings.timestep||this.timestep,setInterval(function(){return e.fixedUpdate},this.timestep),window.view?window.view.onFrame=this.frameUpdate.bind(this):this.initFrame(),this.initSignal.dispatch()},e.prototype.initFrame=function(){var t=this;requestAnimationFrame(function(){return t.initFrame()}),this.frameUpdate()},e.prototype.run=function(t){this._appStateLib[t.id]||(this._appStateLib[t.id]=t,this._appStateList.push(t),t.setScope(this.appScope),t.framerate=this.framerate,t.timestep=this.timestep,t.setup(),t.start())},e.prototype.halt=function(t){this._appStateLib[t]||this._appStateLib[t].pause()},e.prototype.resume=function(t){this._appStateLib[t]||this._appStateLib[t].resume()},e.prototype.end=function(t){if(!this._appStateLib[t]){var e=this._appStateLib[t];e.kill(),this._appStateLib[e.id]=null;for(var i=0;i<this._appStateList.length;i++){var n=this._appStateList[i];if(n.id==e.id){this._appStateList.splice(i,1);break}}}},e.prototype.endAll=function(){for(var t in this._appStateLib)this.end(t)},e.prototype.fixedUpdate=function(){this.runtime+=this.timestep;for(var t=0;t<this._appStateList.length;t++){var e=this._appStateList[t];e.fixedUpdate(this.timestep,this.runtime)}},e.prototype.frameUpdate=function(t){var e=0,i=0;t?(e=t.delta,i=t.time):(i=Date.now(),e=i-(this._lastFrame||Date.now()),this._lastFrame=i),this._stats&&this._stats.begin();for(var n=0;n<this._appStateList.length;n++){var s=this._appStateList[n];s.update(e,this._framecount)}this._framecount++,this._stats&&this._stats.end()},e}();t.Application=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(){this.databases={}}return t.prototype.addDatabase=function(t,e){this.databases[t]=e},t.prototype.getDatabase=function(t){return this.databases[t]},t}();t.AppScope=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(t){this._systemList=[],this._systemLib=[],this._framerate=60,this._timestep=1e3/this.framerate,this._id=t}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"framerate",{get:function(){return this._framerate},set:function(t){this._framerate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timestep",{get:function(){return this._timestep},set:function(t){this._timestep=t},enumerable:!0,configurable:!0}),t.prototype.setScope=function(t){this.appScope=t},t.prototype.clearScope=function(){this.appScope=null},t.prototype.setup=function(){},t.prototype.start=function(){this.active=!0},t.prototype.stop=function(){this.active=!1;for(var t=0;t<this._systemList.length;t++){var e=this._systemList[t];e.shutdown()}},t.prototype.update=function(t,e){if(this.active&&!this.paused)for(var i=0;i<this._systemList.length;i++){var n=this._systemList[i];n.started&&!n.paused&&n.update(t,e)}},t.prototype.fixedUpdate=function(t,e){if(this.active&&!this.paused)for(var i=0;i<this._systemList.length;i++){var n=this._systemList[i];n.started&&!n.paused&&n.fixedUpdate(t,e)}},t.prototype.pause=function(){this.paused=!0},t.prototype.resume=function(){this.paused=!1},t.prototype.kill=function(){this.stop(),this.clearScope(),this._systemList=null,this._systemLib=null},t.prototype.restart=function(){},t.prototype.addSystem=function(t,e){this._systemList[t]||(this._systemLib[t]=e,this._systemList.push(e))},t.prototype.getSystem=function(t){return this._systemList[t]?void console.error("[AppState] !! No system found with ID: "+t):this._systemLib[t]},t}();t.AppState=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function e(){this._itemCount=0,this._items={},this._itemList=[],this._categoryLists={},this._categoryChecks={},this.signal=new t.Signal}return e.prototype.addCategory=function(t,e,i,n){this._categoryLists[t]=[],this._categoryChecks[t]={check:e,context:n,cls:i},this.traverse(this.list,this)},e.prototype.hasCategory=function(t){return null!=this._categoryLists[t]},e.prototype.list=function(e){for(var i in this._categoryLists){var n=this._categoryChecks[i];e instanceof n.cls&&n.check.call(n.context,e)&&t.ArrayUtil.include(e.id,this._categoryLists[i])}},e.prototype.unlist=function(e){for(var i in this._categoryLists)for(var n=0;n<this._categoryLists[i].length;n++)t.ArrayUtil.remove(e,this._categoryLists[i])},e.prototype.getItemsInCategory=function(t){for(var e=this._categoryLists[t]||[],i=e.length-1;i>=0&&e.length>0;i--){var n=this.getItem(e[i]);n||e.splice(i,1)}return e},e.prototype.isInCategory=function(t,e){var i=this._categoryLists[e];return i.indexOf(t)>-1},e.prototype.traverse=function(t,e,i){void 0===i&&(i=null);for(var n=this._categoryLists[i]||this._itemList,s=0;s<n.length;s++){var r=this.getItem(n[s]);r?t.call(e,r):(n.splice(s,1),s--)}},e.prototype.create=function(t,i,n){i||(i="item"+this._itemCount),this._items[i]&&(i+=this._itemCount);var s=new t(i,n);return s.id=i,this._items[i]=s,this._itemList.push(s.id),this.list(s),this._itemCount++,s.signal=this.signal,this.signal.dispatch(e.ADDED,s.id),s},e.prototype.remove=function(t){if(this._items[t]){this.getItem(t);this.unlist(t),delete this._items[t],this.signal.dispatch(e.REMOVED,t)}},e.prototype.removeAll=function(){this.traverse(function(t){this.remove(t.id)},this)},e.prototype.getItem=function(t){return this._items[t]},e.prototype.clear=function(){},e.prototype.destroy=function(){},e}();e.ADDED="added",e.REMOVED="removed",t.Database=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function e(t){}return e.startup=function(i){e.LoadQueue=window.createjs.LoadQueue,e._loadQueue=new e.LoadQueue(!0),e._loadSignal=new t.Signal;var n=e._loadQueue;n.on("fileload",e.handleFileLoaded),n.on("complete",e.handleLoadComplete),n.on("fileerror",e.handleFileError),n.on("error",e.handleLoaderError),n.on("filestart",e.handleFileStart),n.on("initialize",e.handleLoadInitialize),n.on("loadstart",e.handleLoadStart),n.on("fileprogress",e.handleFileProgress),n.on("progress",e.handleOverallProgress),e._fileStartedSignal=new t.Signal,e._fileProgressSignal=new t.Signal,e._fileLoadedSignal=new t.Signal,e._fileErrorSignal=new t.Signal,e._queueStartedSignal=new t.Signal,e._queueProgressSignal=new t.Signal,e._queueLoadedSignal=new t.Signal,e._queueErrorSignal=new t.Signal,null!=i.manifest},e.listAssets=function(t){for(var i=e._assetList,n=0;n<t.length;n++){var s=t[n];i[s.id]=s}},e.loadFromManifest=function(t,i,n){void 0===n&&(n=!1);for(var s=e._loadQueue,r=[],a=0;a<t.length;a++){var o,h=t[a];o="string"==typeof h?{id:h,src:h}:{id:h.id,src:h.src},e._assetList[o.id]||(e._assetList[o.id]=o),r.push(e._assetList[o.id])}e.addLoadHandler(i,n),e._busy=!0,s.loadManifest(r)},e.loadAsset=function(t,i,n){void 0===n&&(n=!1);var s,r=e._loadQueue;s="string"==typeof t?{id:t,src:t}:{id:t.id,src:t.src},e._assetList[s.id]||(e._assetList[s.id]=s),e.addLoadHandler(i,n),e._busy=!0,r.loadFile(e._assetList[s.id])},e.getAsset=function(t){return e._loadQueue.getResult(t)},e.getData=function(t){return e._assetList[t]},e.addLoadHandler=function(t,i){void 0===i&&(i=!1),t&&(i||e._weakHandlers.push(t),e._loadSignal.add(t))},e.removeLoadHandler=function(t){for(var i=e._weakHandlers.length-1;i>=0&&e._weakHandlers.length>0;i--){var n=e._weakHandlers[i];if(n==t){e._weakHandlers.splice(i,1);break}}e._loadSignal.remove(t)},e.removeWeakHandlers=function(t){for(e._loadSignal;t.length>0;){var i=t.shift();e.removeLoadHandler(i)}},e.addCommand=function(t,i,n){void 0===n&&(n=!1);var s;switch(t){case e.LOAD_STARTED:s=e._queueStartedSignal;break;case e.FILE_STARTED:s=e._fileStartedSignal;break;case e.LOAD_PROGRESS:s=e._queueProgressSignal;break;case e.FILE_PROGRESS:s=e._fileProgressSignal;break;case e.LOAD_COMPLETE:s=e._queueLoadedSignal;break;case e.FILE_LOADED:s=e._fileLoadedSignal;break;case e.LOAD_ERROR:s=e._queueErrorSignal;break;case e.FILE_ERROR:s=e._fileErrorSignal}n?s.addOnce(i):s.add(i)},e.removeCommand=function(t,i){var n;switch(t){case e.LOAD_STARTED:n=e._queueStartedSignal;break;case e.FILE_STARTED:n=e._fileStartedSignal;break;case e.LOAD_PROGRESS:n=e._queueProgressSignal;break;case e.FILE_PROGRESS:n=e._fileProgressSignal;break;case e.LOAD_COMPLETE:n=e._queueLoadedSignal;break;case e.FILE_LOADED:n=e._fileLoadedSignal;break;case e.LOAD_ERROR:n=e._queueErrorSignal;break;case e.FILE_ERROR:n=e._fileErrorSignal}n.remove(i)},e.handleLoadInitialize=function(t){var i=e._loadSignal;i.dispatch(e.LOAD_INITIALIZE,t)},e.handleLoadStart=function(i){t.Log.output("[DataLoad] Load Started!");var n=e._loadSignal;n.dispatch(e.LOAD_STARTED,i),e._queueStartedSignal.dispatch(i)},e.handleFileStart=function(i){t.Log.output("[DataLoad] Loading File:",i.item.id,"from:",i.item.src);var n=e._loadSignal;n.dispatch(e.FILE_STARTED,i),e._fileStartedSignal.dispatch(i)},e.handleFileLoaded=function(i){t.Log.output("[DataLoad] File Loaded:",i.item.id,"from:",i.item.src);var n=e._loadSignal;n.dispatch(e.FILE_LOADED,i),e._fileLoadedSignal.dispatch(i)},e.handleLoadComplete=function(i){t.Log.output("[DataLoad] Load Completed!");var n=e._loadSignal,s=e._weakHandlers.concat();n.dispatch(e.LOAD_COMPLETE,i),e._queueLoadedSignal.dispatch(i),e.removeWeakHandlers(s)},e.handleFileProgress=function(t){var i=e._loadSignal;i.dispatch(e.FILE_PROGRESS,t),e._fileProgressSignal.dispatch(t)},e.handleOverallProgress=function(t){var i=e._loadSignal;i.dispatch(e.LOAD_PROGRESS,t),e._queueProgressSignal.dispatch(t)},e.handleFileError=function(t){var i=e._loadSignal;i.dispatch(e.FILE_ERROR,t),e._fileErrorSignal.dispatch(t)},e.handleLoaderError=function(t){var i=e._loadSignal;i.dispatch(e.LOAD_ERROR,t),e._queueErrorSignal.dispatch(t)},e}();e.LOAD_INITIALIZE=0,e.LOAD_STARTED=1,e.LOAD_PROGRESS=2,e.LOAD_COMPLETE=3,e.LOAD_ERROR=4,e.FILE_STARTED=5,e.FILE_PROGRESS=6,e.FILE_LOADED=7,e.FILE_ERROR=9,e._assetList={},e._weakHandlers=[],e._loadQueue=null,e._loadSignal=null,e._fileStartedSignal=null,e._fileProgressSignal=null,e._fileLoadedSignal=null,e._fileErrorSignal=null,e._queueStartedSignal=null,e._queueProgressSignal=null,e._queueLoadedSignal=null,e._queueErrorSignal=null,e._busy=!1,t.DataLoad=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(t){}return t._setup=function(){t._checkBrowser(),t._checkPlatform(),t._checkDevice()},t._checkPlatform=function(){var e=navigator.userAgent;/Linux/.test(e)&&(t.platformName="Linux",t.isLinux=!0),/Android/.test(e)&&(t.platformName="Android",t.isAndroid=!0),/CrOS/.test(e)&&(t.platformName="ChromeOS",t.isChromeOS=!0),/iP[ao]d|iPhone/i.test(e)&&(t.platformName="iOS",t.isIOS=!0),/Mac OS/.test(e)&&(t.platformName="Mac",t.isMacOS=!0),/Windows/.test(e)&&(t.platformName="Windows",t.isWindows=!0),(t.isWindows||t.isMacOS||t.isLinux)&&(t.isDesktop=!0),(t.isAndroid||t.isIOS||t.isWebApp)&&(t.isMobile=!0)},t._checkDevice=function(){t.pixelRatio=window.devicePixelRatio||1,t.colorDepth=window.screen.colorDepth,t.isMobile?(t.screenWidth=window.screen.width*t.pixelRatio,t.screenHeight=window.screen.height*t.pixelRatio):(t.screenWidth=window.screen.width,t.screenHeight=window.screen.height)},t._checkBrowser=function(){var e=navigator.userAgent;/Safari/.test(e)&&(t.browserName="Safari",t.isSafari=!0,t.browserVersion=-1!=e.indexOf("Version")?e.substring(e.indexOf("Version")+8):e.substring(e.indexOf("Safari")+7)),/Mobile(.*)Safari/.test(e)&&(t.browserName="MobileSafari",t.isSafari=!0,t.browserVersion=-1!=e.indexOf("Version")?e.substring(e.indexOf("Version")+8):e.substring(e.indexOf("Safari")+7)),/Chrome/.test(e)&&(t.browserName="Chrome",t.isChrome=!0,t.browserVersion=e.substring(e.indexOf("Chrome")+7,e.indexOf(" Safari")||null)),/Firefox/.test(e)&&(t.browserName="Firefox",t.isFirefox=!0,t.browserVersion=e.substring(e.indexOf("Firefox")+8)),/MSIE (\d+\.\d+);/.test(e)&&(t.browserName="MSIE",t.isIE=!0,t.browserVersion=e.substring(e.indexOf("MSIE")+5)),/Edge/.test(e)&&(t.browserName="MSEdge",t.isEdge=!0,t.browserVersion=e.substring(e.indexOf("Edge")+5)),navigator.standalone&&(t.browserName="WebApp",t.isWebApp=!0),navigator.isCocoonJS&&(t.browserName="CocoonJS",t.isCocoonJS=!0),t.url=window.location.href,t.queryString=window.location.search,t.host=window.location.hostname,t.path=window.location.pathname,t.port=window.location.port;var i=t.browserVersion.split(".");switch(i.length){case 1:t.browserDetails.major=parseInt(i[0]);break;case 2:t.browserDetails.major=parseInt(i[0]),t.browserDetails.minor=parseInt(i[1]);break;case 3:t.browserDetails.major=parseInt(i[0]),t.browserDetails.minor=parseInt(i[1]),t.browserDetails.build=parseInt(i[2]);break;case 4:t.browserDetails.major=parseInt(i[0]),t.browserDetails.minor=parseInt(i[1]),t.browserDetails.build=parseInt(i[2]),t.browserDetails.revision=parseInt(i[3])}},t.getURLParameterByName=function(e,i){void 0===i&&(i=!1),null===i&&(i=!0);var n=new RegExp("[?&]"+e+"=([^&]*)").exec(t.queryString);return i?n&&decodeURIComponent(n[1].replace(/\/+/g,"")):n&&decodeURIComponent(n[1])},t}();e.isDesktop=!1,e.isMobile=!1,e.isIOS=!1,e.isAndroid=!1,e.isChromeOS=!1,e.isMacOS=!1,e.isWindows=!1,e.isLinux=!1,e.platformName="",e.pixelRatio=1,e.colorDepth=-1,e.screenWidth=-1,e.screenHeight=-1,e.isChrome=!1,e.isFirefox=!1,e.isIE=!1,e.isEdge=!1,e.isSafari=!1,e.isWebApp=!1,e.isCocoonJS=!1,e.browserVersion="",e.browserName="",e.browserDetails={},e.url="",e.host="",e.path="",e.port="",e.queryString="",t.Environment=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(t,e){this.id=t,this.startParams=e,this.setup(e)}return t.prototype.setup=function(t){},t.prototype.reset=function(){this.setup(this.startParams)},t.prototype.destroy=function(){this.startParams=null},t}();t.Item=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function e(){}return e.output=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t.LOGGING){var n=[];n.push(":[LOG]:");for(var s=0;s<e.length;s++)n.push(e[s]);console.log.apply(console,n)}},e.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t.LOGGING){var n=[];n.push(":[ERROR]:");for(var s=0;s<e.length;s++)n.push(e[s]);console.error.apply(console,n)}},e}();t.Log=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(t,e,i,n,s){void 0===s&&(s=0),this.active=!0,this.params=null,this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this.priority=s||0}return t.prototype.execute=function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},t.prototype.detach=function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},t.prototype.isBound=function(){return!!this._signal&&!!this._listener},t.prototype.isOnce=function(){return this._isOnce},t.prototype.getListener=function(){return this._listener},t.prototype.getSignal=function(){return this._signal},t.prototype._destroy=function(){delete this._signal,delete this._listener,delete this.context},t.prototype.toString=function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"},t}();t.SignalBinding=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function e(){this._bindings=[],this._prevParams=null,this.memorize=!1,this._shouldPropagate=!0,this.active=!0}return e.prototype.validateListener=function(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))},e.prototype._registerListener=function(e,i,n,s){var r,a=this._indexOfListener(e,n);if(-1!==a){if(r=this._bindings[a],r.isOnce()!==i)throw new Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else r=new t.SignalBinding(this,e,i,n,s),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},e.prototype._addBinding=function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t.priority<=this._bindings[e].priority);this._bindings.splice(e+1,0,t)},e.prototype._indexOfListener=function(t,e){for(var i,n=this._bindings.length;n--;)if(i=this._bindings[n],i.getListener()===t&&i.context===e)return n;return-1},e.prototype.has=function(t,e){return-1!==this._indexOfListener(t,e)},e.prototype.add=function(t,e,i){return void 0===i&&(i=0),this.validateListener(t,"add"),this._registerListener(t,!1,e,i)},e.prototype.addOnce=function(t,e,i){return void 0===i&&(i=0),this.validateListener(t,"addOnce"),this._registerListener(t,!0,e,i)},e.prototype.remove=function(t,e){this.validateListener(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},e.prototype.removeAll=function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},e.prototype.getNumListeners=function(){return this._bindings.length},e.prototype.halt=function(){this._shouldPropagate=!1},e.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.active){var i,n=this._bindings.length;if(this.memorize&&(this._prevParams=t),n){i=this._bindings.slice(0),this._shouldPropagate=!0;do n--;while(i[n]&&this._shouldPropagate&&i[n].execute(t)!==!1)}}},e.prototype.forget=function(){this._prevParams=null},e.prototype.dispose=function(){this.removeAll(),delete this._bindings,delete this._prevParams},e.prototype.toString=function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"},e}();e.VERSION="1.0.0",t.Signal=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.startup=function(t){this._started=!0,this._startupParams=t},t.prototype.shutdown=function(){this._started=!1},t.prototype.update=function(t,e){},t.prototype.fixedUpdate=function(t,e){},t}();t.System=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"aspect",{get:function(){return this.width/this.height},enumerable:!0,configurable:!0}),i.prototype.clear=function(){t.Database.prototype.clear.call(this)},i.prototype.destroy=function(){t.Database.prototype.destroy.call(this)},i.prototype.initDisplay=function(e){if(!e)return void t.Log.error("[View3D] No initialization params specified");if(this.viewAngle=e.viewAngle||this.viewAngle,this.near=e.near||this.near,this.far=e.far||this.far,this._resize=e.resize,this._scene=this._scene||new THREE.Scene,this._renderer=new THREE.WebGLRenderer,this._camera=new THREE.PerspectiveCamera(this.viewAngle,this.aspect,this.near,this.far),this._scene.add(this._camera),this._camera.lookAt(this._scene.position),e.container){var i=document.getElementById(e.container);i?i.appendChild(this._renderer.domElement):t.Log.error("[View3D] Container ID",e.container,"doesn't exist")}if(this._camera.position.x=e.cameraX||500,this._camera.position.y=e.cameraY||500,this._camera.position.z=e.cameraZ||500,this._camera.lookAt(this._scene.position),this._renderer.setClearColor(e.rendererColor||8947848),this._renderer.setSize(this.width,this.height),e.addAxis){var n=new THREE.AxisHelper(20);this._scene.add(n)}if(e.debugControls){new THREE.OrbitControls(this._camera);if(t.GUI){var s=t.GUI.addFolder("Viewport3D"),r=s.addFolder("camera");r.add(this._camera.position,"x",-1e3,1e3).listen(),r.add(this._camera.position,"y",-1e3,1e3).listen(),r.add(this._camera.position,"z",-1e3,1e3).listen()}}e.resize&&t.Window.resizeSignal.add(this.onResize,this),this._view=document.createElement("canvas"),this._view.width=this.width,this._view.height=this.height,this._context2d=this._view.getContext("2d")},i.prototype.append=function(e){if(e){var i=document.getElementById(e);i?i.appendChild(this._renderer.domElement):t.Log.error("[Viewport3D] Container ID",e,"doesn't exist")}else document.body.appendChild(this._renderer.domElement)},i.prototype.render=function(){this._renderer.render(this._scene,this._camera)},i.prototype.update=function(){},i.prototype.onResize=function(){},i}(t.Database);t.View3D=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"orientation",{get:function(){return window.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isLandscape",{get:function(){return window.innerWidth>window.innerHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPortrait",{get:function(){return window.innerHeight>window.innerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"width",{get:function(){return document.documentElement.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"height",{get:function(){return document.documentElement.clientHeight},enumerable:!0,configurable:!0}),e._onResize=function(i){t.Log.output("[Window] onResize!"),e.resizeSignal.dispatch(i)},e._onWindowLoad=function(i){t.Log.output("[Window] Window loaded:","w:",e.width,"h:",e.height)},e._setup=function(){window.addEventListener("resize",e._onResize),window.addEventListener("load",e._onWindowLoad)},e}();e.resizeSignal=new t.Signal,t.Window=e}(Animyst||(Animyst={})),Animyst.Window._setup();var Animyst;!function(t){t.LOGGING=!0,t.DEBUG=!0,t.MAJOR=0,t.MINOR=0,t.BUILD=0,t.DATA="",t.VERSION=t.MAJOR+"."+t.MINOR+"."+t.BUILD}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(){}return t}();t.Sound=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.stage=t,n.renderer=i,n.width=i.view.width,n.height=i.view.height,n._init(),n}return __extends(i,e),i.prototype._init=function(){this.image=this.renderer.view;var e=new PIXI.Graphics;e.lineStyle(2,16711935,1),e.beginFill(16711867,.25),e.drawCircle(this.width/2,this.height/2,100),e.endFill();var i=PIXI.Texture.fromCanvas(t.DataLoad.getAsset("samusftilt")),n=new PIXI.Sprite(i);this.stage.addChild(n),this.stage.addChild(e),this.invalidate(),this.update()},i.prototype.invalidate=function(){this.shouldUpdate=!0},i.prototype.update=function(){this.shouldUpdate&&(this.renderer.render(this.stage),this.needsUpdate=!0,this.shouldUpdate=!1)},i}(THREE.Texture);t.PIXITexture=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.playTime=0,i.time=0,i.currentFrame=0,i.currentFrameID="",i.sprite=null,i.renderWidth=0,i.renderHeight=0,i.sourceFile="",i.timePassed=0,i.addSheet(e),i}return __extends(e,t),e.prototype._initSprite=function(t){this.stage=new PIXI.Container,this.renderer=PIXI.autoDetectRenderer(256,256,{transparent:!0}),this.sprite=new PIXI.Sprite(PIXI.Texture.fromFrame(t)),this.image=this.renderer.view,this.stage.addChild(this.sprite),this.renderer.render(this.stage),this.needsUpdate=!0},e.prototype.addSheet=function(t){this.atlas=t,this.frames=[];for(var e in t.frames){var i=t.frames[e];i.frame.w>this.renderWidth&&(this.renderWidth=i.frame.w%2==0?i.frame.w:i.frame.w+1),i.frame.h>this.renderHeight&&(this.renderHeight=i.frame.h%2==0?i.frame.h:i.frame.h+1),this.frames.push(e)}this.sprite||(this._initSprite(this.frames[0]),this.currentFrameID=this.frames[0],this.currentFrame=0)},e.prototype.showFrame=function(t){if(!(this.frames.length<=0)){t||(t=this.currentFrame||0);var e;"string"==typeof t?e=t:"number"==typeof t&&(e=this.frames[t]),this.sprite.setTexture(PIXI.Texture.fromFrame(e)),this.renderer.render(this.stage),this.needsUpdate=!0}},e.prototype.play=function(t,e){this.frames.length<=0||(this.playing=!0,this.loop=e,this.playTime=t,this.time=0)},e.prototype.stop=function(){this.playing=!1,this.timePassed=0},e.prototype.animate=function(t,e){this.playing&&(this.time>=this.playTime?this.loop?this.time=0:this.playing=!1:(this.time+=t,this.currentFrame=Math.round(this.time/this.playTime*(this.frames.length-1)),this.currentFrame>=this.frames.length&&(this.currentFrame=this.frames.length-1),this.showFrame()))},e}(THREE.Texture);t.SpriteSheetTexture=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.inputData=t,i}return __extends(i,e),i.prototype.startup=function(e){var i=e.element,n=e.tool;this.keyboardSettings=e.keyboardSettings,n&&(n.onKeyUp=this.onKeyUp.bind(this),n.onKeyDown=this.onKeyDown.bind(this),n.onMouseDown=this.onMouseDown.bind(this),n.onMouseUp=this.onMouseUp.bind(this),n.onMouseDrag=this.onMouseDrag.bind(this),n.onMouseMove=this.onMouseMove.bind(this)),i&&(i.addEventListener("touchstart",this.onTouchStart.bind(this)),i.addEventListener("touchmove",this.onTouchMove.bind(this)),i.addEventListener("touchend",this.onTouchRelease.bind(this)),i.addEventListener("touchenter",this.onTouchEnter.bind(this)),i.addEventListener("touchleave",this.onTouchLeave.bind(this)),i.addEventListener("mousedown",this.onMouseDown.bind(this)),i.addEventListener("mouseup",this.onMouseUp.bind(this)),i.addEventListener("mousemove",this.onMouseMove.bind(this)),i.addEventListener("mouseenter",this.onMouseEnter.bind(this)),i.addEventListener("mouseleave",this.onMouseLeave.bind(this)),i.addEventListener("keydown",this.onKeyDown.bind(this)),i.addEventListener("keyup",this.onKeyUp.bind(this))),t.System.prototype.startup.call(this,e)},i.prototype.shutdown=function(){this.inputData=null,t.System.prototype.shutdown.call(this)},i.prototype.update=function(t,e){this.inputData.onTick(t)},i.prototype.onTouchStart=function(e){t.LOGGING&&console.log("[Input] Touch Start!"),this.handleTouchInput(i.TOUCH_START,e)},i.prototype.onTouchMove=function(e){t.LOGGING&&console.log("[Input] Touch Move!"),this.handleTouchInput(i.TOUCH_MOVE,e)},i.prototype.onTouchRelease=function(e){t.LOGGING&&console.log("[Input] Touch Release!"),this.handleTouchInput(i.TOUCH_RELEASE,e)},i.prototype.onTouchEnter=function(e){t.LOGGING&&console.log("[Input] Touch Enter!"),this.handleTouchInput(i.TOUCH_ENTER,e)},i.prototype.onTouchLeave=function(e){t.LOGGING&&console.log("[Input] Touch Leave!"),this.handleTouchInput(i.TOUCH_LEAVE,e)},i.prototype.onClick=function(e){t.LOGGING&&console.log("[Input] Mouse Click!"),this.handleMouseInput(i.MOUSE_CLICK,e)},i.prototype.onMouseDown=function(e){t.LOGGING&&console.log("[Input] Mouse Down!"),this.handleMouseInput(i.MOUSE_DOWN,e)},i.prototype.onMouseDrag=function(e){t.LOGGING&&console.log("[Input] Mouse Drag!"),this.handleMouseInput(i.MOUSE_DRAG,e)},i.prototype.onMouseMove=function(e){t.LOGGING&&console.log("[Input] Mouse Move!"),this.handleMouseInput(i.MOUSE_MOVE,e)},i.prototype.onMouseUp=function(e){t.LOGGING&&console.log("[Input] Mouse Up!"),this.handleMouseInput(i.MOUSE_UP,e)},i.prototype.onMouseEnter=function(e){t.LOGGING&&console.log("[Input] Mouse Enter!"),this.handleMouseInput(i.MOUSE_ENTER,e)},i.prototype.onMouseLeave=function(e){t.LOGGING&&console.log("[Input] Mouse Leave!"),this.handleMouseInput(i.MOUSE_LEAVE,e)},i.prototype.onKeyUp=function(e){t.LOGGING&&console.log("[Input] Released Key:",e.key||t.InputData.KEY_NAMES[e.keyCode]),this.keyboardSettings.allowDefault[e.key||t.InputData.KEY_NAMES[e.keyCode]]||e.preventDefault(),this.handleKeyInput(i.KEY_UP,e.keyCode||t.InputData.KEY_CODES[e.key])},i.prototype.onKeyDown=function(e){t.LOGGING&&console.log("[Input] Pressed Key:",e.key||t.InputData.KEY_NAMES[e.keyCode]),this.keyboardSettings.allowDefault[e.key||t.InputData.KEY_NAMES[e.keyCode]]||e.preventDefault(),this.handleKeyInput(i.KEY_DOWN,e.keyCode||t.InputData.KEY_CODES[e.key])},i.prototype.handleMouseInput=function(t,e){var n;t!=i.MOUSE_DOWN&&t!=i.MOUSE_DRAG||(n=!0),t!=i.MOUSE_UP&&t!=i.MOUSE_LEAVE||(n=!1),this.inputData.setMouseInput(e,n)},i.prototype.handleKeyInput=function(t,e){this.inputData.setKeyInput(e,t==i.KEY_DOWN)},i.prototype.handleTouchInput=function(t,e){switch(t){case i.TOUCH_START:this.inputData.addTouches(e.changedTouches);break;case i.TOUCH_MOVE:break;case i.TOUCH_RELEASE:this.inputData.removeTouches(e.touches);break;case i.TOUCH_ENTER:break;case i.TOUCH_LEAVE:}this.inputData.updateTouches(e.changedTouches)},i}(t.System);e.KEY_DOWN=0,e.KEY_UP=1,e.TOUCH_START=0,e.TOUCH_MOVE=1,e.TOUCH_RELEASE=2,e.TOUCH_ENTER=3,e.TOUCH_LEAVE=4,e.MOUSE_DOWN=5,e.MOUSE_UP=6,e.MOUSE_DRAG=7,e.MOUSE_MOVE=8,e.MOUSE_ENTER=9,e.MOUSE_LEAVE=10,e.MOUSE_CLICK=11,t.Input=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.map={},t.touches=[],t.touchHistory=[],t.mouse={},t.mouseHistory=[],t.totalTouchCount=0,t.time=0,t}return __extends(i,e),i.prototype.clear=function(){this.map={},this.touches=[],this.touchHistory=[],this.totalTouchCount=0,e.prototype.clear.call(this)},i.prototype.destroy=function(){this.map=null,this.touches=null,this.touchHistory=null,this.totalTouchCount=0,e.prototype.destroy.call(this)},i.prototype.onTick=function(t){this.time+=t,this.mouse.down&&(this.mouse.clickTime+=t);for(var e in this.map){var i=this.map[e];i.active&&(i.time=(i.time||0)+t)}for(var n=0;n<this.touches.length;n++){var s=this.touches[n];s.time+=t}},i.prototype.isKeyDown=function(t){var e=i.KEY_CODES[t];return!(!this.map[e]||!this.map[e].active);
},i.prototype.setKeyInput=function(t,e){var n,s=this.map[t]||{};e&&!s.active&&(s.time=0,n=i.KEY_ACTIVE),!e&&s.active&&(s.lastInput={},s.lastInput.endTime=this.time,s.lastInput.duration=s.time,s.lastInput.startTime=this.time-s.time,s.time=0,n=i.KEY_INACTIVE),s.active=e===!0,this.map[t]||(this.map[t]=s),n&&this.signal.dispatch(i.KEY,n,s)},i.prototype.setMouseInput=function(e,n){this.touches.length>0&&n&&(n=!1),"boolean"!=typeof n&&(n=this.mouse.down);for(var s=this.mouse.down&&!n?this.mouse.lastClick||{}:null,r=!this.mouse.down&&n?{}:null,a=i.MOUSE_MOVE,o=0;o<i.MOUSE_PROPERTIES.length;o++){var h=i.MOUSE_PROPERTIES[o];e[h]&&(this.mouse[h]=e[h],s&&(s[h]=e[h]),r&&(r[h]=e[h]))}r&&(t.LOGGING&&console.log("[InputData] Click Start!"),this.mouse.clickStart=r,this.mouse.clickTime=0,a=i.MOUSE_DOWN),s&&(t.LOGGING&&console.log("[InputData] Click Ended!",this.mouse.clickTime),s.clickStart=this.mouse.clickStart,s.clickTime=this.mouse.clickTime,this.mouse.clickStart=null,this.mouse.lastClick=s,a=i.MOUSE_UP),this.mouse.down=n,this.signal.dispatch(i.MOUSE,a,this.mouse)},i.prototype.getTouches=function(){return this.touches.concat()},i.prototype.addTouches=function(e){for(var n=0;n<e.length;n++){for(var s=e[n],r=!0,a=0;a<this.touches.length;a++)if(this.touches[a].identifier==s.identifier){r=!1;break}if(r){for(var o={},h={},a=0;a<i.TOUCH_PROPERTIES.length;a++){var p=i.TOUCH_PROPERTIES[a];o[p]="object"!=typeof s[p]||"target"==p?s[p]:null,h[p]="object"!=typeof s[p]?s[p]:null}o.time=0,o.timestamp=this.time,o.startData=h,o.uid=o.identifier+""+this.totalTouchCount,this.touches.push(o),this.totalTouchCount++,t.LOGGING&&console.log("[InputData] Adding Touch:",o.uid),this.signal.dispatch(i.TOUCH,i.TOUCH_ADDED,o)}}},i.prototype.removeTouches=function(e){for(var n=this.touches.length-1;n>-1&&this.touches.length>0;n--){for(var s=this.touches[n],r=!0,a=0;a<e.length;a++)if(e[a].identifier==s.identifier){r=!1;break}r&&(t.LOGGING&&console.log("[InputData] Removing Touch:",s.uid),this.touchHistory.unshift(s),this.touches.splice(n,1),this.touchHistory.length>i.TOUCH_HISTORY_LIMIT&&this.touchHistory.pop(),this.signal.dispatch(i.TOUCH,i.TOUCH_REMOVED,s))}},i.prototype.updateTouches=function(e){for(var n=0;n<e.length;n++){for(var s,r=e[n],a=0;a<this.touches.length;a++)if(this.touches[a].identifier==r.identifier){s=this.touches[a];break}if(s){for(var a=0;a<i.TOUCH_PROPERTIES.length;a++){var o=i.TOUCH_PROPERTIES[a];s[o]=r[o]}t.LOGGING&&console.log("[InputData] Updated Touch:",s.uid,Math.round(s.pageX),Math.round(s.pageY),Math.round(s.screenX),Math.round(s.screenY),s.force||s.webkitForce),this.signal.dispatch(i.TOUCH,i.TOUCH_UPDATED,s)}}},i}(t.Database);e.TOUCH_HISTORY_LIMIT=12,e.TOUCH_PROPERTIES=["identifier","screenX","screenY","clientX","clientY","pageX","pageY","radiusX","radiusY","rotationAngle","force","webkitForce","target"],e.MOUSE_PROPERTIES=["clientX","clientY","screenX","screenY","type","point","lastPoint","downPoint","middlePoint","count","item","modifiers"],e.KEY_CODES={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,numlock:144,esc:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,"delete":46,clear:12,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,plus:107,minus:109,dot:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"=":187,",":188,".":190,"/":191,backslash:220,";":186,"'":222,"[":219,"]":221,"-":189,space:32,"~":192},e.KEY_NAMES=t.ObjectUtil.invert(e.KEY_CODES),e.MOUSE=0,e.TOUCH=1,e.KEY=2,e.TOUCH_ADDED=0,e.TOUCH_REMOVED=1,e.TOUCH_UPDATED=2,e.MOUSE_DOWN=0,e.MOUSE_UP=1,e.MOUSE_MOVE=2,e.KEY_ACTIVE=0,e.KEY_INACTIVE=1,t.InputData=e}(Animyst||(Animyst={}));var basics;!function(t){var e=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.bunny=PIXI.Sprite.fromImage("required/assets/basics/bunny.png"),this.bunny.anchor.set(.5),this.bunny.x=this.app.renderer.width/2,this.bunny.y=this.app.renderer.height/2,this.app.stage.addChild(this.bunny),this.app.ticker.add(function(e){t.bunny.rotation+=.1/e})}return t}();t.Basics=e;var i=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.sprite=PIXI.Sprite.fromImage("../../_assets/basics/bunny.png"),this.sprite.texture.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST,this.sprite.anchor.set(.5),this.sprite.x=this.app.renderer.width/2,this.sprite.y=this.app.renderer.height/2,this.sprite.interactive=!0,this.sprite.buttonMode=!0,this.sprite.on("pointerdown",function(){t.sprite.scale.x*=1.25,t.sprite.scale.y*=1.25}),this.app.stage.addChild(this.sprite)}return t}();t.Click=i;var n=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.container=new PIXI.Container,this.app.stage.addChild(this.container);for(var e=PIXI.Texture.fromImage("../../_assets/basics/bunny.png"),i=0;25>i;i++){var n=new PIXI.Sprite(e);n.anchor.set(.5),n.x=i%5*40,n.y=40*Math.floor(i/5),this.container.addChild(n)}this.container.x=this.app.renderer.width/2,this.container.y=this.app.renderer.height/2,this.container.pivot.x=this.container.width/2,this.container.pivot.y=this.container.height/2,this.app.ticker.add(function(e){t.container.rotation-=.01/e})}return t}();t.ContainerPivot=n;var s=function(){function t(){this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.container=new PIXI.Container,this.app.stage.addChild(this.container);for(var t=PIXI.Texture.fromImage("../../_assets/basics/bunny.png"),e=0;25>e;e++){var i=new PIXI.Sprite(t);i.anchor.set(.5),i.x=e%5*40,i.y=40*Math.floor(e/5),this.container.addChild(i)}this.container.x=this.app.renderer.width/2,this.container.y=this.app.renderer.height/2}return t}();t.Container=s;var r=function(t){function e(e){return t.call(this,null,e,{customUniform:{type:"1f",value:0}})||this}return __extends(e,t),e}(PIXI.Filter);t.CustomizedFilter=r;var a=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.background=PIXI.Sprite.fromImage("required/assets/bkg-grass.jpg"),this.background.width=this.app.renderer.width,this.background.height=this.app.renderer.height,this.app.stage.addChild(this.background),this.app.stop(),PIXI.loader.add("shader","_assets/basics/shader.frag").load(function(e,i){t.filter=new PIXI.Filter(null,i.shader.data),t.background.filters=[t.filter],t.app.start(),t.app.ticker.add(function(e){t.filter.uniforms.customUniform+=.04/e})})}return t}();t.CustomFilter=a;var o=function(){function t(){this.app=new PIXI.Application(800,600,{antialias:!0}),document.body.appendChild(this.app.view);var t=new PIXI.Graphics;t.beginFill(16724736),t.lineStyle(4,16767232,1),t.moveTo(50,50),t.lineTo(250,50),t.lineTo(100,100),t.lineTo(50,50),t.endFill(),t.lineStyle(2,255,1),t.beginFill(16740363,1),t.drawRect(50,250,120,120),t.lineStyle(2,16711935,1),t.beginFill(16711867,.25),t.drawRoundedRect(150,450,300,100,15),t.endFill(),t.lineStyle(0),t.beginFill(16776971,.5),t.drawCircle(470,90,60),t.endFill(),this.graphics=t,this.app.stage.addChild(this.graphics)}return t}();t.Graphics=o;var h=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.container=new PIXI.Container,this.app.stage.addChild(this.container);for(var e=PIXI.Texture.fromImage("required/assets/basics/bunny.png"),i=0;25>i;i++){var n=new PIXI.Sprite(e);n.x=i%5*30,n.y=30*Math.floor(i/5),n.rotation=Math.random()*(2*Math.PI),this.container.addChild(n)}var s=new PIXI.BaseRenderTexture(300,300,PIXI.SCALE_MODES.LINEAR,1),r=new PIXI.RenderTexture(s);this.sprite=new PIXI.Sprite(r),this.sprite.x=450,this.sprite.y=60,this.app.stage.addChild(this.sprite),this.container.x=100,this.container.y=60,this.app.ticker.add(function(e){t.app.renderer.render(t.container,r)})}return t}();t.RenderTexture=h;var p=function(){function t(){var t=this;PIXI.loader.add("required/assets/basics/fighter.json").load(function(e,i){for(var n=[],s=0;30>s;s++){var r=10>s?"0"+s:s;n.push(PIXI.Texture.fromFrame("rollSequence00"+r+".png"))}t.anim=new PIXI.extras.AnimatedSprite(n),t.anim.x=t.app.renderer.width/2,t.anim.y=t.app.renderer.height/2,t.anim.anchor.set(.5),t.anim.animationSpeed=.5,t.anim.play(),t.app.stage.addChild(t.anim),t.app.ticker.add(function(e){t.anim.rotation+=.01})})}return t}();t.SpriteSheet=p;var d=function(){function t(){this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.basicText=new PIXI.Text("Basic text in pixi"),this.basicText.x=30,this.basicText.y=90,this.app.stage.addChild(this.basicText);var t=new PIXI.TextStyle({fontFamily:"Arial",fontSize:36,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#fff0b5"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!0,wordWrapWidth:440});this.richText=new PIXI.Text("Rich text with a lot of options and across multiple lines",t),this.richText.x=30,this.richText.y=180,this.app.stage.addChild(this.richText)}return t}();t.Text=d;var u=function(){function t(){for(var t=this,e=45.9,i=0;25>i;i++)this.points.push(new PIXI.Point(i*e,0));this.strip=new PIXI.mesh.Rope(PIXI.Texture.fromImage("required/assets/snake.png"),this.points),this.strip.x=-40,this.strip.y=300,this.app.stage.addChild(this.strip),this.graphics=new PIXI.Graphics,this.graphics.x=this.strip.x,this.graphics.y=this.strip.y,this.app.stage.addChild(this.graphics),this.app.ticker.add(function(i){t.count+=.1;for(var n=0;n<t.points.length;n++)t.points[n].y=30*Math.sin(.5*n+t.count),t.points[n].x=n*e+20*Math.cos(.3*n+t.count);t.renderPoints()})}return t.prototype.renderPoints=function(){this.graphics.clear(),this.graphics.lineStyle(2,16761538),this.graphics.moveTo(this.points[0].x,this.points[0].y);for(var t=1;t<this.points.length;t++)this.graphics.lineTo(this.points[t].x,this.points[t].y);for(var t=1;t<this.points.length;t++)this.graphics.beginFill(16711714),this.graphics.drawCircle(this.points[t].x,this.points[t].y,10),this.graphics.endFill()},t}();t.TexturedMesh=u;var c=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view);var e=PIXI.Texture.fromImage("required/assets/p2.jpeg");this.tilingSprite=new PIXI.extras.TilingSprite(e,this.app.renderer.width,this.app.renderer.height),this.app.stage.addChild(this.tilingSprite),this.count=0,this.app.ticker.add(function(e){t.count+=.005,t.tilingSprite.tileScale.x=2+Math.sin(t.count),t.tilingSprite.tileScale.y=2+Math.cos(t.count),t.tilingSprite.tilePosition.x+=1,t.tilingSprite.tilePosition.y+=1})}return t}();t.TilingSprite=c;var l=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{transparent:!0}),document.body.appendChild(this.app.view),this.button=(new PIXI.Graphics).beginFill(0,.5).drawRoundedRect(0,0,100,100,10).endFill().beginFill(16777215).moveTo(36,30).lineTo(36,70).lineTo(70,50),this.button.x=(this.app.renderer.width-this.button.width)/2,this.button.y=(this.app.renderer.height-this.button.height)/2,this.button.interactive=!0,this.button.buttonMode=!0,this.app.stage.addChild(this.button),this.button.on("pointertap",function(){t.button.destroy();var e=PIXI.Texture.fromVideo("required/assets/testVideo.mp4");t.videoSprite=new PIXI.Sprite(e),t.videoSprite.width=t.app.renderer.width,t.videoSprite.height=t.app.renderer.height,t.app.stage.addChild(t.videoSprite)})}return t}();t.Video=l}(basics||(basics={}));var demos;!function(t){var e=function(){function t(){var t=this;this.app=new PIXI.Application,this.app.stage.interactive=!0,document.body.appendChild(this.app.view),this.bg=PIXI.Sprite.fromImage("required/assets/bkg.jpg"),this.app.stage.addChild(this.bg),this.cells=PIXI.Sprite.fromImage("required/assets/cells.png"),this.cells.scale.set(1.5),this.mask=PIXI.Sprite.fromImage("required/assets/flowerTop.png"),this.mask.anchor.set(.5),this.mask.x=310,this.mask.y=190,this.cells.mask=this.mask,this.app.stage.addChild(this.mask,this.cells),this.target=new PIXI.Point,this.reset(),this.app.ticker.add(function(e){t.mask.position.x+=.1*(t.target.x-t.mask.x),t.mask.position.y+=.1*(t.target.y-t.mask.y),Math.abs(t.mask.x-t.target.x)<1&&t.reset()})}return t.prototype.reset=function(){this.target.x=Math.floor(550*Math.random()),this.target.y=Math.floor(300*Math.random())},t}();t.AlphaMask=e;var i=function(){function t(){var t=this;this.app=new PIXI.Application,this.app.stop(),document.body.appendChild(this.app.view),PIXI.loader.add("spritesheet","required/assets/mc.json").load(function(){var e,i=[];for(e=0;26>e;e++){var n=PIXI.Texture.fromFrame("Explosion_Sequence_A "+(e+1)+".png");i.push(n)}for(e=0;50>e;e++){var s=new PIXI.extras.AnimatedSprite(i);s.x=Math.random()*t.app.renderer.width,s.y=Math.random()*t.app.renderer.height,s.anchor.set(.5),s.rotation=Math.random()*Math.PI,s.scale.set(.75+.5*Math.random()),s.gotoAndPlay(27*Math.random()),t.app.stage.addChild(s)}t.app.start()})}return t}();t.AnimatedSpriteDemo=i;var n=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),this.sprites=new PIXI.particles.ParticleContainer(1e4,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0}),this.app.stage.addChild(this.sprites),this.maggots=[];for(var e=this.app.renderer instanceof PIXI.WebGLRenderer?1e4:100,i=PIXI.Texture.fromImage("required/assets/tinyMaggot.png"),n=0;e>n;n++){var r=new s(i);r.tint=15258829*Math.random(),r.anchor.set(.5),r.scale.set(.8+.3*Math.random()),r.x=Math.random()*this.app.renderer.width,r.y=Math.random()*this.app.renderer.height,r.direction=Math.random()*Math.PI*2,r.turningSpeed=Math.random()-.8,r.speed=.2*(2+2*Math.random()),r.offset=100*Math.random(),this.maggots.push(r),this.sprites.addChild(r)}var a=100;this.dudeBounds=new PIXI.Rectangle(-a,-a,this.app.renderer.width+2*a,this.app.renderer.height+2*a),this.tick=0,this.app.ticker.add(function(){for(var e=0;e<t.maggots.length;e++){var i=t.maggots[e];i.scale.y=.95+.05*Math.sin(t.tick+i.offset),i.direction+=.01*i.turningSpeed,i.x+=Math.sin(i.direction)*(i.speed*i.scale.y),i.y+=Math.cos(i.direction)*(i.speed*i.scale.y),i.rotation=-i.direction+Math.PI,i.x<t.dudeBounds.x?i.x+=t.dudeBounds.width:i.x>t.dudeBounds.x+t.dudeBounds.width&&(i.x-=t.dudeBounds.width),i.y<t.dudeBounds.y?i.y+=t.dudeBounds.height:i.y>t.dudeBounds.y+t.dudeBounds.height&&(i.y-=t.dudeBounds.height)}t.tick+=.1})}return t}();t.Batch=n;var s=function(t){function e(e){var i=t.call(this,e)||this;return i.direction=0,i.speed=0,i.turningSpeed=0,i.offset=0,i}return __extends(e,t),e}(PIXI.Sprite);t.Dude=s;var r=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),this.background=PIXI.Sprite.fromImage("required/assets/BGrotate.jpg"),this.app.stage.addChild(this.background),this.dudeArray=[];for(var e=20,i=PIXI.Texture.fromImage("required/assets/flowerTop.png"),n=0;e>n;n++){var r=new s(i);r.anchor.set(.5),r.scale.set(.8+.3*Math.random()),r.x=Math.floor(Math.random()*this.app.renderer.width),r.y=Math.floor(Math.random()*this.app.renderer.height),r.blendMode=PIXI.BLEND_MODES.ADD,r.direction=Math.random()*Math.PI*2,r.turningSpeed=Math.random()-.8,r.speed=2+2*Math.random(),this.dudeArray.push(r),this.app.stage.addChild(r)}var a=100;this.dudeBounds=new PIXI.Rectangle(-a,-a,this.app.renderer.width+2*a,this.app.renderer.height+2*a),this.app.ticker.add(function(){for(var e=0;e<t.dudeArray.length;e++){var i=t.dudeArray[e];i.direction+=.01*i.turningSpeed,i.x+=Math.sin(i.direction)*i.speed,i.y+=Math.cos(i.direction)*i.speed,i.rotation=-i.direction-Math.PI/2,i.x<t.dudeBounds.x?i.x+=t.dudeBounds.width:i.x>t.dudeBounds.x+t.dudeBounds.width&&(i.x-=t.dudeBounds.width),i.y<t.dudeBounds.y?i.y+=t.dudeBounds.height:i.y>t.dudeBounds.y+t.dudeBounds.height&&(i.y-=t.dudeBounds.height)}})}return t}();t.BlendModes=r;var a=function(){function t(){var t=this;this.app=new PIXI.Application,this.app.stage.interactive=!0,document.body.appendChild(this.app.view),this.app.stop(),this.aliens=[];var e=["eggHead.png","flowerTop.png","helmlok.png","skully.png"];this.count=0,this.alienContainer=new PIXI.Container,this.alienContainer.x=400,this.alienContainer.y=300,this.app.stage.addChild(this.alienContainer),PIXI.loader.add("spritesheet","required/assets/monsters.json").load(function(){for(var i=0;100>i;i++){var n=e[i%4],s=PIXI.Sprite.fromFrame(n);s.tint=16777215*Math.random(),s.x=800*Math.random()-400,s.y=600*Math.random()-300,s.anchor.x=.5,s.anchor.y=.5,t.aliens.push(s),t.alienContainer.addChild(s)}t.app.start(),t.app.stage.on("pointerTap",function(e){t.alienContainer.cacheAsBitmap=!t.alienContainer.cacheAsBitmap}),t.app.ticker.add(function(){for(var e=0;100>e;e++){var i=t.aliens[e];i.rotation+=.1}t.count+=.01,t.alienContainer.scale.x=Math.sin(t.count),t.alienContainer.scale.y=Math.sin(t.count),t.alienContainer.rotation+=.01})})}return t}();t.CacheAsBitmap=a;var o=function(){function t(){this.app=new PIXI.Application(800,600,{backgroundColor:1087931}),document.body.appendChild(this.app.view);var t=PIXI.Texture.fromImage("required/assets/bunny.png");t.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST;for(var e=0;10>e;e++)this.createBunny(t,Math.floor(Math.random()*this.app.renderer.width),Math.floor(Math.random()*this.app.renderer.height))}return t.prototype.createBunny=function(t,e,i){var n=this,s=new PIXI.Sprite(t);s.interactive=!0,s.buttonMode=!0,s.anchor.set(.5),s.scale.set(3),s.on("pointerdown",function(t){n.data=t.data,s.alpha=.5,n.dragging=!0}).on("pointerup",function(t){n.data=null,s.alpha=.5,n.dragging=!1}).on("pointerupoutside",function(t){n.data=null,s.alpha=.5,n.dragging=!1}).on("pointermove",function(t){if(n.dragging){var e=n.data.getLocalPosition(s);s.x=e.x,s.y=e.y}}),s.x=e,s.y=i,this.app.stage.addChild(s)},t}();t.Dragging=o;var h=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{antialias:!0}),this.app.stage.interactive=!0,document.body.appendChild(this.app.view);var e=new PIXI.Graphics;e.beginFill(16724736),e.lineStyle(10,16767232,1),e.moveTo(50,50),e.lineTo(250,50),e.lineTo(100,100),e.lineTo(250,220),e.lineTo(50,220),e.lineTo(50,50),e.endFill(),e.lineStyle(10,16711680,.8),e.beginFill(16740363,1),e.moveTo(210,300),e.lineTo(450,320),e.lineTo(570,350),e.quadraticCurveTo(600,0,480,100),e.lineTo(330,120),e.lineTo(410,200),e.lineTo(210,300),e.endFill(),e.lineStyle(2,255,1),e.drawRect(50,250,100,100),e.lineStyle(0),e.beginFill(16776971,.5),e.drawCircle(470,200,100),e.endFill(),e.lineStyle(20,3407616),e.moveTo(30,30),e.lineTo(600,300),this.graphics=e,this.app.stage.addChild(this.graphics),this.thing=new PIXI.Graphics,this.thing.x=400,this.thing.y=300,this.app.stage.addChild(this.thing),this.count=0,this.app.stage.on("pointertap",function(){t.graphics.lineStyle(30*Math.random(),16777215*Math.random(),1),t.graphics.moveTo(800*Math.random(),600*Math.random()),t.graphics.bezierCurveTo(800*Math.random(),600*Math.random(),800*Math.random(),600*Math.random(),800*Math.random(),600*Math.random())}),this.app.ticker.add(function(){t.count+=.1,t.thing.clear(),t.thing.lineStyle(10,16711680,1),t.thing.beginFill(16776960,.5),t.thing.moveTo(-120+20*Math.sin(t.count),-100+20*Math.cos(t.count)),t.thing.lineTo(120+20*Math.cos(t.count),-100+20*Math.sin(t.count)),t.thing.lineTo(120+20*Math.sin(t.count),100+20*Math.cos(t.count)),t.thing.lineTo(-120+20*Math.cos(t.count),100+20*Math.sin(t.count)),t.thing.lineTo(-120+20*Math.sin(t.count),-100+20*Math.cos(t.count)),t.thing.rotation=.1*t.count})}return t}();t.GraphicsDemo=h;var p=function(){function t(){this.app=new PIXI.Application,document.body.appendChild(this.app.view);var t=PIXI.Sprite.fromImage("required/assets/button_test_BG.jpg");t.width=this.app.renderer.width,t.height=this.app.renderer.height,this.background=t,this.app.stage.addChild(this.background),this.buttons=[];for(var e=[175,75,655,75,410,325,150,465,685,445],i=PIXI.Texture.fromImage("../../_assets/button.png"),n=(PIXI.Texture.fromImage("../../_assets/buttonDown.png"),PIXI.Texture.fromImage("../../_assets/buttonOver.png"),0);5>n;n++){var s=new PIXI.Sprite(i);s.anchor.set(.5),s.x=e[2*n],s.y=e[2*n+1],s.interactive=!0,s.buttonMode=!0,s.on("pointerdown",function(){}).on("pointerup",function(){}).on("pointerupoutside",function(){}).on("pointerover",function(){}).on("pointerout",function(){}),this.app.stage.addChild(s),this.buttons.push(s)}this.buttons[0].scale.set(1.2),this.buttons[2].rotation=Math.PI/10,this.buttons[3].scale.set(.8),this.buttons[4].scale.set(.8,1.2),this.buttons[4].rotation=Math.PI}return t}();t.Interactivity=p;var d=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{antialias:!0}),this.app.stage.interactive=!0,document.body.appendChild(this.app.view),this.bg=PIXI.Sprite.fromImage("required/assets/BGrotate.jpg"),this.bg.anchor.set(.5),this.bg.x=this.app.renderer.width/2,this.bg.y=this.app.renderer.height/2,this.app.stage.addChild(this.bg),this.container=new PIXI.Container,this.container.x=this.app.renderer.width/2,this.container.y=this.app.renderer.height/2,this.app.stage.addChild(this.container),this.bgFront=PIXI.Sprite.fromImage("required/assets/SceneRotate.jpg"),this.bgFront.anchor.set(.5),this.light2=PIXI.Sprite.fromImage("required/assets/LightRotate2.png"),this.light2.anchor.set(.5),this.light1=PIXI.Sprite.fromImage("required/assets/LightRotate1.png"),this.light1.anchor.set(.5),this.panda=PIXI.Sprite.fromImage("required/assets/panda.png"),this.panda.anchor.set(.5),this.container.addChild(this.bgFront,this.light2,this.light1,this.panda),this.app.stage.addChild(this.container),this.thing=new PIXI.Graphics,this.app.stage.addChild(this.thing),this.thing.x=this.app.renderer.width/2,this.thing.y=this.app.renderer.height/2,this.thing.lineStyle(0),this.container.mask=this.thing,this.count=0,this.app.stage.on("pointertap",function(){t.container.mask?t.container.mask=null:t.container.mask=t.thing}),this.app.ticker.add(function(){t.bg.rotation+=.01,t.bgFront.rotation-=.01,t.light1.rotation+=.02,t.light2.rotation+=.01,t.panda.scale.x=1+.04*Math.sin(t.count),t.panda.scale.y=1+.04*Math.cos(t.count),t.count+=.1,t.thing.clear(),t.thing.beginFill(9160191,.4),t.thing.moveTo(-120+20*Math.sin(t.count),-100+20*Math.cos(t.count)),t.thing.lineTo(-320+20*Math.cos(t.count),100+20*Math.sin(t.count)),t.thing.lineTo(120+20*Math.cos(t.count),-100+20*Math.sin(t.count)),t.thing.lineTo(120+20*Math.sin(t.count),100+20*Math.cos(t.count)),t.thing.lineTo(-120+20*Math.cos(t.count),100+20*Math.sin(t.count)),t.thing.lineTo(-120+20*Math.sin(t.count),-300+20*Math.cos(t.count)),t.thing.lineTo(-320+20*Math.sin(t.count),-100+20*Math.cos(t.count)),t.thing.rotation=.1*t.count})}return t}();t.Masking=d;var u=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),this.renderTexture=PIXI.RenderTexture.create(this.app.renderer.width,this.app.renderer.height),this.renderTexture2=PIXI.RenderTexture.create(this.app.renderer.width,this.app.renderer.height),this.currentTexture=this.renderTexture,this.outputSprite=new PIXI.Sprite(this.currentTexture),this.outputSprite.x=400,this.outputSprite.y=300,this.outputSprite.anchor.set(.5),this.app.stage.addChild(this.outputSprite),this.stuffContainer=new PIXI.Container,this.stuffContainer.x=400,this.stuffContainer.y=300,this.app.stage.addChild(this.stuffContainer);var e=["required/assets/spinObj_01.png","required/assets/spinObj_02.png","required/assets/spinObj_03.png","required/assets/spinObj_04.png","required/assets/spinObj_05.png","required/assets/spinObj_06.png","required/assets/spinObj_07.png","required/assets/spinObj_08.png"];this.items=[];for(var i=0;20>i;i++){var n=PIXI.Sprite.fromImage(e[i%e.length]);n.x=400*Math.random()-200,n.y=400*Math.random()-200,n.anchor.set(.5),this.stuffContainer.addChild(n),this.items.push(n)}this.count=0,this.app.ticker.add(function(){for(var e=0;e<t.items.length;e++){var i=t.items[e];i.rotation+=.1}t.count+=.01;var n=t.renderTexture;t.renderTexture=t.renderTexture2,t.renderTexture2=n,t.outputSprite.texture=t.renderTexture,t.stuffContainer.rotation-=.01,t.outputSprite.scale.set(1+.2*Math.sin(t.count)),t.app.renderer.render(t.app.stage,t.renderTexture2,!1)})}return t}();t.RenderTextureDemo=u;var c=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),this.count=0;var e=45.9;this.points=[];for(var i=0;20>i;i++)this.points.push(new PIXI.Point(i*e,0));this.strip=new PIXI.mesh.Rope(PIXI.Texture.fromImage("required/assets/snake.png"),this.points),this.strip.x=-459,this.snakeContainer=new PIXI.Container,this.snakeContainer.position.x=400,this.snakeContainer.position.y=300,this.snakeContainer.scale.set(800/1100),this.snakeContainer.addChild(this.strip),this.app.stage.addChild(this.snakeContainer),this.app.ticker.add(function(){t.count+=.1;for(var i=0;i<t.points.length;i++)t.points[i].y=30*Math.sin(.5*i+t.count),t.points[i].x=i*e+20*Math.cos(.3*i+t.count)})}return t}();t.StripDemo=c;var l=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),PIXI.loader.add("desyrel","required/assets/desyrel.xml").load(function(){t.bitmapFontText=new PIXI.extras.BitmapText("bitmap fonts are\n now supported!",{font:"35px Desyrel",align:"right"}),t.bitmapFontText.x=t.app.renderer.width-t.bitmapFontText.textWidth-20,t.bitmapFontText.y=20,t.app.stage.addChild(t.bitmapFontText)}),this.background=PIXI.Sprite.fromImage("required/assets/textDemoBG.jpg"),this.background.width=this.app.renderer.width,this.background.height=this.app.renderer.height,this.app.stage.addChild(this.background),this.textSample=new PIXI.Text("Pixi.js can has\n multiline text!",{fontFamily:"Snippet",fontSize:35,fill:"white",align:"left"}),this.textSample.position.set(20),this.spinningText=new PIXI.Text('I"m fun!',{fontWeight:"bold",fontSize:60,fontFamily:"Arial",fill:"#cc00ff",align:"center",stroke:"#FFFFFF",strokeThickness:6}),this.spinningText.anchor.set(.5),this.spinningText.x=this.app.renderer.width/2,this.spinningText.y=this.app.renderer.height/2,this.countingText=new PIXI.Text("COUNT 4Elet: 0",{fontWeight:"bold",fontStyle:"italic",fontSize:60,fontFamily:"Arvo",fill:"#3e1707",align:"center",stroke:"#a4410e",strokeThickness:7}),this.countingText.x=this.app.renderer.width/2,this.countingText.y=500,this.countingText.anchor.x=.5,this.app.stage.addChild(this.textSample,this.spinningText,this.countingText),this.count=0,this.app.ticker.add(function(){t.count+=.05,t.countingText.text="COUNT 4Elet: "+Math.floor(t.count),t.spinningText.rotation+=.03})}return t}();t.TextDemo=l;var g=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),this.bol=!1,PIXI.loader.add("flowerTop","required/assets/flowerTop.png"),PIXI.loader.load(function(e,i){t.texture=i.flowerTop.texture,t.init()})}return t.prototype.init=function(){for(var t=[this.texture],e=PIXI.GroupD8,i=1;16>i;i++){var n=e.isSwapWidthHeight(i)?this.texture.frame.width:this.texture.frame.height,s=e.isSwapWidthHeight(i)?this.texture.frame.height:this.texture.frame.width,r=this.texture.frame,a=new PIXI.Rectangle(this.texture.frame.x,this.texture.frame.y,s,n),o=a,h=void 0;i%2===0?h=new PIXI.Texture(this.texture.baseTexture,r,a,o,i):(h=new PIXI.Texture(this.texture.baseTexture,r,a,o,i-1),h.rotate++),t.push(h)}for(var p=this.app.renderer.width/16|0,d=this.app.renderer.height/8|0,u=this.app.renderer.width/4|0,c=this.app.renderer.height/5|0,l=0;16>l;l++){var g=new PIXI.Sprite(t[8>l?2*l:2*(l-8)+1]);g.scale.x=.5,g.scale.y=.5,g.x=p+u*(l%4),g.y=d+c*(l/4|0),this.app.stage.addChild(g);var f=new PIXI.Text("rotate = "+g.texture.rotate,{fontFamily:"Courier New",fontSize:"12px",fill:"white",align:"left"});f.x=g.x,f.y=g.y-20,this.app.stage.addChild(f)}},t}();t.TextureRotate=g;var f=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),this.bol=!1,this.texture=PIXI.Texture.fromImage("required/assets/flowerTop.png"),this.secondTexture=PIXI.Texture.fromImage("required/assets/eggHead.png"),this.dude=new PIXI.Sprite(this.texture),this.dude.anchor.set(.5),this.dude.x=this.app.renderer.width/2,this.dude.y=this.app.renderer.height/2,this.dude.interactive=!0,this.dude.buttonMode=!0,this.app.stage.addChild(this.dude),this.dude.on("pointertap",function(){t.bol=!t.bol,t.bol?t.dude.texture=t.secondTexture:t.dude.texture=t.texture}),this.app.ticker.add(function(){t.dude.rotation+=.1})}return t}();t.TextureSwap=f;var m=function(){function t(){var t=this;this.app=new PIXI.Application,document.body.appendChild(this.app.view),this.aliens=[];for(var e=20,i=PIXI.Texture.fromImage("required/assets/eggHead.png"),n=0;e>n;n++){var r=new s(i);r.anchor.set(.5),r.scale.set(.8+.3*Math.random()),r.x=Math.random()*this.app.renderer.width,r.y=Math.random()*this.app.renderer.height,r.tint=16777215*Math.random(),r.direction=Math.random()*Math.PI*2,r.turningSpeed=Math.random()-.8,r.speed=2+2*Math.random(),this.aliens.push(r),this.app.stage.addChild(r)}var a=100,o=new PIXI.Rectangle(-a,-a,this.app.renderer.width+2*a,this.app.renderer.height+2*a);this.app.ticker.add(function(){for(var e=0;e<t.aliens.length;e++){var i=t.aliens[e];i.direction+=.01*i.turningSpeed,i.x+=Math.sin(i.direction)*i.speed,i.y+=Math.cos(i.direction)*i.speed,i.rotation=-i.direction-Math.PI/2,i.x<o.x?i.x+=o.width:i.x>o.x+o.width&&(i.x-=o.width),i.y<o.y?i.y+=o.height:i.y>o.y+o.height&&(i.y-=o.height)}})}return t}();t.Tinting=m;var y=function(){function t(){var t=this;this.app=new PIXI.Application(800,600,{transparent:!0}),document.body.appendChild(this.app.view),this.bunny=PIXI.Sprite.fromImage("required/assets/bunny.png"),this.bunny.anchor.set(.5),this.bunny.x=this.app.renderer.width/2,this.bunny.y=this.app.renderer.height/2,this.app.stage.addChild(this.bunny),this.app.ticker.add(function(){t.bunny.rotation+=.1})}return t}();t.TransparentBackground=y}(demos||(demos={}));var filters;!function(t){var e=function(){function t(){var t=this;this.app=new PIXI.Application(800,600),document.body.appendChild(this.app.view),this.bg=PIXI.Sprite.fromImage("required/assets/depth_blur_BG.jpg"),this.bg.width=this.app.renderer.width,this.bg.height=this.app.renderer.height,this.app.stage.addChild(this.bg),this.littleDudes=PIXI.Sprite.fromImage("required/assets/depth_blur_dudes.jpg"),this.littleDudes.x=this.app.renderer.width/2-315,this.littleDudes.y=200,this.app.stage.addChild(this.littleDudes),this.littleRobot=PIXI.Sprite.fromImage("required/assets/depth_blur_moby.jpg"),this.littleRobot.x=this.app.renderer.width/2-200,this.littleRobot.y=100,this.app.stage.addChild(this.littleRobot),this.blurFilter1=new PIXI.filters.BlurFilter,this.blurFilter2=new PIXI.filters.BlurFilter,this.littleDudes.filters=[this.blurFilter1],this.littleRobot.filters=[this.blurFilter2],this.count=0,this.app.ticker.add(function(){t.count+=.005;var e=Math.cos(t.count),i=Math.sin(t.count);t.blurFilter1.blur=20*e,t.blurFilter2.blur=20*i})}return t}();t.BlurFilter=e;var i=function(){function t(){var t=this;this.onPointerMove=function(e){t.ring.visible=!0,t.displacementSprite.x=e.data.global.x-100,t.displacementSprite.y=e.data.global.y-t.displacementSprite.height/2,t.ring.x=e.data.global.x-25,t.ring.y=e.data.global.y},this.app=new PIXI.Application(800,600),this.app.stage.interactive=!0,document.body.appendChild(this.app.view),this.container=new PIXI.Container,this.app.stage.addChild(this.container);var e=100,i=new PIXI.Rectangle(-e,-e,this.app.renderer.width+2*e,this.app.renderer.height+2*e);
this.maggots=[];for(var s=0;20>s;s++){var r=new n;r.anchor.set(.5),this.container.addChild(r),r.direction=Math.random()*Math.PI*2,r.speed=1,r.turnSpeed=Math.random()-.8,r.position.x=Math.random()*i.width,r.position.y=Math.random()*i.height,r.scale.set(1+.3*Math.random()),r.original=r.scale.clone(),this.maggots.push(r)}this.displacementSprite=PIXI.Sprite.fromImage("required/assets/displace.png");var a=new PIXI.filters.DisplacementFilter(this.displacementSprite);this.app.stage.addChild(this.displacementSprite),this.container.filters=[a],a.scale.x=110,a.scale.y=110,this.ring=PIXI.Sprite.fromImage("required/assets/ring.png"),this.ring.anchor.set(.5),this.ring.visible=!1,this.app.stage.addChild(this.ring),this.bg=PIXI.Sprite.fromImage("required/assets/bkg-grass.jpg"),this.bg.width=this.app.renderer.width,this.bg.height=this.app.renderer.height,this.bg.alpha=.4,this.container.addChild(this.bg),this.count=0,this.app.stage.on("mousemove",this.onPointerMove).on("touchmove",this.onPointerMove),this.app.ticker.add(function(){t.count+=.05;for(var e=0;e<t.maggots.length;e++){var n=t.maggots[e];n.direction+=.01*n.turnSpeed,n.x+=Math.sin(n.direction)*n.speed,n.y+=Math.cos(n.direction)*n.speed,n.rotation=-n.direction-Math.PI/2,n.scale.x=n.original.x+.2*Math.sin(t.count),n.x<i.x?n.x+=i.width:n.x>i.x+i.width&&(n.x-=i.width),n.y<i.y?n.y+=i.height:n.y>i.y+i.height&&(n.y-=i.height)}})}return t}();t.DisplacementMap=i;var n=function(t){function e(){var e=t.call(this,PIXI.Texture.fromImage("../../_assets/maggot.png"))||this;return e.direction=0,e.speed=0,e.turnSpeed=0,e.original=new PIXI.Point,e}return __extends(e,t),e}(PIXI.Sprite);t.DisplacementMapDude=n;var s=function(){function t(){var t=this;this.app=new PIXI.Application,this.app.stage.interactive=!0,document.body.appendChild(this.app.view),this.bg=PIXI.Sprite.fromImage("required/assets/BGrotate.jpg"),this.bg.anchor.set(.5),this.bg.x=this.app.renderer.width/2,this.bg.y=this.app.renderer.height/2,this.filter=new PIXI.filters.ColorMatrixFilter,this.container=new PIXI.Container,this.container.position.x=this.app.renderer.width/2,this.container.position.y=this.app.renderer.height/2,this.app.stage.addChild(this.container),this.bgFront=PIXI.Sprite.fromImage("required/assets/SceneRotate.jpg"),this.bgFront.anchor.set(.5),this.container.addChild(this.bgFront),this.light2=PIXI.Sprite.fromImage("required/assets/LightRotate2.png"),this.light2.anchor.set(.5),this.container.addChild(this.light2),this.light1=PIXI.Sprite.fromImage("../../_assets/LightRotate1.png"),this.light1.anchor.set(.5),this.container.addChild(this.light1),this.panda=PIXI.Sprite.fromImage("required/assets/panda.png"),this.panda.anchor.set(.5),this.container.addChild(this.panda),this.app.stage.filters=[this.filter],this.count=0,this.enabled=!0,this.app.stage.on("pointertap",function(){t.enabled=!t.enabled,t.app.stage.filters=t.enabled?[t.filter]:null}),this.help=new PIXI.Text("Click or tap to turn filters on / off.",{fontFamily:"Arial",fontSize:12,fontWeight:"bold",fill:"white"}),this.help.y=this.app.renderer.height-25,this.help.x=10,this.app.stage.addChild(this.help),this.app.ticker.add(function(e){t.bg.rotation+=.01,t.bgFront.rotation-=.01,t.light1.rotation+=.02,t.light2.rotation+=.01,t.panda.scale.x=1+.04*Math.sin(t.count),t.panda.scale.y=1+.04*Math.cos(t.count),t.count+=.1;var i=t.filter.matrix;i[1]=3*Math.sin(t.count),i[2]=Math.cos(t.count),i[3]=1.5*Math.cos(t.count),i[4]=2*Math.sin(t.count/3),i[5]=Math.sin(t.count/2),i[6]=Math.sin(t.count/4)})}return t}();t.Filter=s}(filters||(filters={}));var Animyst;!function(t){var e=function(){function t(t,e){void 0===e&&(e=60),this.time=0,this.playTime=0,this.currentFrame=0,this.id=t,this.animations={},this.spritesheets={},this.framerate=e}return t.prototype.addSheet=function(t){this.spritesheets[t.name]=t},t.prototype.getSheet=function(t){return this.spritesheets[t]},t.prototype.addAnimation=function(t,e,i,n){void 0===n&&(n={});var s={},r=this.getSheet(i);s.name=t,s.prefix=e,s.sheetID=i,s.useFrames=n.useFrames||!1,s.frames=r.getFrames(s.prefix),s.currentFrameIndex=0,s.totalFrames=s.frames.length,s.duration=n.duration||s.useFrames?s.totalFrames*(this.framerate/60):1e3/this.framerate*s.totalFrames,s.loop=n.loop||!1,s.repeat=n.repeat||0,s.elapsed=0,s.framecount=0,this.animations[s.name]=s},t.prototype.getAnimation=function(t){return this.animations[t]},t.prototype.play=function(t){if(this.currentAnim!=t){this.getAnimation(t);this.currentAnim=t,this.playing=!0}},t.prototype.stop=function(){},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.setIdle=function(t){},t.prototype.animate=function(t){if(void 0===t&&(t=0),this.playing){var e=this.getAnimation(this.currentAnim);e.useFrames}},t}();t.SpriteSheetAnimation=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(t){function e(e,i){var n=t.call(this)||this;return n.name=e,n.data=i,n.parse(),n}return __extends(e,t),e.prototype.parse=function(){for(var t in this.data.frames)this.addFrame(t,this.data.frames[t])},e.prototype.addFrame=function(t,e){var n=new i(t,e);this.create(n,t,e)},e.prototype.getFrame=function(t){return this.getItem(t)},e.prototype.getFrames=function(t){if(!this.hasCategory(t)){var e={};e.framePrefix=t,this.addCategory(t,function(t){return 0==t.id.indexOf(this.framePrefix)},i,e)}var n=this.getItemsInCategory(t);return n.sort(this._sortCaseInsensitive),n},e.prototype._sortCaseInsensitive=function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0},e}(t.Database);t.SpriteSheetData=e;var i=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype.setup=function(e){this.frame=e.frame,this.rotated=e.rotated,this.trimmed=e.trimmed,this.spriteSourceSize=e.spriteSourceSize,this.sourceSize=e.sourceSize,this.pivot=e.pivot,t.prototype.setup.call(this,e)},e}(t.Item);t.FrameData=i}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.setup=function(){t.Log.output("[CoreProcess] Core Process Initialize"),e.prototype.setup.call(this),this._inputData=new t.InputData;var n=this.appScope.config,s=new t.Input(this._inputData);s.startup({element:document.body,keyboardSettings:n.settings.keyboard}),this.addSystem("input",s),this.appScope.addDatabase(i.INPUT,this._inputData)},i.prototype.start=function(){t.Log.output("[CoreProcess] Start"),e.prototype.start.call(this)},i.prototype.update=function(t,i){e.prototype.update.call(this,t,i)},i.prototype.pause=function(){e.prototype.pause.call(this)},i.prototype.resume=function(){e.prototype.resume.call(this)},i.prototype.kill=function(){e.prototype.kill.call(this)},i.prototype.restart=function(){e.prototype.restart.call(this)},i}(t.AppState);e.ID="core",e.INPUT="input",t.CoreProcess=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(t){}return t.search=function(t,e,i){for(var n=0;n<i.length;n++){var s=i[n];if(s[t]&&s[t]===e)return s}return null},t.searchAll=function(t,e,i,n){void 0===n&&(n=[]);for(var s=0;s<i.length;s++){var r=i[s];r[t]&&r[t]===e&&n.push(r)}return n},t.include=function(t,e){-1==e.indexOf(t)&&e.push(t)},t.remove=function(t,e){var i=e.indexOf(t);i>=0&&e.splice(i,1)},t.traverse=function(t,e,i,n,s){void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=null);for(var r=i;r<t.length;r+=n)e.call(s,t[r])},t}();t.ArrayUtil=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(){}return t.loopSum=function(t,e,i,n){void 0===n&&(n=0);var s=(t+e)%(i+1)+n;return n>s&&(s=i+1-Math.abs(s-n)),s},t.constrain=function(t,e,i){return Math.max(e,Math.min(t,i))},t.findClosestDivisable=function(t,e){return e>=t?e:t%e>e/2?t+(e-t%e):t-t%e},t.findNextDivisable=function(t,e){return e>=t?e:t+(e-t%e)},t.interpolate=function(t,e,i){return t+(e-t)*i},t}();t.MathUtil=e}(Animyst||(Animyst={}));var Animyst;!function(t){var e=function(){function t(){}return t.invert=function(t){var e={};for(var i in t)e[t[i]]=i;return e},t.copy=function(e,i){i=i||{};for(var n in e)e[n]instanceof Object?Array.isArray(e[n])?i[n]=e[n].concat():i[n]=t.copy(e[n]):i[n]=e[n];return i},t}();t.ObjectUtil=e}(Animyst||(Animyst={}));
//# sourceMappingURL=animyst.min.js.map
