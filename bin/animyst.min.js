var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},Animyst;!function(e){var t=function(){function t(){this._lastFrame=0,this._framerate=60,this._framecount=0,this._timestep=1e3/this._framerate,this.runtime=0,this._appStateList=[],this._appStateLib={},this.appScope=new e.AppScope,this.initSignal=new e.Signal,this.bootSignal=new e.Signal}return Object.defineProperty(t.prototype,"framerate",{get:function(){return this._framerate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"framecount",{get:function(){return this._framecount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timestep",{get:function(){return this._timestep},set:function(e){this._timestep=e},enumerable:!0,configurable:!0}),t.prototype.startup=function(t){var r=this;e.Log.output("==================================================="),e.Log.output("   ----- AnimystJS: (v "+e.VERSION+") by ~Saykrd -----   "),e.Log.output("==================================================="),e.Log.output("Browser:",e.Environment.browserName),e.Log.output("Version:",e.Environment.browserVersion),e.Log.output("Platform:",e.Environment.platformName),e.Log.output("==================================================="),this._startParams=t,e.DataLoad.startup({}),e.DataLoad.loadAsset({id:"config",src:"config.json"},function(e,t){return r.onLoading(e,t)})},t.prototype.onLoading=function(t,r){if(t==e.DataLoad.FILE_LOADED)switch(r.item.id){case"config":e.Log.output("[Application] Config json loaded"),this.config=e.DataLoad.getAsset("config"),this.appScope.config=this.config,this.bootSignal.dispatch(),e.DataLoad.loadFromManifest([{id:"assets",src:this.config.assets},{id:"strings",src:this.config.strings}]);break;case"assets":e.Log.output("[Application] Assets json loaded");var s=e.DataLoad.getAsset("assets");e.DataLoad.listAssets(s.manifest),s.initialLoad&&e.DataLoad.loadFromManifest(s.initialLoad);break;case"strings":e.Log.output("[Application] Strings json loaded")}else t==e.DataLoad.LOAD_COMPLETE&&this.init()},t.prototype.init=function(){var t=this;this._startParams;e.LOGGING=this.config.settings.logging||e.LOGGING,e.DEBUG=this.config.settings.debug||e.DEBUG,e.Log.output("[Application] Application Started"),this.config.settings.debug&&(window.Stats&&!e.Environment.isCocoonJS&&(this._stats=new window.Stats,this._stats.domElement.style.position="absolute",this._stats.domElement.style.left="0px",this._stats.domElement.style.top="0px",document.body.appendChild(this._stats.domElement),e.Log.output("[Application] Stats Enabled")),window.dat&&!e.Environment.isCocoonJS&&(e.GUI=new window.dat.GUI));var r=new e.CoreProcess(e.CoreProcess.ID);this.run(r),this.timestep=this.config.settings.timestep||this.timestep,setInterval(function(){return t.fixedUpdate},this.timestep),window.view?window.view.onFrame=this.frameUpdate.bind(this):this.initFrame(),this.initSignal.dispatch()},t.prototype.initFrame=function(){var e=this;requestAnimationFrame(function(){return e.initFrame()}),this.frameUpdate()},t.prototype.run=function(e){this._appStateLib[e.id]||(this._appStateLib[e.id]=e,this._appStateList.push(e),e.setScope(this.appScope),e.framerate=this.framerate,e.timestep=this.timestep,e.setup(),e.start())},t.prototype.halt=function(e){this._appStateLib[e]||this._appStateLib[e].pause()},t.prototype.resume=function(e){this._appStateLib[e]||this._appStateLib[e].resume()},t.prototype.end=function(e){if(!this._appStateLib[e]){var t=this._appStateLib[e];t.kill(),this._appStateLib[t.id]=null;for(var r=0;r<this._appStateList.length;r++){var s=this._appStateList[r];if(s.id==t.id){this._appStateList.splice(r,1);break}}}},t.prototype.endAll=function(){for(var e in this._appStateLib)this.end(e)},t.prototype.fixedUpdate=function(){this.runtime+=this.timestep;for(var e=0;e<this._appStateList.length;e++){var t=this._appStateList[e];t.fixedUpdate(this.timestep,this.runtime)}},t.prototype.frameUpdate=function(e){var t=0,r=0;e?(t=e.delta,r=e.time):(r=Date.now(),t=r-(this._lastFrame||Date.now()),this._lastFrame=r),this._stats&&this._stats.begin();for(var s=0;s<this._appStateList.length;s++){var i=this._appStateList[s];i.frameUpdate(t,this._framecount)}this._framecount++,this._stats&&this._stats.end()},t}();e.Application=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(){this.databases={}}return e.prototype.addDatabase=function(e,t){this.databases[e]=t},e.prototype.getDatabase=function(e){return this.databases[e]},e}();e.AppScope=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(e){this._systemList=[],this._systemLib=[],this._framerate=60,this._timestep=1e3/this.framerate,this._id=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framerate",{get:function(){return this._framerate},set:function(e){this._framerate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestep",{get:function(){return this._timestep},set:function(e){this._timestep=e},enumerable:!0,configurable:!0}),e.prototype.setScope=function(e){this.appScope=e},e.prototype.clearScope=function(){this.appScope=null},e.prototype.setup=function(){},e.prototype.start=function(){this.active=!0},e.prototype.stop=function(){this.active=!1;for(var e=0;e<this._systemList.length;e++){var t=this._systemList[e];t.shutdown()}},e.prototype.frameUpdate=function(e,t){if(this.active&&!this.paused)for(var r=0;r<this._systemList.length;r++){var s=this._systemList[r];s.started&&!s.paused&&s.update(e,t)}},e.prototype.fixedUpdate=function(e,t){if(this.active&&!this.paused)for(var r=0;r<this._systemList.length;r++){var s=this._systemList[r];s.started&&!s.paused&&s.fixedUpdate(e,t)}},e.prototype.pause=function(){this.paused=!0},e.prototype.resume=function(){this.paused=!1},e.prototype.kill=function(){this.stop(),this.clearScope(),this._systemList=null,this._systemLib=null},e.prototype.restart=function(){},e.prototype.addSystem=function(e,t){this._systemList[e]||(this._systemLib[e]=t,this._systemList.push(t))},e.prototype.getSystem=function(e){return this._systemList[e]?void console.error("[AppState] !! No system found with ID: "+e):this._systemLib[e]},e}();e.AppState=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function t(){this._itemCount=0,this._items={},this._itemList=[],this._categoryLists={},this._categoryChecks={},this.signal=new e.Signal}return t.prototype.addCategory=function(e,t,r,s){this._categoryLists[e]=[],this._categoryChecks[e]={check:t,context:s,cls:r},this.traverse(this.list,this)},t.prototype.hasCategory=function(e){return null!=this._categoryLists[e]},t.prototype.list=function(t){for(var r in this._categoryLists){var s=this._categoryChecks[r];t instanceof s.cls&&s.check.call(s.context,t)&&e.ArrayUtil.include(t.id,this._categoryLists[r])}},t.prototype.unlist=function(t){for(var r in this._categoryLists)for(var s=0;s<this._categoryLists[r].length;s++)e.ArrayUtil.remove(t,this._categoryLists[r])},t.prototype.getFromCategory=function(e){for(var t=this._categoryLists[e]||[],r=t.length-1;r>=0&&t.length>0;r--){var s=this.get(t[r]);s||t.splice(r,1)}return t},t.prototype.isInCategory=function(e,t){var r=this._categoryLists[t];return r.indexOf(e)>-1},t.prototype.traverse=function(e,t,r){void 0===r&&(r=null);for(var s=this._categoryLists[r]||this._itemList,i=0;i<s.length;i++){var n=this.get(s[i]);n?e.call(t,n):(s.splice(i,1),i--)}},t.prototype.create=function(e,r,s){r||(r="item"+this._itemCount),this._items[r]&&(r+=this._itemCount);var i=new e(r,s);return i.id=r,this._items[r]=i,this._itemList.push(i.id),this.list(i),this._itemCount++,i.signal=this.signal,this.signal.dispatch(t.ADDED,i.id),i},t.prototype.remove=function(e){if(this._items[e]){this.get(e);this.unlist(e),delete this._items[e],this.signal.dispatch(t.REMOVED,e)}},t.prototype.removeAll=function(){this.traverse(function(e){this.remove(e.id)},this)},t.prototype.get=function(e){return this._items[e]},t.prototype.clear=function(){},t.prototype.destroy=function(){},t}();t.ADDED="added",t.REMOVED="removed",e.Database=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(e){this.id=e.id,this.src=e.src}return e}();e.AssetData=t;var r=function(){function r(e){}return r.startup=function(t){r._loadQueue=new createjs.LoadQueue(!0),r._loadSignal=new e.Signal;var s=r._loadQueue;s.on("fileload",r.handleFileLoaded),s.on("complete",r.handleLoadComplete),s.on("fileerror",r.handleFileError),s.on("error",r.handleLoaderError),s.on("filestart",r.handleFileStart),s.on("initialize",r.handleLoadInitialize),s.on("loadstart",r.handleLoadStart),s.on("fileprogress",r.handleFileProgress),s.on("progress",r.handleOverallProgress),r._fileStartedSignal=new e.Signal,r._fileProgressSignal=new e.Signal,r._fileLoadedSignal=new e.Signal,r._fileErrorSignal=new e.Signal,r._queueStartedSignal=new e.Signal,r._queueProgressSignal=new e.Signal,r._queueLoadedSignal=new e.Signal,r._queueErrorSignal=new e.Signal,null!=t.manifest,PIXI&&r.addCommand(r.FILE_LOADED,function(e){if(e.result instanceof HTMLImageElement||e.result instanceof HTMLCanvasElement){console.log(e.result);var t=PIXI.BaseTexture.fromCanvas(e.result);PIXI.utils.BaseTextureCache[e.item.src]=t}})},r.listAssets=function(e){for(var t=r._assetList,s=0;s<e.length;s++){var i=e[s];t[i.id]=i}},r.loadFromManifest=function(e,s,i){void 0===i&&(i=!1);for(var n=r._loadQueue,a=[],o=0;o<e.length;o++){var u,c=e[o];u=new t("string"==typeof c?{id:c,src:c}:{id:c.id,src:c.src}),r._assetList[u.id]||(r._assetList[u.id]=u),a.push(r._assetList[u.id])}r.addLoadHandler(s,i),r._busy=!0,n.loadManifest(a)},r.loadAsset=function(e,s,i){void 0===i&&(i=!1);var n,a=r._loadQueue;n=new t("string"==typeof e?{id:e,src:e}:{id:e.id,src:e.src}),r._assetList[n.id]||(r._assetList[n.id]=n),r.addLoadHandler(s,i),r._busy=!0,a.loadFile(r._assetList[n.id])},r.getAsset=function(e){return r._loadQueue.getResult(e)},r.getData=function(e){return r._assetList[e]},r.getPath=function(e){return r._assetList[e].src},r.addLoadHandler=function(e,t){void 0===t&&(t=!1),e&&(t||r._weakHandlers.push(e),r._loadSignal.add(e))},r.removeLoadHandler=function(e){for(var t=r._weakHandlers.length-1;t>=0&&r._weakHandlers.length>0;t--){var s=r._weakHandlers[t];if(s==e){r._weakHandlers.splice(t,1);break}}r._loadSignal.remove(e)},r.removeWeakHandlers=function(e){for(r._loadSignal;e.length>0;){var t=e.shift();r.removeLoadHandler(t)}},r.addCommand=function(e,t,s){void 0===s&&(s=!1);var i;switch(e){case r.LOAD_STARTED:i=r._queueStartedSignal;break;case r.FILE_STARTED:i=r._fileStartedSignal;break;case r.LOAD_PROGRESS:i=r._queueProgressSignal;break;case r.FILE_PROGRESS:i=r._fileProgressSignal;break;case r.LOAD_COMPLETE:i=r._queueLoadedSignal;break;case r.FILE_LOADED:i=r._fileLoadedSignal;break;case r.LOAD_ERROR:i=r._queueErrorSignal;break;case r.FILE_ERROR:i=r._fileErrorSignal}s?i.addOnce(t):i.add(t)},r.removeCommand=function(e,t){var s;switch(e){case r.LOAD_STARTED:s=r._queueStartedSignal;break;case r.FILE_STARTED:s=r._fileStartedSignal;break;case r.LOAD_PROGRESS:s=r._queueProgressSignal;break;case r.FILE_PROGRESS:s=r._fileProgressSignal;break;case r.LOAD_COMPLETE:s=r._queueLoadedSignal;break;case r.FILE_LOADED:s=r._fileLoadedSignal;break;case r.LOAD_ERROR:s=r._queueErrorSignal;break;case r.FILE_ERROR:s=r._fileErrorSignal}s.remove(t)},r.handleLoadInitialize=function(e){var t=r._loadSignal;t.dispatch(r.LOAD_INITIALIZE,e)},r.handleLoadStart=function(t){e.Log.output("[DataLoad] Load Started!");var s=r._loadSignal;s.dispatch(r.LOAD_STARTED,t),r._queueStartedSignal.dispatch(t)},r.handleFileStart=function(t){e.Log.output("[DataLoad] Loading File:",t.item.id,"from:",t.item.src);var s=r._loadSignal;s.dispatch(r.FILE_STARTED,t),r._fileStartedSignal.dispatch(t)},r.handleFileLoaded=function(t){e.Log.output("[DataLoad] File Loaded:",t.item.id,"from:",t.item.src);var s=r._loadSignal;s.dispatch(r.FILE_LOADED,t),r._fileLoadedSignal.dispatch(t)},r.handleLoadComplete=function(t){e.Log.output("[DataLoad] Load Completed!");var s=r._loadSignal,i=r._weakHandlers.concat();s.dispatch(r.LOAD_COMPLETE,t),r._queueLoadedSignal.dispatch(t),r.removeWeakHandlers(i)},r.handleFileProgress=function(e){var t=r._loadSignal;t.dispatch(r.FILE_PROGRESS,e),r._fileProgressSignal.dispatch(e)},r.handleOverallProgress=function(e){var t=r._loadSignal;t.dispatch(r.LOAD_PROGRESS,e),r._queueProgressSignal.dispatch(e)},r.handleFileError=function(e){var t=r._loadSignal;t.dispatch(r.FILE_ERROR,e),r._fileErrorSignal.dispatch(e)},r.handleLoaderError=function(e){var t=r._loadSignal;t.dispatch(r.LOAD_ERROR,e),r._queueErrorSignal.dispatch(e)},r}();r.LOAD_INITIALIZE=0,r.LOAD_STARTED=1,r.LOAD_PROGRESS=2,r.LOAD_COMPLETE=3,r.LOAD_ERROR=4,r.FILE_STARTED=5,r.FILE_PROGRESS=6,r.FILE_LOADED=7,r.FILE_ERROR=9,r._assetList={},r._weakHandlers=[],r._loadQueue=null,r._loadSignal=null,r._fileStartedSignal=null,r._fileProgressSignal=null,r._fileLoadedSignal=null,r._fileErrorSignal=null,r._queueStartedSignal=null,r._queueProgressSignal=null,r._queueLoadedSignal=null,r._queueErrorSignal=null,r._busy=!1,e.DataLoad=r}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(){}return e._setup=function(){return e._checkBrowser(),e._checkPlatform(),e._checkDevice(),!0},e._checkPlatform=function(){var t=navigator.userAgent;/Linux/.test(t)&&(e.platformName="Linux",e.isLinux=!0),/Android/.test(t)&&(e.platformName="Android",e.isAndroid=!0),/CrOS/.test(t)&&(e.platformName="ChromeOS",e.isChromeOS=!0),/iP[ao]d|iPhone/i.test(t)&&(e.platformName="iOS",e.isIOS=!0),/Mac OS/.test(t)&&(e.platformName="Mac",e.isMacOS=!0),/Windows/.test(t)&&(e.platformName="Windows",e.isWindows=!0),(e.isWindows||e.isMacOS||e.isLinux)&&(e.isDesktop=!0),(e.isAndroid||e.isIOS||e.isWebApp)&&(e.isMobile=!0)},e._checkDevice=function(){e.pixelRatio=window.devicePixelRatio||1,e.colorDepth=window.screen.colorDepth,e.isMobile?(e.screenWidth=window.screen.width*e.pixelRatio,e.screenHeight=window.screen.height*e.pixelRatio):(e.screenWidth=window.screen.width,e.screenHeight=window.screen.height)},e._checkBrowser=function(){var t=navigator.userAgent;/Safari/.test(t)&&(e.browserName="Safari",e.isSafari=!0,e.browserVersion=-1!=t.indexOf("Version")?t.substring(t.indexOf("Version")+8):t.substring(t.indexOf("Safari")+7)),/Mobile(.*)Safari/.test(t)&&(e.browserName="MobileSafari",e.isSafari=!0,e.browserVersion=-1!=t.indexOf("Version")?t.substring(t.indexOf("Version")+8):t.substring(t.indexOf("Safari")+7)),/Chrome/.test(t)&&(e.browserName="Chrome",e.isChrome=!0,e.browserVersion=t.substring(t.indexOf("Chrome")+7,t.indexOf(" Safari")||null)),/Firefox/.test(t)&&(e.browserName="Firefox",e.isFirefox=!0,e.browserVersion=t.substring(t.indexOf("Firefox")+8)),/MSIE (\d+\.\d+);/.test(t)&&(e.browserName="MSIE",e.isIE=!0,e.browserVersion=t.substring(t.indexOf("MSIE")+5)),/Edge/.test(t)&&(e.browserName="MSEdge",e.isEdge=!0,e.browserVersion=t.substring(t.indexOf("Edge")+5)),navigator.standalone&&(e.browserName="WebApp",e.isWebApp=!0),navigator.isCocoonJS&&(e.browserName="CocoonJS",e.isCocoonJS=!0),e.url=window.location.href,e.queryString=window.location.search,e.host=window.location.hostname,e.path=window.location.pathname,e.port=window.location.port;var r=e.browserVersion.split(".");switch(r.length){case 1:e.browserDetails.major=parseInt(r[0]);break;case 2:e.browserDetails.major=parseInt(r[0]),e.browserDetails.minor=parseInt(r[1]);break;case 3:e.browserDetails.major=parseInt(r[0]),e.browserDetails.minor=parseInt(r[1]),e.browserDetails.build=parseInt(r[2]);break;case 4:e.browserDetails.major=parseInt(r[0]),e.browserDetails.minor=parseInt(r[1]),e.browserDetails.build=parseInt(r[2]),e.browserDetails.revision=parseInt(r[3])}},e.getURLParameterByName=function(t,r){void 0===r&&(r=!1),null===r&&(r=!0);var s=new RegExp("[?&]"+t+"=([^&]*)").exec(e.queryString);return r?s&&decodeURIComponent(s[1].replace(/\/+/g,"")):s&&decodeURIComponent(s[1])},e}();t.isDesktop=!1,t.isMobile=!1,t.isIOS=!1,t.isAndroid=!1,t.isChromeOS=!1,t.isMacOS=!1,t.isWindows=!1,t.isLinux=!1,t.platformName="",t.pixelRatio=1,t.colorDepth=-1,t.screenWidth=-1,t.screenHeight=-1,t.isChrome=!1,t.isFirefox=!1,t.isIE=!1,t.isEdge=!1,t.isSafari=!1,t.isWebApp=!1,t.isCocoonJS=!1,t.browserVersion="",t.browserName="",t.browserDetails={},t.url="",t.host="",t.path="",t.port="",t.queryString="",t.setup=t._setup(),e.Environment=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(e,t){this.id=e,this.startParams=t,this.setup(t)}return e.prototype.setup=function(e){},e.prototype.reset=function(){this.setup(this.startParams)},e.prototype.destroy=function(){this.startParams=null},e}();e.Item=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function t(){}return t.output=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(e.LOGGING){var s=[];s.push(":[LOG]:");for(var i=0;i<t.length;i++)s.push(t[i]);console.log.apply(console,s)}},t.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(e.LOGGING){var s=[];s.push(":[ERROR]:");for(var i=0;i<t.length;i++)s.push(t[i]);console.error.apply(console,s)}},t}();e.Log=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(e,t,r,s,i){void 0===i&&(i=0),this.active=!0,this.params=null,this._listener=t,this._isOnce=r,this.context=s,this._signal=e,this.priority=i||0}return e.prototype.execute=function(e){var t,r;return this.active&&this._listener&&(r=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,r),this._isOnce&&this.detach()),t},e.prototype.detach=function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},e.prototype.isBound=function(){return!!this._signal&&!!this._listener},e.prototype.isOnce=function(){return this._isOnce},e.prototype.getListener=function(){return this._listener},e.prototype.getSignal=function(){return this._signal},e.prototype._destroy=function(){delete this._signal,delete this._listener,delete this.context},e.prototype.toString=function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"},e}();e.SignalBinding=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function t(){this._bindings=[],this._prevParams=null,this.memorize=!1,this._shouldPropagate=!0,this.active=!0}return t.prototype.validateListener=function(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))},t.prototype._registerListener=function(t,r,s,i){var n,a=this._indexOfListener(t,s);if(-1!==a){if(n=this._bindings[a],n.isOnce()!==r)throw new Error("You cannot add"+(r?"":"Once")+"() then add"+(r?"Once":"")+"() the same listener without removing the relationship first.")}else n=new e.SignalBinding(this,t,r,s,i),this._addBinding(n);return this.memorize&&this._prevParams&&n.execute(this._prevParams),n},t.prototype._addBinding=function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e.priority<=this._bindings[t].priority);this._bindings.splice(t+1,0,e)},t.prototype._indexOfListener=function(e,t){for(var r,s=this._bindings.length;s--;)if(r=this._bindings[s],r.getListener()===e&&r.context===t)return s;return-1},t.prototype.has=function(e,t){return-1!==this._indexOfListener(e,t)},t.prototype.add=function(e,t,r){return void 0===r&&(r=0),this.validateListener(e,"add"),this._registerListener(e,!1,t,r)},t.prototype.addOnce=function(e,t,r){return void 0===r&&(r=0),this.validateListener(e,"addOnce"),this._registerListener(e,!0,t,r)},t.prototype.remove=function(e,t){this.validateListener(e,"remove");var r=this._indexOfListener(e,t);return-1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},t.prototype.removeAll=function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},t.prototype.getNumListeners=function(){return this._bindings.length},t.prototype.halt=function(){this._shouldPropagate=!1},t.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.active){var r,s=this._bindings.length;if(this.memorize&&(this._prevParams=e),s){r=this._bindings.slice(0),this._shouldPropagate=!0;do s--;while(r[s]&&this._shouldPropagate&&r[s].execute(e)!==!1)}}},t.prototype.forget=function(){this._prevParams=null},t.prototype.dispose=function(){this.removeAll(),delete this._bindings,delete this._prevParams},t.prototype.toString=function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"},t}();t.VERSION="1.0.0",e.Signal=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.startup=function(e){this._started=!0,this._startupParams=e},e.prototype.shutdown=function(){this._started=!1},e.prototype.update=function(e,t){},e.prototype.fixedUpdate=function(e,t){},e}();e.System=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"orientation",{get:function(){return window.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isLandscape",{get:function(){return window.innerWidth>window.innerHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isPortrait",{get:function(){return window.innerHeight>window.innerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t,"width",{get:function(){return document.documentElement.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t,"height",{get:function(){return document.documentElement.clientHeight},enumerable:!0,configurable:!0}),t._onResize=function(r){e.Log.output("[Window] onResize!"),t.resizeSignal.dispatch(r)},t._onWindowLoad=function(r){e.Log.output("[Window] Window loaded:","w:",t.width,"h:",t.height)},t._setup=function(){window.addEventListener("resize",t._onResize),window.addEventListener("load",t._onWindowLoad)},t}();t.resizeSignal=new e.Signal,e.Window=t}(Animyst||(Animyst={})),Animyst.Window._setup();var Animyst;!function(e){e.LOGGING=!0,e.DEBUG=!0,e.MAJOR=0,e.MINOR=0,e.BUILD=0,e.DATA="",e.VERSION=e.MAJOR+"."+e.MINOR+"."+e.BUILD}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(){}return e}();e.Sound=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(t){function r(e,r){var s=t.call(this)||this;return s.stage=e,s.renderer=r,s.width=r.view.width,s.height=r.view.height,s._init(),s}return __extends(r,t),r.prototype._init=function(){this.image=this.renderer.view;var t=new PIXI.Graphics;t.lineStyle(2,16711935,1),t.beginFill(16711867,.25),t.drawCircle(this.width/2,this.height/2,100),t.endFill();var r=PIXI.Texture.fromCanvas(e.DataLoad.getAsset("samusftilt")),s=new PIXI.Sprite(r);this.stage.addChild(s),this.stage.addChild(t),this.invalidate(),this.update()},r.prototype.invalidate=function(){this.shouldUpdate=!0},r.prototype.update=function(){this.shouldUpdate&&(this.renderer.render(this.stage),this.needsUpdate=!0,this.shouldUpdate=!1)},r}(THREE.Texture);e.PIXITexture=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.width=0,e.height=0,e}return __extends(r,t),Object.defineProperty(r.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0}),r.prototype.init=function(t){this.width=t.width||e.Window.width,this.height=t.height||e.Window.height,this.renderer=PIXI.autoDetectRenderer(this.width,this.height,t.options,t.noWebGL),this.renderer.backgroundColor=t.backgroundColor||this.renderer.backgroundColor,this.stage=new PIXI.Container},r.prototype.append=function(t){if(t){var r=document.getElementById(t);r?r.appendChild(this.renderer.view):e.Log.error("[PIXIViewport] Container ID",t,"doesn't exist")}else document.body.appendChild(this.renderer.view)},r.prototype.render=function(){this.renderer.render(this.stage)},r}(e.Database);e.PIXIView=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(e){function t(t){var r=e.call(this)||this;return r.playTime=0,r.time=0,r.currentFrame=0,r.currentFrameID="",r.sprite=null,r.renderWidth=0,r.renderHeight=0,r.sourceFile="",r.timePassed=0,r.addSheet(t),r}return __extends(t,e),t.prototype._initSprite=function(e){this.stage=new PIXI.Container,this.renderer=PIXI.autoDetectRenderer(256,256,{transparent:!0}),this.sprite=new PIXI.Sprite(PIXI.Texture.fromFrame(e)),this.image=this.renderer.view,this.stage.addChild(this.sprite),this.renderer.render(this.stage),this.needsUpdate=!0},t.prototype.addSheet=function(e){this.atlas=e,this.frames=[];for(var t in e.frames){var r=e.frames[t];r.frame.w>this.renderWidth&&(this.renderWidth=r.frame.w%2==0?r.frame.w:r.frame.w+1),r.frame.h>this.renderHeight&&(this.renderHeight=r.frame.h%2==0?r.frame.h:r.frame.h+1),this.frames.push(t)}this.sprite||(this._initSprite(this.frames[0]),this.currentFrameID=this.frames[0],this.currentFrame=0)},t.prototype.showFrame=function(e){if(!(this.frames.length<=0)){e||(e=this.currentFrame||0);var t;"string"==typeof e?t=e:"number"==typeof e&&(t=this.frames[e]),this.sprite.setTexture(PIXI.Texture.fromFrame(t)),this.renderer.render(this.stage),this.needsUpdate=!0}},t.prototype.play=function(e,t){this.frames.length<=0||(this.playing=!0,this.loop=t,this.playTime=e,this.time=0)},t.prototype.stop=function(){this.playing=!1,this.timePassed=0},t.prototype.animate=function(e,t){this.playing&&(this.time>=this.playTime?this.loop?this.time=0:this.playing=!1:(this.time+=e,this.currentFrame=Math.round(this.time/this.playTime*(this.frames.length-1)),this.currentFrame>=this.frames.length&&(this.currentFrame=this.frames.length-1),this.showFrame()))},t}(THREE.Texture);e.SpriteSheetTexture=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(t){function r(){return t.call(this)||this}return __extends(r,t),Object.defineProperty(r.prototype,"aspect",{get:function(){return this.width/this.height},enumerable:!0,configurable:!0}),r.prototype.clear=function(){t.prototype.clear.call(this)},r.prototype.destroy=function(){t.prototype.destroy.call(this)},r.prototype.init=function(t){if(!t)return void e.Log.error("[View3D] No initialization params specified");if(e.Log.output("[View3D] Initializing Viewport.."),this.width=t.width||e.Window.width,this.height=t.height||e.Window.height,this._resize=t.resize,this._renderer=new THREE.WebGLRenderer,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setClearColor(t.rendererColor||8947848),this._renderer.setSize(this.width,this.height),this._renderer.autoClear=!1,t.debugControls&&(r.CONTROLS=t.debugControls,e.GUI)){e.GUI.addFolder("View3D")}t.resize&&e.Window.resizeSignal.add(this.onResize,this)},r.prototype.append=function(t){if(t){var r=document.getElementById(t);r?r.appendChild(this._renderer.domElement):e.Log.error("[Viewport3D] Container ID",t,"doesn't exist")}else document.body.appendChild(this._renderer.domElement)},r.prototype.render=function(){this._renderer.clear(),this.traverse(this.renderScene3D,this)},r.prototype.renderScene3D=function(e){var t=e.getActiveCamera();this._renderer.clearDepth(),this._renderer.render(e.scene,t)},r.prototype.update=function(){},r.prototype.onResize=function(){},r}(e.Database);t.CONTROLS=!1,e.View3D=t;var r=function(){function e(){}return e}();r.PERSPECTIVE="perspective",r.ORTHOGRAPHIC="orthographic",e.CameraType=r;var s=function(s){function i(e,t){return s.call(this,e,t)||this}return __extends(i,s),i.prototype.setup=function(i){if(s.prototype.setup.call(this,i),this.scene=new THREE.Scene,i.addAxis){var n=new THREE.AxisHelper(20);this.scene.add(n)}if(i.cameras)for(var a=0;a<i.cameras.length;++a){var o,u=i.cameras[a];switch(u.type){case r.PERSPECTIVE:var c=new THREE.PerspectiveCamera(u.fov,u.aspect,u.near,u.far);o=c;break;case r.ORTHOGRAPHIC:var d=new THREE.OrthographicCamera(u.left,u.right,u.top,u.bottom,u.near,u.far);o=d}if(o.name=u.name,u.main&&(this.activeCamera=o.name,i.debugControls&&t.CONTROLS&&e.GUI)){var l=(new THREE.OrbitControls(o),e.GUI.__folders.View3D),h=l.addFolder("camera");h.add(o.position,"x",-1e3,1e3).listen(),h.add(o.position,"y",-1e3,1e3).listen(),h.add(o.position,"z",-1e3,1e3).listen()}o.position.x=null!==u.x?u.x:500,o.position.y=null!==u.y?u.y:500,o.position.z=null!==u.z?u.z:500,this.scene.add(o),(void 0===u.lookAtScene||u.lookAtScene)&&o.lookAt(this.scene.position)}},i.prototype.getActiveCamera=function(){return this.scene.getObjectByName(this.activeCamera)},i}(e.Item);e.Scene3D=s}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(t){function r(e){var r=t.call(this)||this;return r.inputData=e,r}return __extends(r,t),r.prototype.startup=function(t){var r=t.element,s=t.tool;this.keyboardSettings=t.keyboardSettings,s&&(s.onKeyUp=this.onKeyUp.bind(this),s.onKeyDown=this.onKeyDown.bind(this),s.onMouseDown=this.onMouseDown.bind(this),s.onMouseUp=this.onMouseUp.bind(this),s.onMouseDrag=this.onMouseDrag.bind(this),s.onMouseMove=this.onMouseMove.bind(this)),r&&(r.addEventListener("touchstart",this.onTouchStart.bind(this)),r.addEventListener("touchmove",this.onTouchMove.bind(this)),r.addEventListener("touchend",this.onTouchRelease.bind(this)),r.addEventListener("touchenter",this.onTouchEnter.bind(this)),r.addEventListener("touchleave",this.onTouchLeave.bind(this)),r.addEventListener("mousedown",this.onMouseDown.bind(this)),r.addEventListener("mouseup",this.onMouseUp.bind(this)),r.addEventListener("mousemove",this.onMouseMove.bind(this)),r.addEventListener("mouseenter",this.onMouseEnter.bind(this)),r.addEventListener("mouseleave",this.onMouseLeave.bind(this)),r.addEventListener("keydown",this.onKeyDown.bind(this)),r.addEventListener("keyup",this.onKeyUp.bind(this))),e.System.prototype.startup.call(this,t)},r.prototype.shutdown=function(){this.inputData=null,e.System.prototype.shutdown.call(this)},r.prototype.update=function(e,t){this.inputData.onTick(e)},r.prototype.onTouchStart=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Touch Start!"),this.handleTouchInput(r.TOUCH_START,t)},r.prototype.onTouchMove=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Touch Move!"),this.handleTouchInput(r.TOUCH_MOVE,t)},r.prototype.onTouchRelease=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Touch Release!"),this.handleTouchInput(r.TOUCH_RELEASE,t)},r.prototype.onTouchEnter=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Touch Enter!"),this.handleTouchInput(r.TOUCH_ENTER,t)},r.prototype.onTouchLeave=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Touch Leave!"),this.handleTouchInput(r.TOUCH_LEAVE,t)},r.prototype.onClick=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Mouse Click!"),this.handleMouseInput(r.MOUSE_CLICK,t)},r.prototype.onMouseDown=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Mouse Down!"),this.handleMouseInput(r.MOUSE_DOWN,t)},r.prototype.onMouseDrag=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Mouse Drag!"),this.handleMouseInput(r.MOUSE_DRAG,t)},r.prototype.onMouseMove=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Mouse Move!"),this.handleMouseInput(r.MOUSE_MOVE,t)},r.prototype.onMouseUp=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Mouse Up!"),this.handleMouseInput(r.MOUSE_UP,t)},r.prototype.onMouseEnter=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Mouse Enter!"),this.handleMouseInput(r.MOUSE_ENTER,t)},r.prototype.onMouseLeave=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Mouse Leave!"),this.handleMouseInput(r.MOUSE_LEAVE,t)},r.prototype.onKeyUp=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Released Key:",t.key||e.InputData.KEY_NAMES[t.keyCode]),
this.keyboardSettings.allowDefault[t.key||e.InputData.KEY_NAMES[t.keyCode]]||t.preventDefault(),this.handleKeyInput(r.KEY_UP,t.keyCode||e.InputData.KEY_CODES[t.key])},r.prototype.onKeyDown=function(t){r.LOGGING&&e.LOGGING&&console.log("[Input] Pressed Key:",t.key||e.InputData.KEY_NAMES[t.keyCode]),this.keyboardSettings.allowDefault[t.key||e.InputData.KEY_NAMES[t.keyCode]]||t.preventDefault(),this.handleKeyInput(r.KEY_DOWN,t.keyCode||e.InputData.KEY_CODES[t.key])},r.prototype.handleMouseInput=function(e,t){var s;e!=r.MOUSE_DOWN&&e!=r.MOUSE_DRAG||(s=!0),e!=r.MOUSE_UP&&e!=r.MOUSE_LEAVE||(s=!1),this.inputData.setMouseInput(t,s)},r.prototype.handleKeyInput=function(e,t){this.inputData.setKeyInput(t,e==r.KEY_DOWN)},r.prototype.handleTouchInput=function(e,t){switch(e){case r.TOUCH_START:this.inputData.addTouches(t.changedTouches);break;case r.TOUCH_MOVE:break;case r.TOUCH_RELEASE:this.inputData.removeTouches(t.touches);break;case r.TOUCH_ENTER:break;case r.TOUCH_LEAVE:}this.inputData.updateTouches(t.changedTouches)},r}(e.System);t.LOGGING=!1,t.KEY_DOWN=0,t.KEY_UP=1,t.TOUCH_START=0,t.TOUCH_MOVE=1,t.TOUCH_RELEASE=2,t.TOUCH_ENTER=3,t.TOUCH_LEAVE=4,t.MOUSE_DOWN=5,t.MOUSE_UP=6,t.MOUSE_DRAG=7,t.MOUSE_MOVE=8,t.MOUSE_ENTER=9,t.MOUSE_LEAVE=10,t.MOUSE_CLICK=11,e.Input=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.map={},e.touches=[],e.touchHistory=[],e.mouse={},e.mouseHistory=[],e.totalTouchCount=0,e.time=0,e}return __extends(r,t),Object.defineProperty(r,"KEY_NAMES",{get:function(){return r.__KEY_NAMES||(r.__KEY_NAMES=e.ObjectUtil.invert(r.KEY_CODES)),r.__KEY_NAMES},enumerable:!0,configurable:!0}),r.prototype.clear=function(){this.map={},this.touches=[],this.touchHistory=[],this.totalTouchCount=0,t.prototype.clear.call(this)},r.prototype.destroy=function(){this.map=null,this.touches=null,this.touchHistory=null,this.totalTouchCount=0,t.prototype.destroy.call(this)},r.prototype.onTick=function(e){this.time+=e,this.mouse.down&&(this.mouse.clickTime+=e);for(var t in this.map){var r=this.map[t];r.active&&(r.time=(r.time||0)+e)}for(var s=0;s<this.touches.length;s++){var i=this.touches[s];i.time+=e}},r.prototype.isKeyDown=function(e){var t=r.KEY_CODES[e];return!(!this.map[t]||!this.map[t].active)},r.prototype.setKeyInput=function(e,t){var s,i=this.map[e]||{};t&&!i.active&&(i.time=0,s=r.KEY_ACTIVE),!t&&i.active&&(i.lastInput={},i.lastInput.endTime=this.time,i.lastInput.duration=i.time,i.lastInput.startTime=this.time-i.time,i.time=0,s=r.KEY_INACTIVE),i.active=t===!0,this.map[e]||(this.map[e]=i),s&&this.signal.dispatch(r.KEY,s,i)},r.prototype.setMouseInput=function(t,s){this.touches.length>0&&s&&(s=!1),"boolean"!=typeof s&&(s=this.mouse.down);for(var i=this.mouse.down&&!s?this.mouse.lastClick||{}:null,n=!this.mouse.down&&s?{}:null,a=r.MOUSE_MOVE,o=0;o<r.MOUSE_PROPERTIES.length;o++){var u=r.MOUSE_PROPERTIES[o];t[u]&&(this.mouse[u]=t[u],i&&(i[u]=t[u]),n&&(n[u]=t[u]))}n&&(r.LOGGING&&e.LOGGING&&console.log("[InputData] Click Start!"),this.mouse.clickStart=n,this.mouse.clickTime=0,a=r.MOUSE_DOWN),i&&(r.LOGGING&&e.LOGGING&&console.log("[InputData] Click Ended!",this.mouse.clickTime),i.clickStart=this.mouse.clickStart,i.clickTime=this.mouse.clickTime,this.mouse.clickStart=null,this.mouse.lastClick=i,a=r.MOUSE_UP),this.mouse.down=s,this.signal.dispatch(r.MOUSE,a,this.mouse)},r.prototype.getTouches=function(){return this.touches.concat()},r.prototype.addTouches=function(t){for(var s=0;s<t.length;s++){for(var i=t[s],n=!0,a=0;a<this.touches.length;a++)if(this.touches[a].identifier==i.identifier){n=!1;break}if(n){for(var o={},u={},a=0;a<r.TOUCH_PROPERTIES.length;a++){var c=r.TOUCH_PROPERTIES[a];o[c]="object"!=typeof i[c]||"target"==c?i[c]:null,u[c]="object"!=typeof i[c]?i[c]:null}o.time=0,o.timestamp=this.time,o.startData=u,o.uid=o.identifier+""+this.totalTouchCount,this.touches.push(o),this.totalTouchCount++,r.LOGGING&&e.LOGGING&&console.log("[InputData] Adding Touch:",o.uid),this.signal.dispatch(r.TOUCH,r.TOUCH_ADDED,o)}}},r.prototype.removeTouches=function(t){for(var s=this.touches.length-1;s>-1&&this.touches.length>0;s--){for(var i=this.touches[s],n=!0,a=0;a<t.length;a++)if(t[a].identifier==i.identifier){n=!1;break}n&&(r.LOGGING&&e.LOGGING&&console.log("[InputData] Removing Touch:",i.uid),this.touchHistory.unshift(i),this.touches.splice(s,1),this.touchHistory.length>r.TOUCH_HISTORY_LIMIT&&this.touchHistory.pop(),this.signal.dispatch(r.TOUCH,r.TOUCH_REMOVED,i))}},r.prototype.updateTouches=function(t){for(var s=0;s<t.length;s++){for(var i,n=t[s],a=0;a<this.touches.length;a++)if(this.touches[a].identifier==n.identifier){i=this.touches[a];break}if(i){for(var a=0;a<r.TOUCH_PROPERTIES.length;a++){var o=r.TOUCH_PROPERTIES[a];i[o]=n[o]}r.LOGGING&&e.LOGGING&&console.log("[InputData] Updated Touch:",i.uid,Math.round(i.pageX),Math.round(i.pageY),Math.round(i.screenX),Math.round(i.screenY),i.force||i.webkitForce),this.signal.dispatch(r.TOUCH,r.TOUCH_UPDATED,i)}}},r}(e.Database);t.LOGGING=!1,t.TOUCH_HISTORY_LIMIT=12,t.TOUCH_PROPERTIES=["identifier","screenX","screenY","clientX","clientY","pageX","pageY","radiusX","radiusY","rotationAngle","force","webkitForce","target"],t.MOUSE_PROPERTIES=["clientX","clientY","screenX","screenY","type","point","lastPoint","downPoint","middlePoint","count","item","modifiers"],t.KEY_CODES={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,numlock:144,esc:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,"delete":46,clear:12,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,plus:107,minus:109,dot:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"=":187,",":188,".":190,"/":191,backslash:220,";":186,"'":222,"[":219,"]":221,"-":189,space:32,"~":192},t.MOUSE=0,t.TOUCH=1,t.KEY=2,t.TOUCH_ADDED=0,t.TOUCH_REMOVED=1,t.TOUCH_UPDATED=2,t.MOUSE_DOWN=0,t.MOUSE_UP=1,t.MOUSE_MOVE=2,t.KEY_ACTIVE=0,t.KEY_INACTIVE=1,e.InputData=t}(Animyst||(Animyst={})),function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=0,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var r=this||t;if(e=parseFloat(e),r.ctx||c(),"undefined"!=typeof e&&e>=0&&1>=e){if(r._volume=e,r._muted)return r;r.usingWebAudio&&(r.masterGain.gain.value=e);for(var s=0;s<r._howls.length;s++)if(!r._howls[s]._webAudio)for(var i=r._howls[s]._getSoundIds(),n=0;n<i.length;n++){var a=r._howls[s]._soundById(i[n]);a&&a._node&&(a._node.volume=a._volume*e)}return r}return r._volume},mute:function(e){var r=this||t;r.ctx||c(),r._muted=e,r.usingWebAudio&&(r.masterGain.gain.value=e?0:r._volume);for(var s=0;s<r._howls.length;s++)if(!r._howls[s]._webAudio)for(var i=r._howls[s]._getSoundIds(),n=0;n<i.length;n++){var a=r._howls[s]._soundById(i[n]);a&&a._node&&(a._node.muted=e?!0:a._muted)}return r},unload:function(){for(var e=this||t,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&"undefined"!=typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var r=new Audio;"undefined"==typeof r.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(s){e.noAudio=!0}else e.noAudio=!0;try{var r=new Audio;r.muted&&(e.noAudio=!0)}catch(s){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,r=null;try{r="undefined"!=typeof Audio?new Audio:null}catch(s){return e}if(!r||"function"!=typeof r.canPlayType)return e;var i=r.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),a=n&&parseInt(n[0].split("/")[1],10)<33;return e._codecs={mp3:!(a||!i&&!r.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!r.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||t,r=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),s=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(r||s)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var i=function(){var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),"undefined"==typeof t.start?t.noteOn(0):t.start(0),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",i,!0)}};return document.addEventListener("touchend",i,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!=typeof e.ctx.suspend&&t.usingWebAudio){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio)for(var s=0;s<e._howls[r]._sounds.length;s++)if(!e._howls[r]._sounds[s]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&"undefined"!=typeof e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.state="resuming",e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,r=function(e){var t=this;return e.src&&0!==e.src.length?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var r=this;return t.ctx||c(),r._autoplay=e.autoplay||!1,r._format="string"!=typeof e.format?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload="boolean"==typeof e.preload?e.preload:!0,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src="string"!=typeof e.src?e.src:[e.src],r._volume=void 0!==e.volume?e.volume:1,r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,"undefined"!=typeof t.ctx&&t.ctx&&t.mobileAutoEnable&&t._enableMobileAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r.load(),r},load:function(){var e=this,r=null;if(t.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var a,o;if(e._format&&e._format[i])a=e._format[i];else{if(o=e._src[i],"string"!=typeof o){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}a=/^data:audio\/([^;,]+);/i.exec(o),a||(a=/\.([^.]+)$/.exec(o.split("?",1)[0])),a&&(a=a[1].toLowerCase())}if(a||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),a&&t.codecs(a)){r=e._src[i];break}}return r?(e._src=r,e._state="loading","https:"===window.location.protocol&&"http:"===r.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new s(e),e._webAudio&&n(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,r){var s=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===s._state&&!s._sprite[e])return null;if("undefined"==typeof e){e="__default";for(var n=0,a=0;a<s._sounds.length;a++)s._sounds[a]._paused&&!s._sounds[a]._ended&&(n++,i=s._sounds[a]._id);1===n?e=null:i=null}}var o=i?s._soundById(i):s._inactiveSound();if(!o)return null;if(i&&!e&&(e=o._sprite||"__default"),"loaded"!==s._state&&!s._sprite[e])return s._queue.push({event:"play",action:function(){s.play(s._soundById(o._id)?o._id:void 0)}}),o._id;if(i&&!o._paused)return r||setTimeout(function(){s._emit("play",o._id)},0),o._id;s._webAudio&&t._autoResume();var u=Math.max(0,o._seek>0?o._seek:s._sprite[e][0]/1e3),c=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(o._rate);o._paused=!1,o._ended=!1,o._sprite=e,o._seek=u,o._start=s._sprite[e][0]/1e3,o._stop=(s._sprite[e][0]+s._sprite[e][1])/1e3,o._loop=!(!o._loop&&!s._sprite[e][2]);var l=o._node;if(s._webAudio){var h=function(){s._refreshBuffer(o);var e=o._muted||s._muted?0:o._volume;l.gain.setValueAtTime(e,t.ctx.currentTime),o._playStart=t.ctx.currentTime,"undefined"==typeof l.bufferSource.start?o._loop?l.bufferSource.noteGrainOn(0,u,86400):l.bufferSource.noteGrainOn(0,u,c):o._loop?l.bufferSource.start(0,u,86400):l.bufferSource.start(0,u,c),d!==1/0&&(s._endTimers[o._id]=setTimeout(s._ended.bind(s,o),d)),r||setTimeout(function(){s._emit("play",o._id)},0)},p="running"===t.state;if("loaded"===s._state&&p)h();else{var _=p||"loaded"!==s._state?"load":"resume";s.once(_,h,p?o._id:null),s._clearTimer(o._id)}}else{var f=function(){l.currentTime=u,l.muted=o._muted||s._muted||t._muted||l.muted,l.volume=o._volume*t.volume(),l.playbackRate=o._rate,l.play(),d!==1/0&&(s._endTimers[o._id]=setTimeout(s._ended.bind(s,o),d)),r||s._emit("play",o._id)},m="loaded"===s._state&&(window&&window.ejecta||!l.readyState&&t._navigator.isCocoonJS);if(4===l.readyState||m)f();else{var g=function(){f(),l.removeEventListener(t._canPlayEvent,g,!1)};l.addEventListener(t._canPlayEvent,g,!1),s._clearTimer(o._id)}}return o._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),s=0;s<r.length;s++){t._clearTimer(r[s]);var i=t._soundById(r[s]);if(i&&!i._paused&&(i._seek=t.seek(r[s]),i._rateSeek=0,i._paused=!0,t._stopFade(r[s]),i._node))if(t._webAudio){if(!i._node.bufferSource)return t;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var r=this;if("loaded"!==r._state)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var s=r._getSoundIds(e),i=0;i<s.length;i++){r._clearTimer(s[i]);var n=r._soundById(s[i]);if(n&&(n._seek=n._start||0,n._rateSeek=0,n._paused=!0,n._ended=!0,r._stopFade(s[i]),n._node))if(r._webAudio){if(!n._node.bufferSource)return t||r._emit("stop",n._id),r;"undefined"==typeof n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),r._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||(n._node.currentTime=n._start||0,n._node.pause());n&&!t&&r._emit("stop",n._id)}return r},mute:function(e,r){var s=this;if("loaded"!==s._state)return s._queue.push({event:"mute",action:function(){s.mute(e,r)}}),s;if("undefined"==typeof r){if("boolean"!=typeof e)return s._muted;s._muted=e}for(var i=s._getSoundIds(r),n=0;n<i.length;n++){var a=s._soundById(i[n]);a&&(a._muted=e,s._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,t.ctx.currentTime):a._node&&(a._node.muted=t._muted?!0:e),s._emit("mute",a._id))}return s},volume:function(){var e,r,s=this,i=arguments;if(0===i.length)return s._volume;if(1===i.length||2===i.length&&"undefined"==typeof i[1]){var n=s._getSoundIds(),a=n.indexOf(i[0]);a>=0?r=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),r=parseInt(i[1],10));var o;if(!("undefined"!=typeof e&&e>=0&&1>=e))return o=r?s._soundById(r):s._sounds[0],o?o._volume:0;if("loaded"!==s._state)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,i)}}),s;"undefined"==typeof r&&(s._volume=e),r=s._getSoundIds(r);for(var u=0;u<r.length;u++)o=s._soundById(r[u]),o&&(o._volume=e,i[2]||s._stopFade(r[u]),s._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(e,t.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=e*t.volume()),s._emit("volume",o._id));return s},fade:function(e,r,s,i){var n=this,a=Math.abs(e-r),o=e>r?"out":"in",u=a/.01,c=u>0?s/u:s;if(4>c&&(u=Math.ceil(u/(4/c)),c=4),"loaded"!==n._state)return n._queue.push({event:"fade",action:function(){n.fade(e,r,s,i)}}),n;n.volume(e,i);for(var d=n._getSoundIds(i),l=0;l<d.length;l++){var h=n._soundById(d[l]);if(h){if(i||n._stopFade(d[l]),n._webAudio&&!h._muted){var p=t.ctx.currentTime,_=p+s/1e3;h._volume=e,h._node.gain.setValueAtTime(e,p),h._node.gain.linearRampToValueAtTime(r,_)}var f=e;h._interval=setInterval(function(t,s){u>0&&(f+="in"===o?.01:-.01),f=Math.max(0,f),f=Math.min(1,f),f=Math.round(100*f)/100,n._webAudio?("undefined"==typeof i&&(n._volume=f),s._volume=f):n.volume(f,t,!0),(e>r&&r>=f||r>e&&f>=r)&&(clearInterval(s._interval),s._interval=null,n.volume(r,t),n._emit("fade",t))}.bind(n,d[l],h),c)}}return n},_stopFade:function(e){var r=this,s=r._soundById(e);return s&&s._interval&&(r._webAudio&&s._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(s._interval),s._interval=null,r._emit("fade",e)),r},loop:function(){var e,t,r,s=this,i=arguments;if(0===i.length)return s._loop;if(1===i.length){if("boolean"!=typeof i[0])return r=s._soundById(parseInt(i[0],10)),r?r._loop:!1;e=i[0],s._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var n=s._getSoundIds(t),a=0;a<n.length;a++)r=s._soundById(n[a]),r&&(r._loop=e,s._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=e,e&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop)));return s},rate:function(){var e,r,s=this,i=arguments;if(0===i.length)r=s._sounds[0]._id;else if(1===i.length){var n=s._getSoundIds(),a=n.indexOf(i[0]);a>=0?r=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10));var o;if("number"!=typeof e)return o=s._soundById(r),o?o._rate:s._rate;if("loaded"!==s._state)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,i)}}),s;"undefined"==typeof r&&(s._rate=e),r=s._getSoundIds(r);for(var u=0;u<r.length;u++)if(o=s._soundById(r[u])){o._rateSeek=s.seek(r[u]),o._playStart=s._webAudio?t.ctx.currentTime:o._playStart,o._rate=e,s._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.value=e:o._node&&(o._node.playbackRate=e);var c=s.seek(r[u]),d=(s._sprite[o._sprite][0]+s._sprite[o._sprite][1])/1e3-c,l=1e3*d/Math.abs(o._rate);!s._endTimers[r[u]]&&o._paused||(s._clearTimer(r[u]),s._endTimers[r[u]]=setTimeout(s._ended.bind(s,o),l)),s._emit("rate",o._id)}return s},seek:function(){var e,r,s=this,i=arguments;if(0===i.length)r=s._sounds[0]._id;else if(1===i.length){var n=s._getSoundIds(),a=n.indexOf(i[0]);a>=0?r=parseInt(i[0],10):(r=s._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10));if("undefined"==typeof r)return s;if("loaded"!==s._state)return s._queue.push({event:"seek",action:function(){s.seek.apply(s,i)}}),s;var o=s._soundById(r);if(o){if(!("number"==typeof e&&e>=0)){if(s._webAudio){var u=s.playing(r)?t.ctx.currentTime-o._playStart:0,c=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(c+u*Math.abs(o._rate))}return o._node.currentTime}var d=s.playing(r);d&&s.pause(r,!0),o._seek=e,o._ended=!1,s._clearTimer(r),d&&s.play(r,!0),!s._webAudio&&o._node&&(o._node.currentTime=e),s._emit("seek",r)}return s},playing:function(e){var t=this;if("number"==typeof e){var r=t._soundById(e);return r?!r._paused:!1}for(var s=0;s<t._sounds.length;s++)if(!t._sounds[s]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,s=t._soundById(e);return s&&(r=t._sprite[s._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,s=0;s<r.length;s++){r[s]._paused||e.stop(r[s]._id),e._webAudio||(r[s]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",r[s]._node.removeEventListener("error",r[s]._errorFn,!1),r[s]._node.removeEventListener(t._canPlayEvent,r[s]._loadFn,!1)),delete r[s]._node,e._clearTimer(r[s]._id);var n=t._howls.indexOf(e);n>=0&&t._howls.splice(n,1)}var a=!0;for(s=0;s<t._howls.length;s++)if(t._howls[s]._src===e._src){a=!1;break}return i&&a&&delete i[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,r,s){var i=this,n=i["_on"+e];return"function"==typeof t&&n.push(s?{id:r,fn:t,once:s}:{id:r,fn:t}),i},off:function(e,t,r){var s=this,i=s["_on"+e],n=0;if(t){for(n=0;n<i.length;n++)if(t===i[n].fn&&r===i[n].id){i.splice(n,1);break}}else if(e)s["_on"+e]=[];else{var a=Object.keys(s);for(n=0;n<a.length;n++)0===a[n].indexOf("_on")&&Array.isArray(s[a[n]])&&(s[a[n]]=[])}return s},once:function(e,t,r){var s=this;return s.on(e,t,r,1),s},_emit:function(e,t,r){for(var s=this,i=s["_on"+e],n=i.length-1;n>=0;n--)i[n].id&&i[n].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,r)}.bind(s,i[n].fn),0),i[n].once&&s.off(e,i[n].fn,i[n].id));return s},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var r=this,s=e._sprite,i=!(!e._loop&&!r._sprite[s][2]);if(r._emit("end",e._id),!r._webAudio&&i&&r.stop(e._id,!0).play(e._id),r._webAudio&&i){r._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var n=1e3*(e._stop-e._start)/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),n)}return r._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,r._clearTimer(e._id),r._cleanBuffer(e._node),t._autoSuspend()),r._webAudio||i||r.stop(e._id),r},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new s(e)},_drain:function(){var e=this,t=e._pool,r=0,s=0;if(!(e._sounds.length<t)){for(s=0;s<e._sounds.length;s++)e._sounds[s]._ended&&r++;for(s=e._sounds.length-1;s>=0;s--){if(t>=r)return;e._sounds[s]._ended&&(e._webAudio&&e._sounds[s]._node&&e._sounds[s]._node.disconnect(0),e._sounds.splice(s,1),r--)}}},_getSoundIds:function(e){var t=this;if("undefined"==typeof e){for(var r=[],s=0;s<t._sounds.length;s++)r.push(t._sounds[s]._id);return r}return[e]},_refreshBuffer:function(e){var r=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=i[r._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,r},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(r){}}return e.bufferSource=null,t}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._muted=r._muted,e._rate=r._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,r._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,s=t._muted||e._muted||e._parent._muted?0:e._volume;return r._webAudio?(e._node="undefined"==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(s,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._node.src=r._src,e._node.preload="auto",e._node.volume=s*t.volume(),e._node.load()),e},reset:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._muted=r._muted,e._rate=r._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,r=e._parent;r._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(r._sprite).length&&(r._sprite={__default:[0,1e3*r._duration]}),"loaded"!==r._state&&(r._state="loaded",r._emit("load"),r._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)}};var i={},n=function(e){var t=e._src;if(i[t])return e._duration=i[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),s=new Uint8Array(r.length),n=0;n<r.length;++n)s[n]=r.charCodeAt(n);o(s.buffer,e)}else{var c=new XMLHttpRequest;c.open("GET",t,!0),c.responseType="arraybuffer",c.onload=function(){var t=(c.status+"")[0];return"0"!==t&&"2"!==t&&"3"!==t?void e._emit("loaderror",null,"Failed loading audio file with status: "+c.status+"."):void o(c.response,e)},c.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete i[t],e.load())},a(c)}},a=function(e){try{e.send()}catch(t){e.onerror()}},o=function(e,r){t.ctx.decodeAudioData(e,function(e){e&&r._sounds.length>0&&(i[r._src]=e,u(r,e))},function(){r._emit("loaderror",null,"Decoding audio data failed.")})},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),s=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=s?parseInt(s[1],10):null;if(r&&i&&9>i){var n=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());(t._navigator&&t._navigator.standalone&&!n||t._navigator&&!t._navigator.standalone&&!n)&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain="undefined"==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.value=1,t.masterGain.connect(t.ctx.destination)),t._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:t,Howl:r}}),"undefined"!=typeof exports&&(exports.Howler=t,exports.Howl=r),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=s):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=t,global.Howl=r,global.Sound=s)}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.PreloadJS=createjs.PreloadJS||{};e.version="0.6.2",e.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var r=e.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(r)||r.__proto__;if(s){r[(t+="_")+"constructor"]=s.constructor;for(var i in s)r.hasOwnProperty(i)&&"function"==typeof s[i]&&(r[t+i]=s[i])}return e},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var r=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(r))}}}(),this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var r=0,s=e.length;s>r;r++)if(t===e[r])return r;return-1},this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!r,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r){this.Event_constructor("error"),this.title=e,this.message=t,this.data=r}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,r){var s;s=r?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=s[e];return i&&this.removeEventListener(e,t,r),i=s[e],i?i.push(t):s[e]=[t],t},t.on=function(e,t,r,s,i,n){return t.handleEvent&&(r=r||t,t=t.handleEvent),r=r||this,this.addEventListener(e,function(e){t.call(r,e,i),s&&e.remove()},n)},t.removeEventListener=function(e,t,r){var s=r?this._captureListeners:this._listeners;if(s){var i=s[e];if(i)for(var n=0,a=i.length;a>n;n++)if(i[n]==t){1==a?delete s[e]:i.splice(n,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,r){if("string"==typeof e){var s=this._listeners;if(!(t||s&&s[e]))return!0;e=new createjs.Event(e,t,r);
}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(i){}if(e.bubbles&&this.parent){for(var n=this,a=[n];n.parent;)a.push(n=n.parent);var o,u=a.length;for(o=u-1;o>=0&&!e.propagationStopped;o--)a[o]._dispatchEvent(e,1+(0==o));for(o=1;u>o&&!e.propagationStopped;o++)a[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,r=this._captureListeners;return!!(t&&t[e]||r&&r[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var r,s=1==t?this._captureListeners:this._listeners;if(e&&s){var i=s[e.type];if(!i||!(r=i.length))return;try{e.currentTarget=this}catch(n){}try{e.eventPhase=t}catch(n){}e.removed=!1,i=i.slice();for(var a=0;r>a&&!e.immediatePropagationStopped;a++){var o=i[a];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(e){"use strict";function t(e,t){this.Event_constructor("progress"),this.loaded=e,this.total=null==t?1:t,this.progress=0==t?0:this.loaded/this.total}var r=createjs.extend(t,createjs.Event);r.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),function(){function e(t,s){function n(e){if(n[e]!==m)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var r,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=s.stringify,d="function"==typeof u&&y;if(d){(r=function(){return 1}).toJSON=r;try{d="0"===u(0)&&"0"===u(new a)&&'""'==u(new o)&&u(v)===m&&u(m)===m&&u()===m&&"1"===u(r)&&"[1]"==u([r])&&"[null]"==u([m])&&"null"==u(null)&&"[null,null,null]"==u([m,v,null])&&u({a:[r,!0,!1,null,"\x00\b\n\f\r	"]})==i&&"1"===u(null,r)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(l){d=!1}}t=d}if("json-parse"==e){var h=s.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){r=h(i);var p=5==r.a.length&&1===r.a[0];if(p){try{p=!h('"	"')}catch(l){}if(p)try{p=1!==h("01")}catch(l){}if(p)try{p=1!==h("1.")}catch(l){}}}}catch(l){p=!1}t=p}}return n[e]=!!t}t||(t=i.Object()),s||(s=i.Object());var a=t.Number||i.Number,o=t.String||i.String,u=t.Object||i.Object,c=t.Date||i.Date,d=t.SyntaxError||i.SyntaxError,l=t.TypeError||i.TypeError,h=t.Math||i.Math,p=t.JSON||i.JSON;"object"==typeof p&&p&&(s.stringify=p.stringify,s.parse=p.parse);var _,f,m,g=u.prototype,v=g.toString,y=new c(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(L){}if(!n("json")){var b="[object Function]",S="[object Date]",E="[object Number]",A="[object String]",w="[object Array]",T="[object Boolean]",I=n("bug-string-char-index");if(!y)var O=h.floor,R=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(e,t){return R[t]+365*(e-1970)+O((e-1969+(t=+(t>1)))/4)-O((e-1901+t)/100)+O((e-1601+t)/400)};if((_=g.hasOwnProperty)||(_=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?_=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,_=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,_.call(this,e)}),f=function(e,t){var s,i,n,a=0;(s=function(){this.valueOf=0}).prototype.valueOf=0,i=new s;for(n in i)_.call(i,n)&&a++;return s=i=null,a?f=2==a?function(e,t){var r,s={},i=v.call(e)==b;for(r in e)i&&"prototype"==r||_.call(s,r)||!(s[r]=1)||!_.call(e,r)||t(r)}:function(e,t){var r,s,i=v.call(e)==b;for(r in e)i&&"prototype"==r||!_.call(e,r)||(s="constructor"===r)||t(r);(s||_.call(e,r="constructor"))&&t(r)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],f=function(e,t){var s,n,a=v.call(e)==b,o=!a&&"function"!=typeof e.constructor&&r[typeof e.hasOwnProperty]&&e.hasOwnProperty||_;for(s in e)a&&"prototype"==s||!o.call(e,s)||t(s);for(n=i.length;s=i[--n];o.call(e,s)&&t(s));}),f(e,t)},!n("json-stringify")){var P={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},x="000000",C=function(e,t){return(x+(t||0)).slice(-e)},M="\\u00",D=function(e){for(var t='"',r=0,s=e.length,i=!I||s>10,n=i&&(I?e.split(""):e);s>r;r++){var a=e.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=P[a];break;default:if(32>a){t+=M+C(2,a.toString(16));break}t+=i?n[r]:e.charAt(r)}}return t+'"'},N=function(e,t,r,s,i,n,a){var o,u,c,d,h,p,g,y,L,b,I,R,P,x,M,G;try{o=t[e]}catch(U){}if("object"==typeof o&&o)if(u=v.call(o),u!=S||_.call(o,"toJSON"))"function"==typeof o.toJSON&&(u!=E&&u!=A&&u!=w||_.call(o,"toJSON"))&&(o=o.toJSON(e));else if(o>-1/0&&1/0>o){if(j){for(h=O(o/864e5),c=O(h/365.2425)+1970-1;j(c+1,0)<=h;c++);for(d=O((h-j(c,0))/30.42);j(c,d+1)<=h;d++);h=1+h-j(c,d),p=(o%864e5+864e5)%864e5,g=O(p/36e5)%24,y=O(p/6e4)%60,L=O(p/1e3)%60,b=p%1e3}else c=o.getUTCFullYear(),d=o.getUTCMonth(),h=o.getUTCDate(),g=o.getUTCHours(),y=o.getUTCMinutes(),L=o.getUTCSeconds(),b=o.getUTCMilliseconds();o=(0>=c||c>=1e4?(0>c?"-":"+")+C(6,0>c?-c:c):C(4,c))+"-"+C(2,d+1)+"-"+C(2,h)+"T"+C(2,g)+":"+C(2,y)+":"+C(2,L)+"."+C(3,b)+"Z"}else o=null;if(r&&(o=r.call(t,e,o)),null===o)return"null";if(u=v.call(o),u==T)return""+o;if(u==E)return o>-1/0&&1/0>o?""+o:"null";if(u==A)return D(""+o);if("object"==typeof o){for(x=a.length;x--;)if(a[x]===o)throw l();if(a.push(o),I=[],M=n,n+=i,u==w){for(P=0,x=o.length;x>P;P++)R=N(P,o,r,s,i,n,a),I.push(R===m?"null":R);G=I.length?i?"[\n"+n+I.join(",\n"+n)+"\n"+M+"]":"["+I.join(",")+"]":"[]"}else f(s||o,function(e){var t=N(e,o,r,s,i,n,a);t!==m&&I.push(D(e)+":"+(i?" ":"")+t)}),G=I.length?i?"{\n"+n+I.join(",\n"+n)+"\n"+M+"}":"{"+I.join(",")+"}":"{}";return a.pop(),G}};s.stringify=function(e,t,s){var i,n,a,o;if(r[typeof t]&&t)if((o=v.call(t))==b)n=t;else if(o==w){a={};for(var u,c=0,d=t.length;d>c;u=t[c++],o=v.call(u),(o==A||o==E)&&(a[u]=1));}if(s)if((o=v.call(s))==E){if((s-=s%1)>0)for(i="",s>10&&(s=10);i.length<s;i+=" ");}else o==A&&(i=s.length<=10?s:s.slice(0,10));return N("",(u={},u[""]=e,u),n,a,i,"",[])}}if(!n("json-parse")){var G,U,k=o.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},F=function(){throw G=U=null,d()},q=function(){for(var e,t,r,s,i,n=U,a=n.length;a>G;)switch(i=n.charCodeAt(G)){case 9:case 10:case 13:case 32:G++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=I?n.charAt(G):n[G],G++,e;case 34:for(e="@",G++;a>G;)if(i=n.charCodeAt(G),32>i)F();else if(92==i)switch(i=n.charCodeAt(++G)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=H[i],G++;break;case 117:for(t=++G,r=G+4;r>G;G++)i=n.charCodeAt(G),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||F();e+=k("0x"+n.slice(t,G));break;default:F()}else{if(34==i)break;for(i=n.charCodeAt(G),t=G;i>=32&&92!=i&&34!=i;)i=n.charCodeAt(++G);e+=n.slice(t,G)}if(34==n.charCodeAt(G))return G++,e;F();default:if(t=G,45==i&&(s=!0,i=n.charCodeAt(++G)),i>=48&&57>=i){for(48==i&&(i=n.charCodeAt(G+1),i>=48&&57>=i)&&F(),s=!1;a>G&&(i=n.charCodeAt(G),i>=48&&57>=i);G++);if(46==n.charCodeAt(G)){for(r=++G;a>r&&(i=n.charCodeAt(r),i>=48&&57>=i);r++);r==G&&F(),G=r}if(i=n.charCodeAt(G),101==i||69==i){for(i=n.charCodeAt(++G),43!=i&&45!=i||G++,r=G;a>r&&(i=n.charCodeAt(r),i>=48&&57>=i);r++);r==G&&F(),G=r}return+n.slice(t,G)}if(s&&F(),"true"==n.slice(G,G+4))return G+=4,!0;if("false"==n.slice(G,G+5))return G+=5,!1;if("null"==n.slice(G,G+4))return G+=4,null;F()}return"$"},B=function(e){var t,r;if("$"==e&&F(),"string"==typeof e){if("@"==(I?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=q(),"]"!=e;r||(r=!0))r&&(","==e?(e=q(),"]"==e&&F()):F()),","==e&&F(),t.push(B(e));return t}if("{"==e){for(t={};e=q(),"}"!=e;r||(r=!0))r&&(","==e?(e=q(),"}"==e&&F()):F()),","!=e&&"string"==typeof e&&"@"==(I?e.charAt(0):e[0])&&":"==q()||F(),t[e.slice(1)]=B(q());return t}F()}return e},X=function(e,t,r){var s=V(e,t,r);s===m?delete e[t]:e[t]=s},V=function(e,t,r){var s,i=e[t];if("object"==typeof i&&i)if(v.call(i)==w)for(s=i.length;s--;)X(i,s,r);else f(i,function(e){X(i,e,r)});return r.call(e,t,i)};s.parse=function(e,t){var r,s;return G=0,U=""+e,r=B(q()),"$"!=q()&&F(),G=U=null,t&&v.call(t)==b?V((s={},s[""]=r,s),"",t):r}}}return s.runInContext=e,s}var t="function"==typeof define&&define.amd,r={"function":!0,object:!0},s=r[typeof exports]&&exports&&!exports.nodeType&&exports,i=r[typeof window]&&window||this,n=s&&r[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!n||n.global!==n&&n.window!==n&&n.self!==n||(i=n),s&&!t)e(i,s);else{var a=i.JSON,o=i.JSON3,u=!1,c=e(i,i.JSON3={noConflict:function(){return u||(u=!0,i.JSON=a,i.JSON3=o,a=o=null),c}});i.JSON={parse:c.parse,stringify:c.stringify}}t&&define(function(){return c})}.call(this),function(){var e={};e.appendToHead=function(t){e.getHead().appendChild(t)},e.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},e.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},createjs.DomUtils=e}(),function(){var e={};e.parseXML=function(e,t){var r=null;try{if(window.DOMParser){var s=new DOMParser;r=s.parseFromString(e,t)}}catch(i){}if(!r)try{r=new ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(e)}catch(i){r=null}return r},e.parseJSON=function(e){if(null==e)return null;try{return JSON.parse(e)}catch(t){throw t}},createjs.DataUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=r.LOAD_TIMEOUT_DEFAULT}var t=e.prototype={},r=e;r.LOAD_TIMEOUT_DEFAULT=8e3,r.create=function(t){if("string"==typeof t){var s=new e;return s.src=t,s}if(t instanceof r)return t;if(t instanceof Object&&t.src)return null==t.loadTimeout&&(t.loadTimeout=r.LOAD_TIMEOUT_DEFAULT),t;throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},createjs.LoadItem=r}(),function(){var e={};e.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,e.RELATIVE_PATT=/^[.\/]*?\//i,e.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,e.parseURI=function(t){var r={absolute:!1,relative:!1};if(null==t)return r;var s=t.indexOf("?");s>-1&&(t=t.substr(0,s));var i;return e.ABSOLUTE_PATT.test(t)?r.absolute=!0:e.RELATIVE_PATT.test(t)&&(r.relative=!0),(i=t.match(e.EXTENSION_PATT))&&(r.extension=i[1].toLowerCase()),r},e.formatQueryString=function(e,t){if(null==e)throw new Error("You must specify data.");var r=[];for(var s in e)r.push(s+"="+escape(e[s]));return t&&(r=r.concat(t)),r.join("&")},e.buildPath=function(e,t){if(null==t)return e;var r=[],s=e.indexOf("?");if(-1!=s){var i=e.slice(s+1);r=r.concat(i.split("&"))}return-1!=s?e.slice(0,s)+"?"+this.formatQueryString(t,r):e+"?"+this.formatQueryString(t,r)},e.isCrossDomain=function(e){var t=document.createElement("a");t.href=e.src;var r=document.createElement("a");r.href=location.href;var s=""!=t.hostname&&(t.port!=r.port||t.protocol!=r.protocol||t.hostname!=r.hostname);return s},e.isLocal=function(e){var t=document.createElement("a");return t.href=e.src,""==t.hostname&&"file:"==t.protocol},e.isBinary=function(e){switch(e){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},e.isImageTag=function(e){return e instanceof HTMLImageElement},e.isAudioTag=function(e){return window.HTMLAudioElement?e instanceof HTMLAudioElement:!1},e.isVideoTag=function(e){return window.HTMLVideoElement?e instanceof HTMLVideoElement:!1},e.isText=function(e){switch(e){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},e.getTypeByExtension=function(e){if(null==e)return createjs.AbstractLoader.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=r,this.resultFormatter=null,e?this._item=createjs.LoadItem.create(e):this._item=null,this._preferXHR=t,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var t=createjs.extend(e,createjs.EventDispatcher),r=e;r.POST="POST",r.GET="GET",r.BINARY="binary",r.CSS="css",r.IMAGE="image",r.JAVASCRIPT="javascript",r.JSON="json",r.JSONP="jsonp",r.MANIFEST="manifest",r.SOUND="sound",r.VIDEO="video",r.SPRITESHEET="spritesheet",r.SVG="svg",r.TEXT="text",r.XML="xml",t.getItem=function(){return this._item},t.getResult=function(e){return e?this._rawResult:this._result},t.getTag=function(){return this._tag},t.setTag=function(e){this._tag=e},t.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var e=new createjs.Event("initialize");e.loader=this._request,this.dispatchEvent(e),this._request.load()},t.cancel=function(){this.canceled=!0,this.destroy()},t.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.getLoadedItems=function(){return this._loadedItems},t._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._createTag=function(e){return null},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.ProgressEvent(this.progress)):(t=e,this.progress=e.loaded/e.total,t.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var e=new createjs.Event("complete");e.rawResult=this._rawResult,null!=this._result&&(e.result=this._result),this.dispatchEvent(e)}},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(e))},t._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},t.resultFormatter=null,t.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response;var t=this.resultFormatter&&this.resultFormatter(this);t instanceof Function?t.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=t||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(e);break;case"error":this._sendError(e);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+e.type.toUpperCase()+"_ERROR"))}},t._resultFormatSuccess=function(e){this._result=e,this._sendComplete()},t._resultFormatFailed=function(e){this._sendError(e)},t.buildPath=function(e,t){return createjs.RequestUtils.buildPath(e,t)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r){this.AbstractLoader_constructor(e,t,r),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader);t.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},t._createTag=function(){},t._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._updateXHR=function(e){e.loader.setResponseType&&e.loader.setResponseType("blob")},t._formatResult=function(e){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var t=window.URL||window.webkitURL,r=e.getResult(!0);e.getTag().src=t.createObjectURL(r)}return e.getTag()},createjs.AbstractMediaLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e){this._item=e},t=createjs.extend(e,createjs.EventDispatcher);t.load=function(){},t.destroy=function(){},t.cancel=function(){},createjs.AbstractRequest=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=r,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var t=createjs.extend(e,createjs.AbstractRequest);t.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var e=new createjs.Event("initialize");e.loader=this._tag,this.dispatchEvent(e),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},t.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;"loaded"!=e.readyState&&"complete"!=e.readyState||this._handleTagComplete()},t._handleError=function(){this._clean(),this.dispatchEvent("error")},t._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},t._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},t._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},t._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},t._showTag=function(){this._tag.style.visibility=this._startTagVisibility},t._handleStalled=function(){},createjs.TagRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=r,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var t=createjs.extend(e,createjs.TagRequest);t.load=function(){var e=createjs.proxy(this._handleStalled,this);this._stalledCallback=e;var t=createjs.proxy(this._handleProgress,this);this._handleProgress=t,this._tag.addEventListener("stalled",e),this._tag.addEventListener("progress",t),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;"loaded"!=e.readyState&&"complete"!=e.readyState||this._handleTagComplete()},t._handleStalled=function(){},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(e,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractRequest_constructor(e),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(e)}var t=createjs.extend(e,createjs.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null==this._request)return void this._handleError();null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(e){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,e))}},t.setResponseType=function(e){"blob"===e&&(e=window.URL?"blob":"arraybuffer",this._responseType=e),this._request.responseType=e},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._handleLoadStart=function(e){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},t._handleAbort=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,e))},t._handleError=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(e.message))},t._handleReadyStateChange=function(e){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(e){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(r){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===r.name&&window.BlobBuilder){var s=new BlobBuilder;s.append(this._response),this._response=s.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},t._handleTimeout=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,e))},t._checkError=function(){var e=parseInt(this._request.status);switch(e){case 404:case 0:return new Error(e)}return null},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=createjs.RequestUtils.isCrossDomain(e),r={},i=null;if(window.XMLHttpRequest)i=new XMLHttpRequest,t&&void 0===i.withCredentials&&window.XDomainRequest&&(i=new XDomainRequest);else{for(var n=0,a=s.ACTIVEX_VERSIONS.length;a>n;n++){var o=s.ACTIVEX_VERSIONS[n];try{i=new ActiveXObject(o);break}catch(u){}}if(null==i)return!1}null==e.mimeType&&createjs.RequestUtils.isText(e.type)&&(e.mimeType="text/plain; charset=utf-8"),e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),this._xhrLevel="string"==typeof i.responseType?2:1;var c=null;if(c=e.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(e.src,e.values):e.src,i.open(e.method||createjs.AbstractLoader.GET,c,!0),t&&i instanceof XMLHttpRequest&&1==this._xhrLevel&&(r.Origin=location.origin),e.values&&e.method==createjs.AbstractLoader.POST&&(r["Content-Type"]="application/x-www-form-urlencoded"),t||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),e.headers)for(var d in e.headers)r[d]=e.headers[d];for(d in r)i.setRequestHeader(d,r[d]);return i instanceof XMLHttpRequest&&void 0!==e.withCredentials&&(i.withCredentials=e.withCredentials),this._request=i,!0},t._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},t.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(e,t,r)}var t=createjs.extend(e,createjs.AbstractLoader),r=e;t.init=function(e,t,r){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(e),this._paused=!1,this._basePath=t,this._crossOrigin=r,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},r.loadTimeout=8e3,r.LOAD_TIMEOUT=0,r.BINARY=createjs.AbstractLoader.BINARY,r.CSS=createjs.AbstractLoader.CSS,r.IMAGE=createjs.AbstractLoader.IMAGE,r.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,r.JSON=createjs.AbstractLoader.JSON,r.JSONP=createjs.AbstractLoader.JSONP,r.MANIFEST=createjs.AbstractLoader.MANIFEST,r.SOUND=createjs.AbstractLoader.SOUND,r.VIDEO=createjs.AbstractLoader.VIDEO,r.SVG=createjs.AbstractLoader.SVG,r.TEXT=createjs.AbstractLoader.TEXT,r.XML=createjs.AbstractLoader.XML,r.POST=createjs.AbstractLoader.POST,r.GET=createjs.AbstractLoader.GET,t.registerLoader=function(e){if(!e||!e.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(e))throw new Error("loader already exists.");this._availableLoaders.unshift(e)},t.unregisterLoader=function(e){var t=this._availableLoaders.indexOf(e);-1!=t&&t<this._defaultLoaderLength-1&&this._availableLoaders.splice(t,1)},t.setUseXHR=function(e){return this.setPreferXHR(e)},t.setPreferXHR=function(e){return this.preferXHR=0!=e&&null!=window.XMLHttpRequest,this.preferXHR},t.removeAll=function(){this.remove()},t.remove=function(e){var t=null;if(e&&!Array.isArray(e))t=[e];else if(e)t=e;else if(arguments.length>0)return;var r=!1;if(t){for(;t.length;){var s=t.pop(),i=this.getResult(s);for(n=this._loadQueue.length-1;n>=0;n--)if(a=this._loadQueue[n].getItem(),a.id==s||a.src==s){this._loadQueue.splice(n,1)[0].cancel();break}for(n=this._loadQueueBackup.length-1;n>=0;n--)if(a=this._loadQueueBackup[n].getItem(),a.id==s||a.src==s){this._loadQueueBackup.splice(n,1)[0].cancel();break}if(i)this._disposeItem(this.getItem(s));else for(var n=this._currentLoads.length-1;n>=0;n--){var a=this._currentLoads[n].getItem();if(a.id==s||a.src==s){this._currentLoads.splice(n,1)[0].cancel(),r=!0;break}}}r&&this._loadNext()}else{this.close();for(var o in this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.preferXHR,this._basePath)}},t.reset=function(){this.close();for(var e in this._loadItemsById)this._disposeItem(this._loadItemsById[e]);for(var t=[],r=0,s=this._loadQueueBackup.length;s>r;r++)t.push(this._loadQueueBackup[r].getItem());this.loadManifest(t,!1)},t.installPlugin=function(e){if(null!=e&&null!=e.getPreloadHandlers){this._plugins.push(e);var t=e.getPreloadHandlers();if(t.scope=e,null!=t.types)for(var r=0,s=t.types.length;s>r;r++)this._typeCallbacks[t.types[r]]=t;if(null!=t.extensions)for(r=0,s=t.extensions.length;s>r;r++)this._extensionCallbacks[t.extensions[r]]=t}},t.setMaxConnections=function(e){this._maxConnections=e,!this._paused&&this._loadQueue.length>0&&this._loadNext()},t.loadFile=function(e,t,r){if(null==e){var s=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(s)}this._addItem(e,null,r),t!==!1?this.setPaused(!1):this.setPaused(!0)},t.loadManifest=function(e,t,s){var i=null,n=null;if(Array.isArray(e)){if(0==e.length){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(a)}i=e}else if("string"==typeof e)i=[{src:e,type:r.MANIFEST}];else{if("object"!=typeof e){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");
return void this._sendError(a)}if(void 0!==e.src){if(null==e.type)e.type=r.MANIFEST;else if(e.type!=r.MANIFEST){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(a)}i=[e]}else void 0!==e.manifest&&(i=e.manifest,n=e.path)}for(var o=0,u=i.length;u>o;o++)this._addItem(i[o],n,s);t!==!1?this.setPaused(!1):this.setPaused(!0)},t.load=function(){this.setPaused(!1)},t.getItem=function(e){return this._loadItemsById[e]||this._loadItemsBySrc[e]},t.getResult=function(e,t){var r=this._loadItemsById[e]||this._loadItemsBySrc[e];if(null==r)return null;var s=r.id;return t&&this._loadedRawResults[s]?this._loadedRawResults[s]:this._loadedResults[s]},t.getItems=function(e){var t=[];for(var r in this._loadItemsById){var s=this._loadItemsById[r],i=this.getResult(r);e===!0&&null==i||t.push({item:s,result:i,rawResult:this.getResult(r,!0)})}return t},t.setPaused=function(e){this._paused=e,this._paused||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},t._addItem=function(e,t,r){var s=this._createLoadItem(e,t,r);if(null!=s){var i=this._createLoader(s);null!=i&&("plugins"in i&&(i.plugins=this._plugins),s._loader=i,this._loadQueue.push(i),this._loadQueueBackup.push(i),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&s.type==createjs.LoadQueue.JAVASCRIPT||s.maintainOrder===!0)&&(this._scriptOrder.push(s),this._loadedScripts.push(null)))}},t._createLoadItem=function(e,t,r){var s=createjs.LoadItem.create(e);if(null==s)return null;var i="",n=r||this._basePath;if(s.src instanceof Object){if(!s.type)return null;if(t){i=t;var a=createjs.RequestUtils.parseURI(t);null==n||a.absolute||a.relative||(i=n+i)}else null!=n&&(i=n)}else{var o=createjs.RequestUtils.parseURI(s.src);o.extension&&(s.ext=o.extension),null==s.type&&(s.type=createjs.RequestUtils.getTypeByExtension(s.ext));var u=s.src;if(!o.absolute&&!o.relative)if(t){i=t;var a=createjs.RequestUtils.parseURI(t);u=t+u,null==n||a.absolute||a.relative||(i=n+i)}else null!=n&&(i=n);s.src=i+s.src}s.path=i,void 0!==s.id&&null!==s.id&&""!==s.id||(s.id=u);var c=this._typeCallbacks[s.type]||this._extensionCallbacks[s.ext];if(c){var d=c.callback.call(c.scope,s,this);if(d===!1)return null;d===!0||null!=d&&(s._loader=d),o=createjs.RequestUtils.parseURI(s.src),null!=o.extension&&(s.ext=o.extension)}return this._loadItemsById[s.id]=s,this._loadItemsBySrc[s.src]=s,null==s.crossOrigin&&(s.crossOrigin=this._crossOrigin),s},t._createLoader=function(e){if(null!=e._loader)return e._loader;for(var t=this.preferXHR,r=0;r<this._availableLoaders.length;r++){var s=this._availableLoaders[r];if(s&&s.canLoadItem(e))return new s(e,t)}return null},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var e=0;e<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);e++){var t=this._loadQueue[e];this._canStartLoad(t)&&(this._loadQueue.splice(e,1),e--,this._loadItem(t))}}},t._loadItem=function(e){e.on("fileload",this._handleFileLoad,this),e.on("progress",this._handleProgress,this),e.on("complete",this._handleFileComplete,this),e.on("error",this._handleError,this),e.on("fileerror",this._handleFileError,this),this._currentLoads.push(e),this._sendFileStart(e.getItem()),e.load()},t._handleFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleFileError=function(e){var t=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.item);this._sendError(t)},t._handleError=function(e){var t=e.target;this._numItemsLoaded++,this._finishOrderedItem(t,!0),this._updateProgress();var r=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.getItem());this._sendError(r),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(t),this._cleanLoadItem(t),this._loadNext())},t._handleFileComplete=function(e){var t=e.target,r=t.getItem(),s=t.getResult();this._loadedResults[r.id]=s;var i=t.getResult(!0);null!=i&&i!==s&&(this._loadedRawResults[r.id]=i),this._saveLoadedItems(t),this._removeLoadItem(t),this._finishOrderedItem(t)||this._processFinishedLoad(r,t),this._cleanLoadItem(t)},t._saveLoadedItems=function(e){var t=e.getLoadedItems();if(null!==t)for(var r=0;r<t.length;r++){var s=t[r].item;this._loadItemsBySrc[s.src]=s,this._loadItemsById[s.id]=s,this._loadedResults[s.id]=t[r].result,this._loadedRawResults[s.id]=t[r].rawResult}},t._finishOrderedItem=function(e,t){var r=e.getItem();if(this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT||r.maintainOrder){e instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var s=createjs.indexOf(this._scriptOrder,r);return-1==s?!1:(this._loadedScripts[s]=t===!0?!0:r,this._checkScriptLoadOrder(),!0)}return!1},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;e>t;t++){var r=this._loadedScripts[t];if(null===r)break;if(r!==!0){var s=this._loadedResults[r.id];r.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(s);var i=r._loader;this._processFinishedLoad(r,i),this._loadedScripts[t]=!0}}},t._processFinishedLoad=function(e,t){if(this._numItemsLoaded++,!this.maintainScriptOrder&&e.type==createjs.LoadQueue.JAVASCRIPT){var r=t.getTag();createjs.DomUtils.appendToHead(r)}this._updateProgress(),this._sendFileComplete(e,t),this._loadNext()},t._canStartLoad=function(e){if(!this.maintainScriptOrder||e.preferXHR)return!0;var t=e.getItem();if(t.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var r=this._scriptOrder.indexOf(t),s=0;r>s;){var i=this._loadedScripts[s];if(null==i)return!1;s++}return this._currentlyLoadingScript=!0,!0},t._removeLoadItem=function(e){for(var t=this._currentLoads.length,r=0;t>r;r++)if(this._currentLoads[r]==e){this._currentLoads.splice(r,1);break}},t._cleanLoadItem=function(e){var t=e.getItem();t&&delete t._loader},t._handleProgress=function(e){var t=e.target;this._sendFileProgress(t.getItem(),t.progress),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var r=0,s=0,i=this._currentLoads.length;i>s;s++)r+=this._currentLoads[s].progress;e+=r/t*(t/this._numItems)}this._lastProgress!=e&&(this._sendProgress(e),this._lastProgress=e)},t._disposeItem=function(e){delete this._loadedResults[e.id],delete this._loadedRawResults[e.id],delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src]},t._sendFileProgress=function(e,t){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var r=new createjs.Event("fileprogress");r.progress=t,r.loaded=t,r.total=1,r.item=e,this.dispatchEvent(r)}},t._sendFileComplete=function(e,t){if(!this._isCanceled()&&!this._paused){var r=new createjs.Event("fileload");r.loader=t,r.item=e,r.result=this._loadedResults[e.id],r.rawResult=this._loadedRawResults[e.id],e.completeHandler&&e.completeHandler(r),this.hasEventListener("fileload")&&this.dispatchEvent(r)}},t._sendFileStart=function(e){var t=new createjs.Event("filestart");t.item=e,this.hasEventListener("filestart")&&this.dispatchEvent(t)},t.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.TEXT)}var t=(createjs.extend(e,createjs.AbstractLoader),e);t.canLoadItem=function(e){return e.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.BINARY},t._updateXHR=function(e){e.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",t?this._tag=document.createElement("style"):this._tag=document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.CSS},t._formatResult=function(e){if(this._preferXHR){var t=e.getTag();if(t.styleSheet)t.styleSheet.cssText=e.getResult(!0);else{var r=document.createTextNode(e.getResult(!0));t.appendChild(r)}}else t=this._tag;return createjs.DomUtils.appendToHead(t),t},createjs.CSSLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(e)?this._tag=e:createjs.RequestUtils.isImageTag(e.src)?this._tag=e.src:createjs.RequestUtils.isImageTag(e.tag)&&(this._tag=e.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.IMAGE},t.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var e=this._item.crossOrigin;1==e&&(e="Anonymous"),null==e||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=e),this.AbstractLoader_load()},t._updateXHR=function(e){e.loader.mimeType="text/plain; charset=x-user-defined-binary",e.loader.setResponseType&&e.loader.setResponseType("blob")},t._formatResult=function(e){return this._formatImage},t._formatImage=function(e,t){var r=this._tag,s=window.URL||window.webkitURL;if(this._preferXHR)if(s){var i=s.createObjectURL(this.getResult(!0));r.src=i,r.addEventListener("load",this._cleanUpURL,!1),r.addEventListener("error",this._cleanUpURL,!1)}else r.src=this._item.src;else;r.complete?e(r):(r.onload=createjs.proxy(function(){e(this._tag)},this),r.onerror=createjs.proxy(function(){t(_this._tag)},this))},t._cleanUpURL=function(e){var t=window.URL||window.webkitURL;t.revokeObjectURL(e.target.src)},createjs.ImageLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JAVASCRIPT},t._formatResult=function(e){var t=e.getTag();return this._preferXHR&&(t.text=e.getResult(!0)),t},createjs.JavaScriptLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JSON},t._formatResult=function(e){var t=null;try{t=createjs.DataUtils.parseJSON(e.getResult(!0))}catch(r){var s=new createjs.ErrorEvent("JSON_FORMAT",null,r);return this._sendError(s),r}return t},createjs.JSONLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JSONP},t.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},t.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},t._handleLoad=function(e){this._result=this._rawResult=e,this._sendComplete(),this._dispose()},t._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},t._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.MANIFEST_PROGRESS=.25,r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.MANIFEST},t.load=function(){this.AbstractLoader_load()},t._createRequest=function(){var e=this._item.callback;null!=e?this._request=new createjs.JSONPLoader(this._item):this._request=new createjs.JSONLoader(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(r.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=r.MANIFEST_PROGRESS,this.progress=e.loaded/e.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},t._loadManifest=function(e){if(e&&e.manifest){var t=this._manifestQueue=new createjs.LoadQueue;t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("complete",this._handleManifestComplete,this,!0),t.on("error",this._handleManifestError,this,!0);for(var r=0,s=this.plugins.length;s>r;r++)t.installPlugin(this.plugins[r]);t.loadManifest(e)}else this._sendComplete()},t._handleManifestFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleManifestComplete=function(e){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-r.MANIFEST_PROGRESS)+r.MANIFEST_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.ManifestLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(e)?this._tag=e:createjs.RequestUtils.isAudioTag(e.src)?this._tag=e:createjs.RequestUtils.isAudioTag(e.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(e)?e:e.src),null!=this._tag&&(this._preferXHR=!1)}var t=createjs.extend(e,createjs.AbstractMediaLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SOUND},t._createTag=function(e){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(e)||createjs.RequestUtils.isVideoTag(e.src)?(this.setTag(createjs.RequestUtils.isVideoTag(e)?e:e.src),this._preferXHR=!1):this.setTag(this._createTag())}var t=createjs.extend(e,createjs.AbstractMediaLoader),r=e;t._createTag=function(){return document.createElement("video")},r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.SPRITESHEET_PROGRESS=.25,r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SPRITESHEET},t.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},t._createRequest=function(){var e=this._item.callback;null!=e?this._request=new createjs.JSONPLoader(this._item):this._request=new createjs.JSONLoader(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(r.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=r.SPRITESHEET_PROGRESS,this.progress=e.loaded/e.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t._loadManifest=function(e){if(e&&e.images){var t=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);t.on("complete",this._handleManifestComplete,this,!0),t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("error",this._handleManifestError,this,!0),t.loadManifest(e.images)}},t._handleManifestFileLoad=function(e){var t=e.result;if(null!=t){var r=this.getResult().images,s=r.indexOf(e.item.src);r[s]=t}},t._handleManifestComplete=function(e){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-r.SPRITESHEET_PROGRESS)+r.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.SpriteSheetLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",t?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SVG},t._formatResult=function(e){var t=createjs.DataUtils.parseXML(e.getResult(!0),"text/xml"),r=e.getTag();return!this._preferXHR&&document.body.contains(r)&&document.body.removeChild(r),null!=t.documentElement?(r.appendChild(t.documentElement),r.style.visibility="visible",r):t},createjs.SVGLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader),r=e;r.canLoadItem=function(e){return e.type==createjs.AbstractLoader.XML},t._formatResult=function(e){return createjs.DataUtils.parseXML(e.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(e,"AbstractLoader")}();var Animyst;!function(e){var t=function(){function e(e,t){void 0===t&&(t=60),this.time=0,this.playTime=0,this.currentFrame=0,this.id=e,this.animations={},this.spritesheets={},this.framerate=t}return e.prototype.addSheet=function(e){this.spritesheets[e.name]=e},e.prototype.getSheet=function(e){return this.spritesheets[e]},e.prototype.addAnimation=function(e,t,r,s){void 0===s&&(s={});var i={},n=this.getSheet(r);i.name=e,i.prefix=t,i.sheetID=r,i.useFrames=s.useFrames||!1,i.frames=n.getFrames(i.prefix),i.currentFrameIndex=0,i.totalFrames=i.frames.length,i.duration=s.duration||i.useFrames?i.totalFrames*(this.framerate/60):1e3/this.framerate*i.totalFrames,i.loop=s.loop||!1,i.repeat=s.repeat||0,i.elapsed=0,i.framecount=0,this.animations[i.name]=i},e.prototype.getAnimation=function(e){return this.animations[e]},e.prototype.play=function(e){if(this.currentAnim!=e){this.getAnimation(e);this.currentAnim=e,this.playing=!0}},e.prototype.stop=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.setIdle=function(e){},e.prototype.animate=function(e){if(void 0===e&&(e=0),this.playing){var t=this.getAnimation(this.currentAnim);t.useFrames}},e}();e.SpriteSheetAnimation=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(e){function t(t,r){var s=e.call(this)||this;return s.name=t,s.data=r,s.parse(),s}return __extends(t,e),t.prototype.parse=function(){for(var e in this.data.frames)this.addFrame(e,this.data.frames[e])},t.prototype.addFrame=function(e,t){var s=new r(e,t);this.create(s,e,t)},t.prototype.getFrame=function(e){return this.get(e)},t.prototype.getFrames=function(e){if(!this.hasCategory(e)){var t={};t.framePrefix=e,this.addCategory(e,function(e){return 0==e.id.indexOf(this.framePrefix)},r,t)}var s=this.getFromCategory(e);return s.sort(this._sortCaseInsensitive),s},t.prototype._sortCaseInsensitive=function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0},t}(e.Database);e.SpriteSheetData=t;var r=function(e){function t(t,r){return e.call(this,t,r)||this}return __extends(t,e),t.prototype.setup=function(t){this.frame=t.frame,this.rotated=t.rotated,this.trimmed=t.trimmed,this.spriteSourceSize=t.spriteSourceSize,this.sourceSize=t.sourceSize,this.pivot=t.pivot,e.prototype.setup.call(this,t)},t}(e.Item);e.FrameData=r}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(t){function r(e){return t.call(this,e)||this}return __extends(r,t),r.prototype.setup=function(){e.Log.output("[CoreProcess] Core Process Initialize"),t.prototype.setup.call(this),this._inputData=new e.InputData;var s=this.appScope.config,i=new e.Input(this._inputData);i.startup({element:document.body,keyboardSettings:s.settings.keyboard}),this.addSystem("input",i),this.appScope.addDatabase(r.INPUT,this._inputData)},r.prototype.start=function(){e.Log.output("[CoreProcess] Start"),t.prototype.start.call(this)},r.prototype.fixedUpdate=function(e,r){t.prototype.fixedUpdate.call(this,e,r)},r.prototype.pause=function(){t.prototype.pause.call(this)},r.prototype.resume=function(){t.prototype.resume.call(this)},r.prototype.kill=function(){t.prototype.kill.call(this)},r.prototype.restart=function(){t.prototype.restart.call(this)},r}(e.AppState);t.ID="core",t.INPUT="input",e.CoreProcess=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(e){}return e.search=function(e,t,r){for(var s=0;s<r.length;s++){var i=r[s];if(i[e]&&i[e]===t)return i}return null},e.searchAll=function(e,t,r,s){void 0===s&&(s=[]);for(var i=0;i<r.length;i++){var n=r[i];n[e]&&n[e]===t&&s.push(n)}return s},e.include=function(e,t){-1==t.indexOf(e)&&t.push(e)},e.remove=function(e,t){var r=t.indexOf(e);r>=0&&t.splice(r,1)},e.traverse=function(e,t,r,s,i){void 0===r&&(r=0),void 0===s&&(s=1),void 0===i&&(i=null);for(var n=r;n<e.length;n+=s)t.call(i,e[n])},e}();e.ArrayUtil=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(){}return e.loopSum=function(e,t,r,s){void 0===s&&(s=0);var i=(e+t)%(r+1)+s;return s>i&&(i=r+1-Math.abs(i-s)),i},e.constrain=function(e,t,r){return Math.max(t,Math.min(e,r))},e.findClosestDivisable=function(e,t){return t>=e?t:e%t>t/2?e+(t-e%t):e-e%t},e.findNextDivisable=function(e,t){return t>=e?t:e+(t-e%t)},e.interpolate=function(e,t,r){return e+(t-e)*r},e}();e.MathUtil=t}(Animyst||(Animyst={}));var Animyst;!function(e){var t=function(){function e(){}return e.invert=function(e){var t={};for(var r in e)t[e[r]]=r;return t},e.copy=function(t,r){r=r||{};for(var s in t)t[s]instanceof Object?Array.isArray(t[s])?r[s]=t[s].concat():r[s]=e.copy(t[s]):r[s]=t[s];return r},e}();e.ObjectUtil=t}(Animyst||(Animyst={}));
//# sourceMappingURL=animyst.min.js.map
